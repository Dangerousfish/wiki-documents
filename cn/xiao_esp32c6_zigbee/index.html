<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-zh-CN/Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_ESP32C6/Application/CN_xiao_esp32c6_zigbee" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">åœ¨XIAO ESP32C6ä¸Šå¿«é€Ÿå¼€å§‹Zigbeeå¼€å‘ï¼ˆä½¿ç”¨IDFï¼‰ | Seeed Studio Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wiki.seeedstudio.com/cn/xiao_esp32c6_zigbee/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="åœ¨XIAO ESP32C6ä¸Šå¿«é€Ÿå¼€å§‹Zigbeeå¼€å‘ï¼ˆä½¿ç”¨IDFï¼‰ | Seeed Studio Wiki"><meta data-rh="true" name="description" content="åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†è¸ä¸Šæ¢ç´¢ä½¿ç”¨ XIAO ESP32C6 å¼€å‘æ¿è¿›è¡Œ Zigbee åº”ç”¨ç¨‹åºå¼€å‘çš„æ—…ç¨‹ã€‚XIAO ESP32C6 æ˜¯ä¸€æ¬¾ç´§å‡‘è€Œå¼ºå¤§çš„å¼€å‘æ¿ï¼Œé‡‡ç”¨ ESP32-C6 èŠ¯ç‰‡ï¼Œæä¾›é›†æˆçš„ Wi-Fi å’Œä½åŠŸè€—è“ç‰™ ï¼ˆBLEï¼‰ è¿æ¥ã€‚é€šè¿‡åˆ©ç”¨ ESP Zigbee SDKï¼Œæˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨ XIAO ESP32C6 çš„æ½œåŠ›ï¼Œå¹¶æ‰©å±•å…¶åŠŸèƒ½ä»¥åŒ…æ‹¬ Zigbee åŠŸèƒ½ã€‚"><meta data-rh="true" property="og:description" content="åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†è¸ä¸Šæ¢ç´¢ä½¿ç”¨ XIAO ESP32C6 å¼€å‘æ¿è¿›è¡Œ Zigbee åº”ç”¨ç¨‹åºå¼€å‘çš„æ—…ç¨‹ã€‚XIAO ESP32C6 æ˜¯ä¸€æ¬¾ç´§å‡‘è€Œå¼ºå¤§çš„å¼€å‘æ¿ï¼Œé‡‡ç”¨ ESP32-C6 èŠ¯ç‰‡ï¼Œæä¾›é›†æˆçš„ Wi-Fi å’Œä½åŠŸè€—è“ç‰™ ï¼ˆBLEï¼‰ è¿æ¥ã€‚é€šè¿‡åˆ©ç”¨ ESP Zigbee SDKï¼Œæˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨ XIAO ESP32C6 çš„æ½œåŠ›ï¼Œå¹¶æ‰©å±•å…¶åŠŸèƒ½ä»¥åŒ…æ‹¬ Zigbee åŠŸèƒ½ã€‚"><meta data-rh="true" property="og:image" content="https://files.seeedstudio.com/wiki/xiaoc6_zigbee/3.jpg"><meta data-rh="true" name="twitter:image" content="https://files.seeedstudio.com/wiki/xiaoc6_zigbee/3.jpg"><link data-rh="true" rel="icon" href="/img/S.png"><link data-rh="true" rel="canonical" href="https://wiki.seeedstudio.com/cn/xiao_esp32c6_zigbee/"><link data-rh="true" rel="alternate" href="https://wiki.seeedstudio.com/cn/xiao_esp32c6_zigbee/" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://wiki.seeedstudio.com/cn/xiao_esp32c6_zigbee/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Seeed Studio Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Seeed Studio Wiki Atom Feed">

<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-M4JG2HVB",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>


<link rel="icon" href="/img/S.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">


<link rel="search" type="application/opensearchdescription+xml" title="Seeed Studio Wiki" href="/opensearch.xml">
<script src="https://viewer.altium.com/client/static/js/embed.js" async></script>
<script src="/js/custom.js" async></script><link rel="stylesheet" href="/assets/css/styles.e121acb0.css">
<link rel="preload" href="/assets/js/runtime~main.aef2b940.js" as="script">
<link rel="preload" href="/assets/js/main.983efa68.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M4JG2HVB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#013949;color:#FFFFFF" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Collaborating with us! Join the Seeed Studio <a target="_blank" href="https://wiki.seeedstudio.com/ranger/">Ranger Program</a> or <a target="_blank" href="https://wiki.seeedstudio.com/contributors/">Contributor Program</a>!</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://files.seeedstudio.com/wiki/wiki-platform/SeeedStudio.png" alt="Seeed Studio" class="themedImage_ToTc themedImage--light_HNdA navbar_logo_items"><img src="https://files.seeedstudio.com/wiki/wiki-platform/seeed_white_logo.png" alt="Seeed Studio" class="themedImage_ToTc themedImage--dark_i4oU navbar_logo_items"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items js_getting_started" aria-haspopup="true" aria-expanded="false" role="button" href="/Getting_Started/">Quick Links</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Sensor_Network/">Sensor and Sensing</a></li><li><a class="dropdown__link" href="/Network/">Networking</a></li><li><a class="dropdown__link" href="/Edge_Computing/">Edge Computing</a></li><li><a class="dropdown__link" href="/Cloud/">Cloud</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items js_explore_learn" aria-haspopup="true" aria-expanded="false" role="button" href="/topicintroduction/">Explore with Topics</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tinyml_topic/">TinyML</a></li><li><a class="dropdown__link" href="/ModelAssistant_Introduce_Overview/">SenseCraft Model Assistant</a></li><li><a class="dropdown__link" href="/home_assistant_topic/">Home Assistant</a></li><li><a class="dropdown__link" href="/open_source_topic/">Open Source</a></li><li><a class="dropdown__link" href="/edge_ai_topic/">Edge AI</a></li><li><a class="dropdown__link" href="/cn/Getting_Started/">çŸ½é€’ç§‘æŠ€ Wiki æ–‡æ¡£å¹³å°</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items" aria-haspopup="true" aria-expanded="false" role="button" href="/knowledgebase/">FAQs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Jetson_FAQ/">NVIDIA Jetson Series</a></li><li><a class="dropdown__link" href="/XIAO_FAQ/">Seeed Studio XIAO Series</a></li><li><a class="dropdown__link" href="/reComputer_R1000_FAQ/">reComputer R1000 Series</a></li><li><a class="dropdown__link" href="/reTerminal-new_FAQ/">reTerminal</a></li><li><a class="dropdown__link" href="/FAQs_For_openWrt/">reRouter</a></li><li><a class="dropdown__link" href="/ODYSSEY_FAQ/">Odyssey</a></li><li><a class="dropdown__link" href="/wio_terminal_faq/">Wio Terminal</a></li><li><hr style="margin: 8px 0;"></li><li><a href="https://discord.com/invite/eWkprNDMU7" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.seeedstudio.com/contacts" target="_blank" rel="noopener noreferrer" class="dropdown__link">Email<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://forum.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/Seeed-Studio/wiki-documents/discussions/69" target="_blank" rel="noopener noreferrer" class="dropdown__link">Have Suggestions?<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items" aria-haspopup="true" aria-expanded="false" role="button" href="/ranger/">Rangers</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ranger/">Rangers</a></li><li><a class="dropdown__link" href="/contributors/">Contributors</a></li><li><a href="https://docs.google.com/forms/d/e/1FAIpQLSdiAWHmRJqgVNTJyJDkzhufc1dygFyhWFyEtUTm-mrgSKaEgg/viewform" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apply for Rangers<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/orgs/Seeed-Studio/projects/6" target="_blank" rel="noopener noreferrer" class="dropdown__link">Direct to Assignments<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.seeedstudio.com/blog/2023/09/15/join-the-seeed-ranger-program-empowering-developers-and-building-communities/" target="_blank" rel="noopener noreferrer" class="dropdown__link">More about Rangers<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://wiki.seeedstudio.com/Contributor" target="_blank" rel="noopener noreferrer" class="dropdown__link">More about Contributors<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://www.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_doc_right_items">Bazaar ğŸ›ï¸</a><a href="https://wiki-gpt.seeedstudio.com/chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_doc_right_items">AI Bot ğŸ¤–ï¸</a><a href="https://sensecraft.seeed.cc/ai/#/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_doc_right_items">SenseCraft AI</a><a href="https://sensecraft.seeed.cc/ai/#/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-SSCMA"></a><a href="https://github.com/Seeed-Studio/wiki-documents" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Getting_Started/">çŸ½é€’ç§‘æŠ€ Wiki æ–‡æ¡£å¹³å°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/Grove_System/">Grove ç³»åˆ—</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/grove_vision_ai_v2/">Grove ä¼ æ„Ÿå™¨</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/Grove_Accessories_Intro/">Grove é…ä»¶</a><button aria-label="Toggle the collapsible sidebar category &#x27;Grove é…ä»¶&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/SeeedStudio_XIAO_Series_Introduction/">XIAO æ‹‡æŒ‡å¼€å‘æ¿</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/Seeeduino-XIAO/">XIAO SAMD21</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO SAMD21&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/getting_started_xiao_ra4m1/">XIAO RA4M1</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO RA4M1&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/xiao_mg24_getting_started/">XIAO MG24</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO MG24&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/XIAO-RP2040/">XIAO RP2040</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO RP2040&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/getting-started-xiao-rp2350/">XIAO RP2350</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO RP2350&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/XIAO_BLE/">XIAO nRF52840 (Sense)</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO nRF52840 (Sense)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/XIAO_ESP32C3_Getting_Started/">XIAO ESP32C3</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO ESP32C3&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cn/xiao_esp32c6_getting_started/">XIAO ESP32C6</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO ESP32C6&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/xiao_pin_multiplexing_esp33c6/">ä½¿ç”¨ Seeed Studio XIAO ESP32C6 è¿›è¡Œå¼•è„šå¤šè·¯å¤ç”¨</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cn/xiao_wifi_usage_esp32c6/">æ— çº¿é€šè®¯åŠŸèƒ½</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cn/xiao-esp32-swift/">ç¼–ç¨‹è¯­è¨€</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cn/xiao_esp32c6_with_platform_io/">å¹³å°</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/cn/xiao_esp32c6_aws_iot/">å®ç”¨æ•™ç¨‹</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/xiao_esp32c6_aws_iot/">ç”¨AWS IoT Coreä¸ºXIAO ESP32C6èµ‹èƒ½AI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/xiao_esp32c6_espnow/">XIAO ESP32 ç³»åˆ—ä¸Šçš„ ESP-NOW åè®®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/xiao_esp32c6_kafka/">ç”± Apache Kafka æä¾›æ”¯æŒçš„å®æ—¶ IoT æ•°æ®å¤„ç†èŠ‚ç‚¹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/xiao_esp32c6_zigbee_arduino/">åœ¨ XIAO ESP32C6 ä¸Šä½¿ç”¨ Zigbee å¿«é€Ÿå…¥é—¨ï¼ˆé€šè¿‡ Arduinoï¼‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cn/xiao_esp32c6_zigbee/">åœ¨XIAO ESP32C6ä¸Šå¿«é€Ÿå¼€å§‹Zigbeeå¼€å‘ï¼ˆä½¿ç”¨IDFï¼‰</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/xiao_esp32s3_getting_started/">XIAO ESP32S3 (Sense)</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO ESP32S3 (Sense)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/get_start_round_display/">XIAO çš„å…¼å®¹æ‰©å±•æ¿</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/xiao_idf/">XIAO + ESP-IDF + ESP- Matter</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/xiao_espnow/">ESP-NOW ç™»é™† XIAO ESP32 ç³»åˆ—</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/PCB_Design_XIAO/">XIAO çš„ PCB è®¾è®¡</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/XIAO-Kit-Courses/">åŸºäº XIAO çš„åˆå­¦è€…å¥—ä»¶</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/xiao_topic_page/">XIAO ç³»åˆ—æ•™ç¨‹å’Œé¡¹ç›®åˆé›†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/XIAO_FAQ/">XIAO å¼€å‘æ¿å¸¸è§é—®é¢˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/reComputer_Intro/">NVIDIA Jetson å¥—ä»¶</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/reComputer_Intro/">reComputer è‹±ä¼Ÿè¾¾ç³»åˆ—</a><button aria-label="Toggle the collapsible sidebar category &#x27;reComputer è‹±ä¼Ÿè¾¾ç³»åˆ—&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/Generative_AI_Intro/">ç”Ÿæˆå¼äººå·¥æ™ºèƒ½åº”ç”¨</a><button aria-label="Toggle the collapsible sidebar category &#x27;ç”Ÿæˆå¼äººå·¥æ™ºèƒ½åº”ç”¨&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/How_to_Train_and_Deploy_YOLOv8_on_reComputer/">è®¡ç®—æœºè§†è§‰åº”ç”¨</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/Wio_Terminal_Intro/">Wio Terminal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Wio-Terminal-Getting-Started-test/">Wio Terminalå…¥é—¨æ•™ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Wio-Terminal-CircuitPython/">Wio Terminalä¸Šçš„CircuitPython</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Software-FreeRTOS/">Wio Terminalä¸Šçš„FreeRTOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/wio_terminal_faq/">Wio Terminal å¸¸è§é—®é¢˜è§£ç­”</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Wio-Terminal-LCD-Overview/">ç¡¬ä»¶æ¦‚è¿°</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Connect-Wio-Terminal-to-Microsoft-Azure-IoT-Central/">åº”ç”¨</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Wio-Terminal-Battery-Chassis/">æ‰©å±•æ¿</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Wio-Terminal-TinyML-Kit-Course/">è¯¾ç¨‹å¥—ä»¶</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Wio-Terminal-Firmware/">æ•™ç¨‹</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/Quantum-Mini-Linux-Development-Kit/">å¤¸å…‹(Quark)è¿·ä½ å¼€å‘è€…å¥—ä»¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/mmwave_radar_Intro/">æ¯«ç±³æ³¢é›·è¾¾ä¼ æ„Ÿå™¨</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/mmwave_for_xiao/">ç”¨äºXIAOçš„æ¯«ç±³æ³¢</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/mmwave_human_detection_kit/">æ¯«ç±³æ³¢å¥—ä»¶</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR24BSD1/">24GHz æ¯«ç±³æ³¢ä¼ æ„Ÿå™¨ - ç¡çœ å‘¼å¸ç›‘æµ‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR24FDB1/">24GHzæ¯«ç±³æ³¢ä¼ æ„Ÿå™¨ - äººä½“è·Œå€’æ£€æµ‹ä¼ æ„Ÿå™¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR24HPB1/">24GHz æ¯«ç±³æ³¢ä¼ æ„Ÿå™¨ - äººä½“é™æ€å­˜åœ¨æ¨¡å—</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR24HPC1/">24GHzæ¯«ç±³æ³¢ä¼ æ„Ÿå™¨ - äººä½“é™æ€å­˜åœ¨æ¨¡å—ç²¾ç®€ç‰ˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR60BHA1/">60GHzæ¯«ç±³æ³¢ä¼ æ„Ÿå™¨ - äººä½“é™æ€ç¡çœ å‘¼å¸ç›‘æµ‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR60FDA1/">60GHzæ¯«ç±³æ³¢ä¼ æ„Ÿå™¨ - è·Œå€’æ£€æµ‹æ¨¡å—ä¸“ä¸šç‰ˆ</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cn/xiao_esp32c6_getting_started/"><span itemprop="name">XIAO ESP32C6</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">å®ç”¨æ•™ç¨‹</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">åœ¨XIAO ESP32C6ä¸Šå¿«é€Ÿå¼€å§‹Zigbeeå¼€å‘ï¼ˆä½¿ç”¨IDFï¼‰</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>åœ¨XIAO ESP32C6ä¸Šå¿«é€Ÿå¼€å§‹Zigbeeå¼€å‘ï¼ˆä½¿ç”¨IDFï¼‰</h1><p>Zigbeeæ˜¯ä¸€ç§å¹¿æ³›é‡‡ç”¨çš„æ— çº¿é€šä¿¡åè®®ï¼Œå¹¿æ³›åº”ç”¨äºå®¶åº­è‡ªåŠ¨åŒ–ã€æ™ºèƒ½èƒ½æºç®¡ç†å’Œç‰©è”ç½‘ï¼ˆIoTï¼‰åº”ç”¨ã€‚Zigbeeä»¥ä½åŠŸè€—ã€å¯é çš„æ•°æ®ä¼ è¾“å’Œç½‘çŠ¶ç½‘ç»œèƒ½åŠ›è€Œé—»åï¼Œæ˜¯æ„å»ºå¯æ‰©å±•ä¸”é«˜æ•ˆçš„æ— çº¿ç½‘ç»œçš„ç»ä½³é€‰æ‹©ã€‚</p><p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å¼€å§‹æ¢ç´¢ä½¿ç”¨XIAO ESP32C6å¼€å‘æ¿è¿›è¡ŒZigbeeåº”ç”¨å¼€å‘ã€‚XIAO ESP32C6æ˜¯ä¸€æ¬¾ç´§å‡‘è€Œå¼ºå¤§çš„å¼€å‘æ¿ï¼Œæ­è½½äº†ESP32-C6èŠ¯ç‰‡ï¼Œå…·æœ‰é›†æˆçš„Wi-Fiå’Œä½åŠŸè€—è“ç‰™ï¼ˆBLEï¼‰è¿æ¥èƒ½åŠ›ã€‚é€šè¿‡åˆ©ç”¨ESP Zigbee SDKï¼Œæˆ‘ä»¬å¯ä»¥å……åˆ†å‘æŒ¥XIAO ESP32C6çš„æ½œåŠ›ï¼Œå¹¶å°†å…¶åŠŸèƒ½æ‰©å±•åˆ°Zigbeeé€šä¿¡ã€‚</p><div style="text-align:center"><img loading="lazy" src="https://files.seeedstudio.com/wiki/xiaoc6_zigbee/0.png" style="width:800px;height:auto" class="img_ev3q"></div><p>ä¸ºäº†æ·±å…¥äº†è§£Zigbeeå¼€å‘ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨ESP Zigbee SDKæä¾›çš„ä¸¤ä¸ªç¤ºä¾‹ç¨‹åºï¼šHA_on_off_lightå’ŒHA_on_off_switchã€‚è¿™äº›ç¤ºä¾‹åˆ†åˆ«å±•ç¤ºäº†Zigbeeç¯è®¾å¤‡å’ŒZigbeeå¼€å…³è®¾å¤‡çš„å®ç°ã€‚é€šè¿‡è¯¦ç»†åˆ†æè¿™äº›ç¤ºä¾‹çš„ä»£ç ç»“æ„ã€æ•°æ®æ¨¡å‹å’Œå·¥ä½œåŸç†ï¼Œæˆ‘ä»¬å°†å…¨é¢äº†è§£Zigbeeè®¾å¤‡çš„å¼€å‘ã€‚</p><p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†è¦†ç›–ä»¥ä¸‹å…³é”®å†…å®¹ï¼š</p><ol><li>ä¸ºXIAO ESP32C6å’ŒESP Zigbee SDKé…ç½®å¼€å‘ç¯å¢ƒã€‚</li><li>åˆ†æHA_on_off_lightå’ŒHA_on_off_switchç¤ºä¾‹çš„ä»£ç ç»“æ„å’Œç»„ç»‡ã€‚</li><li>ç†è§£Zigbeeè®¾å¤‡çš„æ•°æ®æ¨¡å‹ä»¥åŠå®ƒä»¬åœ¨ä»£ç ä¸­çš„å®šä¹‰ã€‚</li><li>æ¢ç´¢Zigbeeè®¾å¤‡çš„åˆå§‹åŒ–è¿‡ç¨‹å’Œäº‹ä»¶å¤„ç†æœºåˆ¶ã€‚</li><li>å®¡è§†Zigbeeè®¾å¤‡ä¹‹é—´çš„é€šä¿¡æ¨¡å¼å’Œæ¶ˆæ¯äº¤æ¢ã€‚</li></ol><p>é€šè¿‡æœ¬æ•™ç¨‹çš„å­¦ä¹ ï¼Œæ‚¨å°†æŒæ¡ä½¿ç”¨XIAO ESP32C6å’ŒESP Zigbee SDKè¿›è¡ŒZigbeeå¼€å‘çš„åŸºç¡€çŸ¥è¯†å’Œå®é™…æŠ€èƒ½ã€‚æŒæ¡äº†è¿™äº›çŸ¥è¯†åï¼Œæ‚¨å°†èƒ½å¤Ÿè½»æ¾åˆ›å»ºè‡ªå·±çš„Zigbeeé¡¹ç›®ï¼Œå¹¶ä¸ºä¸æ–­å£®å¤§çš„Zigbeeè®¾å¤‡ç”Ÿæ€ç³»ç»Ÿåšå‡ºè´¡çŒ®ã€‚</p><p>é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬å¼€å§‹è¿™æ®µå……æ»¡æŒ‘æˆ˜å’Œæœºé‡çš„Zigbeeå¼€å‘ä¹‹æ—…ï¼Œè§£é”è¿™ä¸ªå¼ºå¤§æ— çº¿é€šä¿¡åè®®çš„å…¨éƒ¨æ½œåŠ›å§ï¼</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¡¬ä»¶å‡†å¤‡">ç¡¬ä»¶å‡†å¤‡<a href="#ç¡¬ä»¶å‡†å¤‡" class="hash-link" aria-label="Direct link to ç¡¬ä»¶å‡†å¤‡" title="Direct link to ç¡¬ä»¶å‡†å¤‡">â€‹</a></h2><p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<strong>ä¸¤å—</strong>XIAO ESP32C6ä½œä¸ºç¤ºä¾‹æ¥è®²è§£Zigbeeã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è´­ä¹°å®ƒä»¬ã€‚ä¸€å—ä½œä¸ºZigbeeç»ˆç«¯è®¾å¤‡ï¼Œå¦ä¸€å—ä½œä¸ºZigbeeåè°ƒå™¨ã€‚</p><div class="table-center"><table><tr><th>Seeed Studio XIAO ESP32C6</th></tr><tr><td><div style="text-align:center"><img loading="lazy" src="https://files.seeedstudio.com/wiki/SeeedStudio-XIAO-ESP32C6/img/xiaoc6.jpg" style="width:250px;height:auto" class="img_ev3q"></div></td></tr><tr><td><div class="get_one_now_container" style="text-align:center"><a href="https://www.seeedstudio.com/Seeed-Studio-XIAO-ESP32C6-p-5884.html" target="_blank" rel="noopener noreferrer" class="get_one_now_item"><strong><span><font color="FFFFFF" size="4"> ç«‹å³è´­ä¹° ğŸ–±ï¸</font></span></strong></a></div></td></tr></table></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¯å¢ƒå‡†å¤‡ä¸æ¼”ç¤º">ç¯å¢ƒå‡†å¤‡ä¸æ¼”ç¤º<a href="#ç¯å¢ƒå‡†å¤‡ä¸æ¼”ç¤º" class="hash-link" aria-label="Direct link to ç¯å¢ƒå‡†å¤‡ä¸æ¼”ç¤º" title="Direct link to ç¯å¢ƒå‡†å¤‡ä¸æ¼”ç¤º">â€‹</a></h2><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å¼•å¯¼æ‚¨é…ç½®å¼€å‘ç¯å¢ƒå¹¶ä¸Šä¼ ç¤ºä¾‹ä¸­çš„ä¸¤ä¸ªç¨‹åºã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬1æ­¥å‡†å¤‡esp-idfç¯å¢ƒ">ç¬¬1æ­¥ï¼šå‡†å¤‡ESP-IDFç¯å¢ƒ<a href="#ç¬¬1æ­¥å‡†å¤‡esp-idfç¯å¢ƒ" class="hash-link" aria-label="Direct link to ç¬¬1æ­¥ï¼šå‡†å¤‡ESP-IDFç¯å¢ƒ" title="Direct link to ç¬¬1æ­¥ï¼šå‡†å¤‡ESP-IDFç¯å¢ƒ">â€‹</a></h3><p>è¦ä½¿ç”¨Zigbee SDKï¼Œå»ºè®®ä½¿ç”¨Espressifçš„ESP-IDFå¼€å‘æ¡†æ¶ã€‚Espressifå®˜æ–¹æä¾›äº†è¯¦ç»†çš„å®‰è£…æ•™ç¨‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¸‹é¢çš„æŒ‰é’®è·³è½¬å¹¶é˜…è¯»é€‚ç”¨äºä¸åŒç³»ç»Ÿçš„å®‰è£…æµç¨‹ã€‚</p><div class="get_one_now_container" style="text-align:center"><a href="https://docs.espressif.com/projects/esp-idf/en/v5.1.3/esp32h2/get-started/index.html#installation" target="_blank" rel="noopener noreferrer" class="get_one_now_item"><strong><span><font color="FFFFFF" size="4"> å‰å¾€é¡µé¢ ğŸ–±ï¸</font></span></strong></a></div><p>å¦‚æœæ‚¨æ°å¥½ä½¿ç”¨çš„æ˜¯Ubuntuç³»ç»Ÿï¼Œæ‚¨éœ€è¦åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone --recursive https://github.com/espressif/esp-idf.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd esp-idf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git checkout v5.1.3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git submodule update --init --recursive</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./install.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">source ./export.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Espressifå»ºè®®ä½¿ç”¨<strong>ESP-IDF v5.1.3</strong>è¿›è¡ŒZigbeeå¼€å‘ï¼Œè¿™æ˜¯æœ¬æ•™ç¨‹éªŒè¯è¿‡çš„ç‰ˆæœ¬ã€‚</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬2æ­¥ä¸‹è½½zigbee-sdk">ç¬¬2æ­¥ï¼šä¸‹è½½Zigbee SDK<a href="#ç¬¬2æ­¥ä¸‹è½½zigbee-sdk" class="hash-link" aria-label="Direct link to ç¬¬2æ­¥ï¼šä¸‹è½½Zigbee SDK" title="Direct link to ç¬¬2æ­¥ï¼šä¸‹è½½Zigbee SDK">â€‹</a></h3><p>å…‹éš†esp-zigbee-sdkï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/espressif/esp-zigbee-sdk.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd esp-zigbee-sdk/examples/esp_zigbee_HA_sample</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬3æ­¥ç¼–å†™ha_on_off_lightç¨‹åº">ç¬¬3æ­¥ï¼šç¼–å†™HA_on_off_lightç¨‹åº<a href="#ç¬¬3æ­¥ç¼–å†™ha_on_off_lightç¨‹åº" class="hash-link" aria-label="Direct link to ç¬¬3æ­¥ï¼šç¼–å†™HA_on_off_lightç¨‹åº" title="Direct link to ç¬¬3æ­¥ï¼šç¼–å†™HA_on_off_lightç¨‹åº">â€‹</a></h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬å‡†å¤‡å¥½ç¬¬ä¸€ä¸ªXIAO ESP32C6ã€‚æˆ‘ä»¬å°†ä¸ºå®ƒç¼–å†™å¹¶åˆ·å†™Zigbeeç»ˆç«¯è®¾å¤‡ç¨‹åºã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd HA_on_off_light/main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”±äºç¤ºä¾‹ç¨‹åºä¸­ä½¿ç”¨GPIO8ä½œä¸ºLEDï¼Œä½†XIAOä¸Šçš„LEDæ˜¯GPIO15ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹ç¤ºä¾‹ç¨‹åºè¿›è¡Œä¸€äº›ç®€å•çš„ä¿®æ”¹ï¼Œä»¥æ˜¾ç¤ºæ•ˆæœã€‚</p><p>éœ€è¦ä¿®æ”¹çš„ç¨‹åºä½äº<code>esp_zb_light.c</code>çš„ä¸»æ–‡ä»¶ä¸­ã€‚ä¿®æ”¹åçš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;esp_zb_light.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;esp_check.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;esp_log.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;nvs_flash.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;freertos/FreeRTOS.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;freertos/task.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;ha/esp_zigbee_ha_standard.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;driver/gpio.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression operator">!</span><span class="token macro property expression">defined ZB_ED_ROLE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">error</span><span class="token macro property"> </span><span class="token macro property expression">åœ¨idf</span><span class="token macro property expression punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token macro property expression">py menuconfigä¸­å®šä¹‰ZB_ED_ROLEä»¥ç¼–è¯‘ç¯å…‰ï¼ˆç»ˆç«¯è®¾å¤‡ï¼‰æºä»£ç ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">endif</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">TAG </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ESP_ZB_ON_OFF_LIGHT&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">BLINK_GPIO</span><span class="token macro property"> </span><span class="token macro property expression number">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/********************* å®šä¹‰å‡½æ•° **************************/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> esp_err_t </span><span class="token function" style="color:rgb(80, 250, 123)">deferred_driver_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">light_driver_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">LIGHT_DEFAULT_OFF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">configure_led</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ç¤ºä¾‹é…ç½®ä¸ºé—ªçƒGPIO LED!&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">gpio_reset_pin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">BLINK_GPIO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/* è®¾ç½®GPIOä¸ºæ¨æŒ½è¾“å‡ºæ¨¡å¼ */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">gpio_set_direction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">BLINK_GPIO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> GPIO_MODE_OUTPUT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">bdb_start_top_level_commissioning_cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token plain"> mode_mask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_RETURN_ON_FALSE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_start_top_level_commissioning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">mode_mask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å¯åŠ¨Zigbeeè°ƒè¯•å¤±è´¥&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_app_signal_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_app_signal_t </span><span class="token operator">*</span><span class="token plain">signal_struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">p_sg_p </span><span class="token operator">=</span><span class="token plain"> signal_struct</span><span class="token operator">-&gt;</span><span class="token plain">p_app_signal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_err_t err_status </span><span class="token operator">=</span><span class="token plain"> signal_struct</span><span class="token operator">-&gt;</span><span class="token plain">esp_err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_app_signal_type_t sig_type </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">p_sg_p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sig_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_ZDO_SIGNAL_SKIP_STARTUP</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;åˆå§‹åŒ–Zigbeeæ ˆ&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_start_top_level_commissioning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ESP_ZB_BDB_MODE_INITIALIZATION</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_DEVICE_FIRST_START</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_DEVICE_REBOOT</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å»¶è¿Ÿé©±åŠ¨ç¨‹åºåˆå§‹åŒ– %s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">deferred_driver_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å¤±è´¥&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;æˆåŠŸ&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;è®¾å¤‡å·²åœ¨%så·¥å‚é‡ç½®æ¨¡å¼å¯åŠ¨&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_is_factory_new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;é&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_is_factory_new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å¼€å§‹ç½‘ç»œå¼•å¯¼&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_start_top_level_commissioning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ESP_ZB_BDB_MODE_NETWORK_STEERING</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;è®¾å¤‡å·²é‡å¯&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">/* è°ƒè¯•å¤±è´¥ */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGW</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;åˆå§‹åŒ–Zigbeeæ ˆå¤±è´¥ (çŠ¶æ€: %s)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_err_to_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_STEERING</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            esp_zb_ieee_addr_t extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;æˆåŠŸåŠ å…¥ç½‘ç»œ (æ‰©å±•PAN ID: %02x:%02x:%02x:%02x:%02x:%02x:%02x:%02x, PAN ID: 0x%04hx, é€šé“:%d, çŸ­åœ°å€: 0x%04hx)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_current_channel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_short_address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ç½‘ç»œå¼•å¯¼å¤±è´¥ (çŠ¶æ€: %s)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_err_to_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_scheduler_alarm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_callback_t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">bdb_start_top_level_commissioning_cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ESP_ZB_BDB_MODE_NETWORK_STEERING</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ZDOä¿¡å·: %s (0x%x), çŠ¶æ€: %s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_zdo_signal_to_string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sig_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> sig_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                 </span><span class="token function" style="color:rgb(80, 250, 123)">esp_err_to_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> esp_err_t </span><span class="token function" style="color:rgb(80, 250, 123)">zb_attribute_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> esp_zb_zcl_set_attr_value_message_t </span><span class="token operator">*</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_err_t ret </span><span class="token operator">=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">bool</span><span class="token plain"> light_state </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_RETURN_ON_FALSE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ESP_FAIL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ç©ºæ¶ˆæ¯&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_RETURN_ON_FALSE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">message</span><span class="token operator">-&gt;</span><span class="token plain">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">status </span><span class="token operator">==</span><span class="token plain"> ESP_ZB_ZCL_STATUS_SUCCESS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ESP_ERR_INVALID_ARG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;æ¥æ”¶åˆ°çš„æ¶ˆæ¯: é”™è¯¯çŠ¶æ€(%d)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        message</span><span class="token operator">-&gt;</span><span class="token plain">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;æ¥æ”¶åˆ°çš„æ¶ˆæ¯: ç«¯ç‚¹(%d), èšåˆç¾¤ç»„(0x%x), å±æ€§(0x%x), æ•°æ®å¤§å°(%d)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> message</span><span class="token operator">-&gt;</span><span class="token plain">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">dst_endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> message</span><span class="token operator">-&gt;</span><span class="token plain">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             message</span><span class="token operator">-&gt;</span><span class="token plain">attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> message</span><span class="token operator">-&gt;</span><span class="token plain">attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">message</span><span class="token operator">-&gt;</span><span class="token plain">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">dst_endpoint </span><span class="token operator">==</span><span class="token plain"> HA_ESP_LIGHT_ENDPOINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">message</span><span class="token operator">-&gt;</span><span class="token plain">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cluster </span><span class="token operator">==</span><span class="token plain"> ESP_ZB_ZCL_CLUSTER_ID_ON_OFF</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">message</span><span class="token operator">-&gt;</span><span class="token plain">attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">id </span><span class="token operator">==</span><span class="token plain"> ESP_ZB_ZCL_ATTR_ON_OFF_ON_OFF_ID </span><span class="token operator">&amp;&amp;</span><span class="token plain"> message</span><span class="token operator">-&gt;</span><span class="token plain">attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">type </span><span class="token operator">==</span><span class="token plain"> ESP_ZB_ZCL_ATTR_TYPE_BOOL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                light_state </span><span class="token operator">=</span><span class="token plain"> message</span><span class="token operator">-&gt;</span><span class="token plain">attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">value </span><span class="token operator">?</span><span class="token plain"> </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">bool</span><span class="token plain"> </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">message</span><span class="token operator">-&gt;</span><span class="token plain">attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">value </span><span class="token operator">:</span><span class="token plain"> light_state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ç¯å…‰è®¾ç½®ä¸º %s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> light_state </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å¼€&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å…³&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">gpio_set_level</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">BLINK_GPIO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> light_state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token comment" style="color:rgb(98, 114, 164)">// light_driver_set_power(light_state);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> ret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> esp_err_t </span><span class="token function" style="color:rgb(80, 250, 123)">zb_action_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_core_action_callback_id_t callback_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_err_t ret </span><span class="token operator">=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">callback_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_CORE_SET_ATTR_VALUE_CB_ID</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ret </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">zb_attribute_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_zcl_set_attr_value_message_t </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGW</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;æ¥æ”¶åˆ°ZigbeeåŠ¨ä½œ(0x%x)å›è°ƒ&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> callback_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> ret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_task</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">pvParameters</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/* åˆå§‹åŒ–Zigbeeæ ˆ */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_cfg_t zb_nwk_cfg </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ZB_ZED_CONFIG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">&amp;</span><span class="token plain">zb_nwk_cfg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_on_off_light_cfg_t light_cfg </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ZB_DEFAULT_ON_OFF_LIGHT_CONFIG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_ep_list_t </span><span class="token operator">*</span><span class="token plain">esp_zb_on_off_light_ep </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_on_off_light_ep_create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">HA_ESP_LIGHT_ENDPOINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">light_cfg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_device_register</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_on_off_light_ep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_core_action_handler_register</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">zb_action_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_set_primary_network_channel_set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ESP_ZB_PRIMARY_CHANNEL_MASK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_main_loop_iteration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">app_main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">configure_led</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_platform_config_t config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">radio_config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ZB_DEFAULT_RADIO_CONFIG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">host_config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ZB_DEFAULT_HOST_CONFIG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">nvs_flash_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_platform_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">&amp;</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">xTaskCreate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_task</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Zigbee_main&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">4096</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯·ä¿å­˜æ­¤ä»£ç ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬4æ­¥çƒ§å½•-ha_on_off_light-ç¨‹åº">ç¬¬4æ­¥ï¼šçƒ§å½• HA_on_off_light ç¨‹åº<a href="#ç¬¬4æ­¥çƒ§å½•-ha_on_off_light-ç¨‹åº" class="hash-link" aria-label="Direct link to ç¬¬4æ­¥ï¼šçƒ§å½• HA_on_off_light ç¨‹åº" title="Direct link to ç¬¬4æ­¥ï¼šçƒ§å½• HA_on_off_light ç¨‹åº">â€‹</a></h3><p>ç°åœ¨å°†æ‚¨çš„ XIAO ESP32C6 å¼€å‘æ¿è¿æ¥åˆ°è®¡ç®—æœºï¼Œå¹¶æ£€æŸ¥è¯¥å¼€å‘æ¿åœ¨å“ªä¸ªä¸²å£ä¸‹å¯è§ã€‚</p><p>ä¸²å£çš„å‘½åæ¨¡å¼é€šå¸¸æ˜¯ï¼š<code>/dev/tty</code>ã€‚é€šå¸¸ï¼Œæ‚¨çš„è®¡ç®—æœºå¯èƒ½æœ‰å¤šä¸ªä»¥ <code>tty</code> å¼€å¤´çš„ç«¯å£ã€‚</p><div style="text-align:center"><img loading="lazy" src="https://files.seeedstudio.com/wiki/xiaoc6-matter/11.png" style="width:800px;height:auto" class="img_ev3q"></div><p>ç¡®å®šç«¯å£ä¹Ÿå¾ˆç®€å•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æŸ¥è¯¢å‘½ä»¤æŸ¥çœ‹é»˜è®¤æƒ…å†µä¸‹æœªè¿æ¥ XIAO æ—¶ç³»ç»Ÿæœ‰å“ªäº›ä¸²å£ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ls /dev/tty*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åï¼Œåœ¨å°† XIAO è¿æ¥åˆ°è®¡ç®—æœºåå†æ¬¡æŸ¥è¯¢ï¼Œæ–°å¢çš„ä¸²å£åç§°å°±æ˜¯ XIAO çš„ç«¯å£å·ã€‚</p><p>è®¾ç½®ç›®æ ‡è®¾å¤‡ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">idf.py set-target esp32c6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ„å»ºé¡¹ç›®ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">idf.py build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¦çƒ§å½•ä¹‹å‰æ­¥éª¤ä¸­ä¸º ESP32 æ„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‚¨éœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">idf.py -p PORT flash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å°† <code>PORT</code> æ›¿æ¢ä¸ºæ‚¨çš„ XIAO ESP32C6 çš„ USB ç«¯å£åç§°ã€‚å¦‚æœ <strong>PORT</strong> æœªå®šä¹‰ï¼Œ<code>idf.py</code> ä¼šå°è¯•è‡ªåŠ¨è¿æ¥å¯ç”¨çš„ USB ç«¯å£ã€‚æ ¹æ®æˆ‘ä»¬åœ¨ç¬¬ä¸€æ­¥æŸ¥è¯¢åˆ°çš„è®¾å¤‡ç«¯å£å·ï¼Œå¯¹äºæˆ‘æ¥è¯´ï¼Œæˆ‘åº”è¯¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥çƒ§å½•ç¨‹åºã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">idf.py -p /dev/ttyACM0 flash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœçƒ§å½•è¿‡ç¨‹ä¸­æ²¡æœ‰é—®é¢˜ï¼ŒXIAO ESP32C6 ä¼šé‡å¯å¹¶å¯åŠ¨ Zigbee ç¯å…‰åº”ç”¨ç¨‹åºã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬5æ­¥çƒ§å½•-ha_on_off_switch-ç¨‹åº">ç¬¬5æ­¥ï¼šçƒ§å½• HA_on_off_switch ç¨‹åº<a href="#ç¬¬5æ­¥çƒ§å½•-ha_on_off_switch-ç¨‹åº" class="hash-link" aria-label="Direct link to ç¬¬5æ­¥ï¼šçƒ§å½• HA_on_off_switch ç¨‹åº" title="Direct link to ç¬¬5æ­¥ï¼šçƒ§å½• HA_on_off_switch ç¨‹åº">â€‹</a></h3><p>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å–å‡ºå¦ä¸€ä¸ª XIAO ESP32C6ï¼Œå¹¶ä¸ºå…¶ä¸Šä¼ å¼€å…³ç¨‹åºã€‚æ­¥éª¤ç±»ä¼¼ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ../HA_on_off_switch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">idf.py set-target esp32c6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">idf.py build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">idf.py -p PORT flash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ¥ä¸‹æ¥æ‚¨å¯ä»¥ä½¿ç”¨ SWITCH ç¨‹åºçš„ XIAO ä¸Šçš„ <strong>BOOT</strong> æŒ‰é’®æ¥æ§åˆ¶ LIGHT ç¨‹åºçš„ XIAO ä¸Šçš„ LED ç¯å¼€å…³ã€‚</p><div class="table-center"><iframe width="800" height="350" src="https://files.seeedstudio.com/wiki/xiaoc6_zigbee/2.mp4?autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ha_on_off_light-å’Œ-ha_on_off_switch-ç¨‹åºç»“æ„">HA_on_off_light å’Œ HA_on_off_switch ç¨‹åºç»“æ„<a href="#ha_on_off_light-å’Œ-ha_on_off_switch-ç¨‹åºç»“æ„" class="hash-link" aria-label="Direct link to HA_on_off_light å’Œ HA_on_off_switch ç¨‹åºç»“æ„" title="Direct link to HA_on_off_light å’Œ HA_on_off_switch ç¨‹åºç»“æ„">â€‹</a></h2><p>è¯¥æ–‡ä»¶å¤¹åŒ…å«æ¼”ç¤º Zigbee HA æ ‡å‡†è®¾å¤‡çš„ç¤ºä¾‹</p><ul><li><p><code>HA_on_off_light</code> æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ HA å¼€å…³ç¯æ³¡ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº† Zigbee ç»ˆç«¯è®¾å¤‡ã€‚</p></li><li><p><code>HA_on_off_switch</code> æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ HA å¼€å…³å¼€å…³ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº† Zigbee åè°ƒå™¨è§’è‰²ã€‚å®ƒæä¾›ä¸€ä¸ªå¼€å…³ï¼Œç”¨äºæ§åˆ¶ Zigbee HA å¼€å…³ç¯ã€‚</p></li></ul><p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥åˆ†æ ESP Zigbee SDK æä¾›çš„ä¸¤ä¸ªç¤ºä¾‹ç¨‹åºï¼š<code>HA_on_off_light</code> å’Œ <code>HA_on_off_switch</code>ã€‚é€šè¿‡åˆ†æè¿™äº›ç¤ºä¾‹çš„ä»£ç ç»“æ„å’Œç»„ç»‡æ–¹å¼ï¼Œæˆ‘ä»¬å°†å…¨é¢ç†è§£å¦‚ä½•å¼€å‘ Zigbee è®¾å¤‡åº”ç”¨ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">- esp_zigbee_HA_sample/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - HA_on_off_light/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - main/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - CMakeLists.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - esp_zb_light.c</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - esp_zb_light.h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - idf_component.yml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - CMakeLists.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - partitions.csv</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - sdkconfig.defaults</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    - HA_on_off_switch/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - main/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - CMakeLists.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - esp_zb_switch.c</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - esp_zb_switch.h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - idf_component.yml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - CMakeLists.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - partitions.csv</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - sdkconfig.defaults</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><p>esp_zigbee_HA_sample/: è¯¥ç›®å½•åŒ…å« ESP Zigbee SDK æä¾›çš„å®¶åº­è‡ªåŠ¨åŒ– (HA) ç¤ºä¾‹é¡¹ç›®ã€‚</p></li><li><p>HA_on_off_light/: è¯¥å­ç›®å½•è¡¨ç¤ºâ€œå¼€/å…³ç¯â€ç¤ºä¾‹é¡¹ç›®ã€‚</p><ul><li>main/: è¯¥ç›®å½•åŒ…å«â€œå¼€/å…³ç¯â€ç¤ºä¾‹çš„ä¸»è¦æºä»£ç æ–‡ä»¶ã€‚<ul><li>CMakeLists.txt: è¯¥æ–‡ä»¶ç”± CMake æ„å»ºç³»ç»Ÿä½¿ç”¨ï¼Œç”¨äºæŒ‡å®šâ€œå¼€/å…³ç¯â€ç¤ºä¾‹çš„æºä»£ç æ–‡ä»¶å’Œä¾èµ–é¡¹ã€‚</li><li>esp_zb_light.c: è¯¥æ–‡ä»¶åŒ…å« Zigbee ç¯è®¾å¤‡çš„ä¸»è¦å®ç°ä»£ç ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–ã€äº‹ä»¶å¤„ç†å’Œä¸å…¶ä»– Zigbee è®¾å¤‡çš„é€šä¿¡ã€‚</li><li>esp_zb_light.h: è¯¥å¤´æ–‡ä»¶åŒ…å« Zigbee ç¯è®¾å¤‡æ‰€éœ€çš„å‡½æ•°å£°æ˜ã€å¸¸é‡å’Œæ•°æ®ç»“æ„ã€‚</li><li>idf_component.yml: è¯¥æ–‡ä»¶æ˜¯ ESP-IDF ç»„ä»¶é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šäº†â€œå¼€/å…³ç¯â€ç¤ºä¾‹çš„ç»„ä»¶ä¾èµ–å’Œæ„å»ºè®¾ç½®ã€‚</li></ul></li><li>CMakeLists.txt: è¯¥æ–‡ä»¶æ˜¯â€œå¼€/å…³ç¯â€ç¤ºä¾‹é¡¹ç›®çš„é¡¶çº§ CMakeLists æ–‡ä»¶ï¼ŒåŒ…å«äº†å¿…è¦çš„é…ç½®å’Œæ„å»ºç›®æ ‡ã€‚</li><li>partitions.csv: è¯¥æ–‡ä»¶å®šä¹‰äº†â€œå¼€/å…³ç¯â€ç¤ºä¾‹çš„åˆ†åŒºè¡¨ï¼ŒæŒ‡å®šäº†å„ä¸ªåˆ†åŒºï¼ˆå¦‚å¼•å¯¼åŠ è½½ç¨‹åºã€åº”ç”¨ç¨‹åºå’Œå­˜å‚¨ï¼‰çš„å†…å­˜å¸ƒå±€å’Œå¤§å°ã€‚</li><li>sdkconfig.defaults: è¯¥æ–‡ä»¶åŒ…å«â€œå¼€/å…³ç¯â€ç¤ºä¾‹é¡¹ç›®çš„é»˜è®¤é…ç½®è®¾ç½®ï¼Œç”¨æˆ·å¯ä»¥è¦†ç›–è¿™äº›è®¾ç½®ã€‚</li></ul></li><li><p>HA_on_off_switch/: è¯¥å­ç›®å½•è¡¨ç¤ºâ€œå¼€/å…³å¼€å…³â€ç¤ºä¾‹é¡¹ç›®ã€‚</p><ul><li>main/: è¯¥ç›®å½•åŒ…å«â€œå¼€/å…³å¼€å…³â€ç¤ºä¾‹çš„ä¸»è¦æºä»£ç æ–‡ä»¶ã€‚<ul><li>CMakeLists.txt: ç±»ä¼¼äºâ€œå¼€/å…³ç¯â€ç¤ºä¾‹ï¼Œè¯¥æ–‡ä»¶ç”± CMake æ„å»ºç³»ç»Ÿä½¿ç”¨ï¼Œç”¨äºæŒ‡å®šâ€œå¼€/å…³å¼€å…³â€ç¤ºä¾‹çš„æºä»£ç æ–‡ä»¶å’Œä¾èµ–é¡¹ã€‚</li><li>esp_zb_switch.c: è¯¥æ–‡ä»¶åŒ…å« Zigbee å¼€å…³è®¾å¤‡çš„ä¸»è¦å®ç°ä»£ç ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–ã€äº‹ä»¶å¤„ç†å’Œä¸å…¶ä»– Zigbee è®¾å¤‡çš„é€šä¿¡ã€‚</li><li>esp_zb_switch.h: è¯¥å¤´æ–‡ä»¶åŒ…å« Zigbee å¼€å…³è®¾å¤‡æ‰€éœ€çš„å‡½æ•°å£°æ˜ã€å¸¸é‡å’Œæ•°æ®ç»“æ„ã€‚</li><li>idf_component.yml: è¯¥æ–‡ä»¶æ˜¯â€œå¼€/å…³å¼€å…³â€ç¤ºä¾‹çš„ ESP-IDF ç»„ä»¶é…ç½®æ–‡ä»¶ã€‚</li></ul></li><li>CMakeLists.txt: è¿™æ˜¯â€œå¼€/å…³å¼€å…³â€ç¤ºä¾‹é¡¹ç›®çš„é¡¶çº§ CMakeLists æ–‡ä»¶ã€‚</li><li>partitions.csv: è¯¥æ–‡ä»¶å®šä¹‰äº†â€œå¼€/å…³å¼€å…³â€ç¤ºä¾‹çš„åˆ†åŒºè¡¨ã€‚</li><li>sdkconfig.defaults: è¯¥æ–‡ä»¶åŒ…å«â€œå¼€/å…³å¼€å…³â€ç¤ºä¾‹é¡¹ç›®çš„é»˜è®¤é…ç½®è®¾ç½®ã€‚</li></ul></li></ol><p>è¿™äº›æ–‡ä»¶ååŒå·¥ä½œï¼Œæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ Zigbee è®¾å¤‡ç¤ºä¾‹å®ç°ï¼Œä½¿ç”¨ ESP Zigbee SDKã€‚<code>.c</code> å’Œ <code>.h</code> æ–‡ä»¶åŒ…å«å®é™…çš„ä»£ç å®ç°ï¼Œè€Œ CMakeLists.txtã€partitions.csv å’Œ sdkconfig.defaults æ–‡ä»¶åˆ™ç”¨äºæ„å»ºé…ç½®å’Œå†…å­˜åˆ†åŒºã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="zigbee-ç»ˆç«¯è®¾å¤‡å’Œ-zigbee-æ•°æ®æ¨¡å‹">Zigbee ç»ˆç«¯è®¾å¤‡å’Œ Zigbee æ•°æ®æ¨¡å‹<a href="#zigbee-ç»ˆç«¯è®¾å¤‡å’Œ-zigbee-æ•°æ®æ¨¡å‹" class="hash-link" aria-label="Direct link to Zigbee ç»ˆç«¯è®¾å¤‡å’Œ Zigbee æ•°æ®æ¨¡å‹" title="Direct link to Zigbee ç»ˆç«¯è®¾å¤‡å’Œ Zigbee æ•°æ®æ¨¡å‹">â€‹</a></h2><p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ Zigbee HA å¼€/å…³ç¯ç¤ºä¾‹ä»£ç å¦‚ä½•åŸºäº Zigbee æ•°æ®æ¨¡å‹è¿›è¡Œç»“æ„åŒ–ã€‚é€šè¿‡ç†è§£ä»£ç å’Œæ•°æ®æ¨¡å‹ä¹‹é—´çš„å…³ç³»ï¼Œæ‚¨å°†æ·±å…¥äº†è§£å¦‚ä½•æ ¹æ®ç‰¹å®šè¦æ±‚è§£é‡Šå’Œä¿®æ”¹ä»£ç ã€‚</p><p>åœ¨æ·±å…¥åˆ†æä»£ç ä¹‹å‰ï¼Œé¦–å…ˆè¦æŒæ¡ Zigbee æ•°æ®æ¨¡å‹çš„å…³é”®æ¦‚å¿µï¼š</p><ul><li><p><strong>èŠ‚ç‚¹ (Node)</strong>ï¼šä¸€ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå•ç‹¬çš„åŸºäº ESP32-H2 çš„äº§å“å’Œ Zigbee ç½‘ç»œä¸­çš„ä¸€ä¸ªç½‘ç»œèŠ‚ç‚¹ã€‚ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªç«¯ç‚¹ã€‚</p></li><li><p><strong>ç«¯ç‚¹ (Endpoint)</strong>ï¼šä¸€ä¸ªç«¯ç‚¹ç”± 1 åˆ° 240 ä¹‹é—´çš„ä¸€ä¸ªæ•°å­—æ ‡è¯†ï¼Œå®šä¹‰äº†ä¸€ä¸ªåœ¨ Zigbee èŠ‚ç‚¹ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªç«¯ç‚¹ï¼Œæ¯ä¸ªç«¯ç‚¹æœåŠ¡äºä¸åŒçš„ç›®çš„æˆ–ä»£è¡¨ä¸€ä¸ªç‹¬ç«‹çš„è®¾å¤‡ã€‚</p></li><li><p><strong>é›†ç¾¤ (Cluster)</strong>ï¼šä¸€ä¸ªé›†ç¾¤ç”±ä¸€ä¸ª 16 ä½æ•°å­—æ ‡è¯†ï¼Œæ˜¯ä¸€ä¸ªåº”ç”¨å¯¹è±¡ï¼Œå®šä¹‰äº†ä¸ç«¯ç‚¹ç›¸å…³çš„åŠŸèƒ½å’Œæ•°æ®ã€‚é›†ç¾¤åŒ…å«å±æ€§å’Œå‘½ä»¤ã€‚</p></li><li><p><strong>å±æ€§ (Attribute)</strong>ï¼šä¸€ä¸ªå±æ€§ç”±ä¸€ä¸ª 16 ä½æ•°å­—æ ‡è¯†ï¼Œè¡¨ç¤ºé›†ç¾¤å†…çš„å½“å‰çŠ¶æ€æˆ–ç‰©ç†é‡ã€‚</p></li></ul><div style="text-align:center"><img loading="lazy" src="https://files.seeedstudio.com/wiki/xiaoc6_zigbee/datamodel.png" style="width:800px;height:auto" class="img_ev3q"></div><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ HA å¼€/å…³ç¯ç¤ºä¾‹ä»£ç ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•æ˜ å°„åˆ° Zigbee æ•°æ®æ¨¡å‹çš„ã€‚</p><ol><li>åˆ›å»ºç«¯ç‚¹</li></ol><p>åœ¨ç¤ºä¾‹ä»£ç ä¸­ï¼Œ<code>esp_zb_on_off_light_ep_create()</code> å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ª HA å¼€/å…³ç¯ç«¯ç‚¹ã€‚è¯¥å‡½æ•°å®šä¹‰äº†ç«¯ç‚¹ IDã€è®¾å¤‡ ID å’Œç›¸å…³çš„é›†ç¾¤ã€‚</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_task</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">pvParameters</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/* åˆå§‹åŒ– Zigbee å †æ ˆ */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_cfg_t zb_nwk_cfg </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ZB_ZED_CONFIG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">&amp;</span><span class="token plain">zb_nwk_cfg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_on_off_light_cfg_t light_cfg </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ZB_DEFAULT_ON_OFF_LIGHT_CONFIG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_ep_list_t </span><span class="token operator">*</span><span class="token plain">esp_zb_on_off_light_ep </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_on_off_light_ep_create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">HA_ESP_LIGHT_ENDPOINT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">light_cfg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_device_register</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_on_off_light_ep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_core_action_handler_register</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">zb_action_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_set_primary_network_channel_set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ESP_ZB_PRIMARY_CHANNEL_MASK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_main_loop_iteration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>æ³¨å†Œè®¾å¤‡</li></ol><p>åœ¨åˆ›å»ºç«¯ç‚¹åï¼Œè°ƒç”¨ <code>esp_zb_device_register()</code> å‡½æ•°å°† Zigbee è®¾å¤‡ä¸åˆ›å»ºçš„ç«¯ç‚¹æ³¨å†Œã€‚</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_device_register</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_on_off_light_ep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>å±æ€§å›è°ƒ</li></ol><p>ç¤ºä¾‹ä»£ç ä½¿ç”¨ <code>esp_zb_core_action_handler_register()</code> æ³¨å†Œä¸€ä¸ªå±æ€§å˜åŒ–å›è°ƒã€‚è¯¥å›è°ƒåœ¨æŸäº›å±æ€§è¢«ä¿®æ”¹æ—¶è§¦å‘ï¼Œå…è®¸æ‚¨æ ¹æ®åº”ç”¨ç¨‹åºé€»è¾‘å¤„ç†å±æ€§å˜åŒ–ã€‚</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_core_action_handler_register</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">zb_action_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ <code>zb_action_handler</code> å‡½æ•°ä¸­ï¼Œæ‚¨å¯ä»¥å®ç°æ‰€éœ€çš„è¡Œä¸ºï¼Œä¾‹å¦‚ï¼Œå½“å¼€/å…³å±æ€§å˜åŒ–æ—¶æ§åˆ¶ LED ç¯ã€‚</p><ol start="4"><li>Zigbee å †æ ˆé…ç½®ä¸å¯åŠ¨</li></ol><p>ç¤ºä¾‹ä»£ç ä½¿ç”¨ <code>ESP_ZB_ZED_CONFIG()</code> é…ç½® Zigbee ç»ˆç«¯è®¾å¤‡ï¼Œå¹¶ä½¿ç”¨ <code>esp_zb_init()</code> åˆå§‹åŒ– Zigbee å †æ ˆã€‚ç„¶åï¼Œå †æ ˆé€šè¿‡ <code>esp_zb_start()</code> å¯åŠ¨ï¼Œå¹¶ç”± <code>esp_zb_main_loop_iteration()</code> å¤„ç†ä¸»å¾ªç¯ã€‚</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">esp_zb_cfg_t zb_nwk_cfg </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ZB_ZED_CONFIG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">&amp;</span><span class="token plain">zb_nwk_cfg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_main_loop_iteration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>esp_zb_app_signal_handler</code> å‡½æ•°è´Ÿè´£å¤„ç†æ¥è‡ª Zigbee åº”ç”¨å±‚çš„å„ç§ä¿¡å·ã€‚</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_app_signal_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_app_signal_t </span><span class="token operator">*</span><span class="token plain">signal_struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">p_sg_p       </span><span class="token operator">=</span><span class="token plain"> signal_struct</span><span class="token operator">-&gt;</span><span class="token plain">p_app_signal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_err_t err_status </span><span class="token operator">=</span><span class="token plain"> signal_struct</span><span class="token operator">-&gt;</span><span class="token plain">esp_err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_app_signal_type_t sig_type </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">p_sg_p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sig_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_ZDO_SIGNAL_SKIP_STARTUP</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;åˆå§‹åŒ– Zigbee å †æ ˆ&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_start_top_level_commissioning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ESP_ZB_BDB_MODE_INITIALIZATION</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_DEVICE_FIRST_START</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_DEVICE_REBOOT</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å»¶è¿Ÿé©±åŠ¨åˆå§‹åŒ– %s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">deferred_driver_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å¤±è´¥&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;æˆåŠŸ&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;è®¾å¤‡ä»¥ %s å‡ºå‚é‡ç½®æ¨¡å¼å¯åŠ¨&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_is_factory_new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;é&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_is_factory_new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å¯åŠ¨ç½‘ç»œå¼•å¯¼&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_start_top_level_commissioning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ESP_ZB_BDB_MODE_NETWORK_STEERING</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;è®¾å¤‡å·²é‡å¯&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">/* é…ç½®å¤±è´¥ */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGW</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Zigbee å †æ ˆåˆå§‹åŒ–å¤±è´¥ (çŠ¶æ€: %s)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_err_to_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_STEERING</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            esp_zb_ieee_addr_t extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;æˆåŠŸåŠ å…¥ç½‘ç»œ (æ‰©å±• PAN ID: %02x:%02x:%02x:%02x:%02x:%02x:%02x:%02x, PAN ID: 0x%04hx, é€šé“: %d, çŸ­åœ°å€: 0x%04hx)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_current_channel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_short_address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ç½‘ç»œå¼•å¯¼å¤±è´¥ (çŠ¶æ€: %s)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_err_to_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_scheduler_alarm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_callback_t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">bdb_start_top_level_commissioning_cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ESP_ZB_BDB_MODE_NETWORK_STEERING</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ZDO ä¿¡å·: %s (0x%x), çŠ¶æ€: %s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_zdo_signal_to_string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sig_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> sig_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                 </span><span class="token function" style="color:rgb(80, 250, 123)">esp_err_to_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><p>é¦–å…ˆï¼Œå‡½æ•°ä»ä¼ å…¥çš„ <code>esp_zb_app_signal_t</code> ç»“æ„ä½“ä¸­è·å–ä¿¡å·ç±»å‹ <code>sig_type</code> å’Œé”™è¯¯çŠ¶æ€ <code>err_status</code>ã€‚</p></li><li><p>ç„¶åï¼Œå®ƒä½¿ç”¨ <code>switch</code> è¯­å¥æ ¹æ®ä¿¡å·ç±»å‹æ‰§è¡Œä¸åŒçš„æ“ä½œï¼š</p><ul><li><p><code>ESP_ZB_ZDO_SIGNAL_SKIP_STARTUP</code>ï¼šæ­¤ä¿¡å·è¡¨ç¤ºè·³è¿‡Zigbeeæ ˆçš„å¯åŠ¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆå§‹åŒ–Zigbeeæ ˆï¼Œç„¶åè°ƒç”¨ <code>esp_zb_bdb_start_top_level_commissioning</code> å‡½æ•°ä»¥ <code>ESP_ZB_BDB_MODE_INITIALIZATION</code> æ¨¡å¼å¯åŠ¨é¡¶å±‚è°ƒè¯•è¿‡ç¨‹ã€‚</p></li><li><p><code>ESP_ZB_BDB_SIGNAL_DEVICE_FIRST_START</code> å’Œ <code>ESP_ZB_BDB_SIGNAL_DEVICE_REBOOT</code>ï¼šè¿™äº›ä¿¡å·è¡¨ç¤ºè®¾å¤‡çš„é¦–æ¬¡å¯åŠ¨æˆ–é‡å¯ã€‚å¦‚æœé”™è¯¯çŠ¶æ€ä¸º <code>ESP_OK</code>ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€äº›åˆå§‹åŒ–ä»»åŠ¡ï¼Œå¦‚å»¶è¿Ÿé©±åŠ¨ç¨‹åºåˆå§‹åŒ–ã€‚ç„¶åï¼Œæˆ‘ä»¬æ£€æŸ¥è®¾å¤‡æ˜¯å¦å¤„äºå…¨æ–°çŠ¶æ€ã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬å¼€å§‹ç½‘ç»œå¼•å¯¼è¿‡ç¨‹ï¼›å¦åˆ™ï¼Œæˆ‘ä»¬è¾“å‡ºè®¾å¤‡å·²é‡å¯çš„æ¶ˆæ¯ã€‚å¦‚æœé”™è¯¯çŠ¶æ€ä¸æ˜¯ <code>ESP_OK</code>ï¼Œæˆ‘ä»¬è¾“å‡ºZigbeeæ ˆåˆå§‹åŒ–å¤±è´¥çš„æ¶ˆæ¯ã€‚</p></li><li><p><code>ESP_ZB_BDB_SIGNAL_STEERING</code>ï¼šæ­¤ä¿¡å·è¡¨ç¤ºç½‘ç»œå¼•å¯¼è¿‡ç¨‹çš„ç»“æœã€‚å¦‚æœé”™è¯¯çŠ¶æ€ä¸º <code>ESP_OK</code>ï¼Œåˆ™è¡¨ç¤ºè®¾å¤‡æˆåŠŸåŠ å…¥ç½‘ç»œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¾“å‡ºä¸€äº›ç½‘ç»œä¿¡æ¯ï¼Œå¦‚PAN IDã€é¢‘é“å·å’ŒçŸ­åœ°å€ã€‚å¦‚æœé”™è¯¯çŠ¶æ€ä¸æ˜¯ <code>ESP_OK</code>ï¼Œåˆ™è¡¨ç¤ºç½‘ç»œå¼•å¯¼å¤±è´¥ï¼Œæˆ‘ä»¬è¾“å‡ºé”™è¯¯æ¶ˆæ¯ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>esp_zb_scheduler_alarm</code> å‡½æ•°è®¾ç½®å®šæ—¶å™¨ï¼Œåœ¨1ç§’åé‡æ–°å¯åŠ¨ç½‘ç»œå¼•å¯¼è¿‡ç¨‹ã€‚</p></li><li><p>å…¶ä»–ä¿¡å·ï¼šæˆ‘ä»¬ä»…è¾“å‡ºä¿¡å·åç§°ã€ç±»å‹å’Œé”™è¯¯çŠ¶æ€ã€‚</p></li></ul></li></ol><p>è¯¥å‡½æ•°çš„ç›®çš„æ˜¯æ ¹æ®ä¸åŒçš„Zigbeeåº”ç”¨å±‚ä¿¡å·æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚å®ƒæ˜¯Zigbeeåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒéƒ¨åˆ†ä¹‹ä¸€ï¼Œå¤„ç†è®¾å¤‡å¯åŠ¨ã€åˆå§‹åŒ–å’Œç½‘ç»œåŠ å…¥ç­‰å…³é”®è¿‡ç¨‹ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="zigbeeåè°ƒå™¨">Zigbeeåè°ƒå™¨<a href="#zigbeeåè°ƒå™¨" class="hash-link" aria-label="Direct link to Zigbeeåè°ƒå™¨" title="Direct link to Zigbeeåè°ƒå™¨">â€‹</a></h2><p>å¯¹äºZigbeeåè°ƒå™¨è®¾å¤‡ï¼Œå…¶åˆå§‹åŒ–å’ŒRTOSä»»åŠ¡ä¸ç»ˆç«¯è®¾å¤‡ç±»ä¼¼ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯åœ¨RTOSä»»åŠ¡ä¸­ï¼Œæ³¨å†Œå›è°ƒå‡½æ•°çš„æ­¥éª¤è¾ƒå°‘ã€‚</p><p>å› æ­¤ï¼Œå¯¹äºZigbeeåè°ƒå™¨ï¼Œæœ€å…³é”®çš„éƒ¨åˆ†æ˜¯æœç´¢å¹¶åŒ¹é…ç›¸åº”çš„è®¾å¤‡ï¼Œå¹¶å‘è®¾å¤‡å‘å‡ºæ§åˆ¶å‘½ä»¤ã€‚</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_app_signal_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_app_signal_t </span><span class="token operator">*</span><span class="token plain">signal_struct</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">p_sg_p       </span><span class="token operator">=</span><span class="token plain"> signal_struct</span><span class="token operator">-&gt;</span><span class="token plain">p_app_signal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_err_t err_status </span><span class="token operator">=</span><span class="token plain"> signal_struct</span><span class="token operator">-&gt;</span><span class="token plain">esp_err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_app_signal_type_t sig_type </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">p_sg_p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_zb_zdo_signal_device_annce_params_t </span><span class="token operator">*</span><span class="token plain">dev_annce_params </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sig_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_ZDO_SIGNAL_SKIP_STARTUP</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;åˆå§‹åŒ–Zigbeeæ ˆ&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_start_top_level_commissioning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ESP_ZB_BDB_MODE_INITIALIZATION</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_DEVICE_FIRST_START</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_DEVICE_REBOOT</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å»¶è¿Ÿé©±åŠ¨åˆå§‹åŒ– %s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">deferred_driver_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å¤±è´¥&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;æˆåŠŸ&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;è®¾å¤‡ä»¥%så‡ºå‚é‡ç½®æ¨¡å¼å¯åŠ¨&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_is_factory_new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;é&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_is_factory_new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;å¼€å§‹ç½‘ç»œç»„å»º&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_start_top_level_commissioning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ESP_ZB_BDB_MODE_NETWORK_FORMATION</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;è®¾å¤‡å·²é‡å¯&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Zigbeeæ ˆåˆå§‹åŒ–å¤±è´¥ (çŠ¶æ€: %s)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_err_to_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_FORMATION</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            esp_zb_ieee_addr_t extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ç½‘ç»œæˆåŠŸç»„å»º (æ‰©å±•PAN ID: %02x:%02x:%02x:%02x:%02x:%02x:%02x:%02x, PAN ID: 0x%04hx, é¢‘é“: %d, çŸ­åœ°å€: 0x%04hx)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extended_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_current_channel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_short_address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_bdb_start_top_level_commissioning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ESP_ZB_BDB_MODE_NETWORK_STEERING</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;é‡æ–°å¯åŠ¨ç½‘ç»œç»„å»º (çŠ¶æ€: %s)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_err_to_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_scheduler_alarm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_callback_t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">bdb_start_top_level_commissioning_cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ESP_ZB_BDB_MODE_NETWORK_FORMATION</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_BDB_SIGNAL_STEERING</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ç½‘ç»œå¼•å¯¼å·²å¯åŠ¨&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_ZDO_SIGNAL_DEVICE_ANNCE</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        dev_annce_params </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">esp_zb_zdo_signal_device_annce_params_t </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_app_signal_get_params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p_sg_p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;æ–°è®¾å¤‡å·²å§”æ‰˜æˆ–é‡æ–°åŠ å…¥ (çŸ­åœ°å€: 0x%04hx)&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> dev_annce_params</span><span class="token operator">-&gt;</span><span class="token plain">device_short_addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        esp_zb_zdo_match_desc_req_param_t  cmd_req</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cmd_req</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">dst_nwk_addr </span><span class="token operator">=</span><span class="token plain"> dev_annce_params</span><span class="token operator">-&gt;</span><span class="token plain">device_short_addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cmd_req</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">addr_of_interest </span><span class="token operator">=</span><span class="token plain"> dev_annce_params</span><span class="token operator">-&gt;</span><span class="token plain">device_short_addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">/* åœ¨è®¾å¤‡åŠ å…¥ç½‘ç»œåå¯»æ‰¾å¯è°ƒå…‰çš„å½©è‰²ç¯ */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_zdo_find_color_dimmable_light</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">&amp;</span><span class="token plain">cmd_req</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> user_find_cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> ESP_ZB_NWK_SIGNAL_PERMIT_JOIN_STATUS</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_app_signal_get_params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p_sg_p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ç½‘ç»œ(0x%04hx)å¼€æ”¾ %d ç§’&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_app_signal_get_params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p_sg_p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGW</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ç½‘ç»œ(0x%04hx)å·²å…³é—­ï¼Œä¸å…è®¸è®¾å¤‡åŠ å…¥&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_get_pan_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ZDOä¿¡å·: %s (0x%x), çŠ¶æ€: %s&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_zb_zdo_signal_to_string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">sig_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> sig_type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                 </span><span class="token function" style="color:rgb(80, 250, 123)">esp_err_to_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err_status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è®©æˆ‘ä»¬é€ä¸€åˆ†æä¸åŒçš„ä¿¡å·ç±»å‹åŠå…¶åŠŸèƒ½ï¼š</p><ol><li><p><code>ESP_ZB_ZDO_SIGNAL_SKIP_STARTUP</code>:</p><ul><li>è¯¥ä¿¡å·è¡¨ç¤ºåº”è·³è¿‡Zigbeeæ ˆçš„åˆå§‹åŒ–ã€‚</li><li>å®ƒè®°å½•ä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨ç¤ºæ­£åœ¨åˆå§‹åŒ–Zigbeeæ ˆã€‚</li><li>å®ƒä»¥ <code>ESP_ZB_BDB_MODE_INITIALIZATION</code> æ¨¡å¼å¯åŠ¨é¡¶å±‚è°ƒè¯•è¿‡ç¨‹ã€‚</li></ul></li><li><p><code>ESP_ZB_BDB_SIGNAL_DEVICE_FIRST_START</code> å’Œ <code>ESP_ZB_BDB_SIGNAL_DEVICE_REBOOT</code>:</p><ul><li>è¿™äº›ä¿¡å·è¡¨ç¤ºè®¾å¤‡é¦–æ¬¡å¯åŠ¨æˆ–å·²é‡å¯ã€‚</li><li>å¦‚æœé”™è¯¯çŠ¶æ€ä¸º <code>ESP_OK</code>ï¼Œå®ƒä¼šè®°å½•å…³äºå»¶è¿Ÿé©±åŠ¨åˆå§‹åŒ–çŠ¶æ€çš„æ¶ˆæ¯ï¼Œå¹¶æŒ‡ç¤ºè®¾å¤‡æ˜¯å¦ä»¥å‡ºå‚é‡ç½®æ¨¡å¼å¯åŠ¨ã€‚</li><li>å¦‚æœè®¾å¤‡å¤„äºå‡ºå‚æ–°æ¨¡å¼ï¼Œå®ƒä¼šé€šè¿‡è°ƒç”¨ <code>esp_zb_bdb_start_top_level_commissioning</code> ä»¥ <code>ESP_ZB_BDB_MODE_NETWORK_FORMATION</code> æ¨¡å¼å¼€å§‹ç½‘ç»œç»„å»ºè¿‡ç¨‹ã€‚</li><li>å¦‚æœè®¾å¤‡ä¸åœ¨å‡ºå‚æ–°æ¨¡å¼ä¸‹ï¼Œå®ƒä¼šè®°å½•ä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨ç¤ºè®¾å¤‡å·²é‡å¯ã€‚</li><li>å¦‚æœé”™è¯¯çŠ¶æ€ä¸æ˜¯ <code>ESP_OK</code>ï¼Œå®ƒä¼šè®°å½•ä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€‚</li></ul></li><li><p><code>ESP_ZB_BDB_SIGNAL_FORMATION</code>:</p><ul><li>è¯¥ä¿¡å·è¡¨ç¤ºç½‘ç»œç»„å»ºè¿‡ç¨‹çš„çŠ¶æ€ã€‚</li><li>å¦‚æœé”™è¯¯çŠ¶æ€ä¸º <code>ESP_OK</code>ï¼Œå®ƒä¼šè·å–æ‰©å±•çš„PAN IDï¼Œè®°å½•å·²ç»„å»ºç½‘ç»œçš„ä¿¡æ¯ï¼ˆPAN IDã€é¢‘é“ã€çŸ­åœ°å€ï¼‰ï¼Œå¹¶é€šè¿‡è°ƒç”¨ <code>esp_zb_bdb_start_top_level_commissioning</code> ä»¥ <code>ESP_ZB_BDB_MODE_NETWORK_STEERING</code> æ¨¡å¼å¼€å§‹ç½‘ç»œå¼•å¯¼è¿‡ç¨‹ã€‚</li><li>å¦‚æœé”™è¯¯çŠ¶æ€ä¸æ˜¯ <code>ESP_OK</code>ï¼Œå®ƒä¼šè®°å½•é‡æ–°å¯åŠ¨ç½‘ç»œç»„å»ºçš„æ¶ˆæ¯ï¼Œå¹¶å®‰æ’ä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨1000æ¯«ç§’åè°ƒç”¨ <code>bdb_start_top_level_commissioning_cb</code>ã€‚</li></ul></li><li><p><code>ESP_ZB_BDB_SIGNAL_STEERING</code>:</p><ul><li>è¯¥ä¿¡å·è¡¨ç¤ºç½‘ç»œå¼•å¯¼è¿‡ç¨‹çš„çŠ¶æ€ã€‚</li><li>å¦‚æœé”™è¯¯çŠ¶æ€ä¸º <code>ESP_OK</code>ï¼Œå®ƒä¼šè®°å½•ä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨ç¤ºç½‘ç»œå¼•å¯¼å·²å¼€å§‹ã€‚</li></ul></li><li><p><code>ESP_ZB_ZDO_SIGNAL_DEVICE_ANNCE</code>:</p><ul><li>è¯¥ä¿¡å·åœ¨æ–°è®¾å¤‡è¢«å§”æ‰˜æˆ–é‡æ–°åŠ å…¥ç½‘ç»œæ—¶è§¦å‘ã€‚</li><li>å®ƒè·å–è®¾å¤‡å…¬å‘Šå‚æ•°ï¼Œå¹¶è®°å½•æ–°è®¾å¤‡çš„çŸ­åœ°å€ã€‚</li><li>å®ƒå‡†å¤‡ä¸€ä¸ªåŒ¹é…æè¿°ç¬¦è¯·æ±‚ï¼ˆ<code>esp_zb_zdo_match_desc_req_param_t</code>ï¼‰ï¼Œç›®æ ‡åœ°å€å’Œæ„Ÿå…´è¶£çš„åœ°å€éƒ½è®¾ç½®ä¸ºæ–°è®¾å¤‡çš„çŸ­åœ°å€ã€‚</li><li>å®ƒè°ƒç”¨ <code>esp_zb_zdo_find_color_dimmable_light</code> æ¥æŸ¥æ‰¾å¯è°ƒå…‰çš„å½©è‰²ç¯è®¾å¤‡ï¼Œå¹¶æŒ‡å®š <code>user_find_cb</code> ä½œä¸ºå›è°ƒå‡½æ•°ã€‚</li></ul></li><li><p><code>ESP_ZB_NWK_SIGNAL_PERMIT_JOIN_STATUS</code>:</p><ul><li>è¯¥ä¿¡å·è¡¨ç¤ºç½‘ç»œçš„å…è®¸åŠ å…¥çŠ¶æ€ã€‚</li><li>å¦‚æœé”™è¯¯çŠ¶æ€ä¸º <code>ESP_OK</code>ï¼Œå®ƒä¼šè®°å½•ä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨ç¤ºç½‘ç»œæ˜¯å¦å¼€æ”¾åŠ å…¥ä»¥åŠå¼€æ”¾çš„æŒç»­æ—¶é—´ã€‚å¦‚æœç½‘ç»œå…³é—­ï¼Œå®ƒä¼šè®°å½•ä¸€æ¡è­¦å‘Šæ¶ˆæ¯ã€‚</li></ul></li><li><p>é»˜è®¤æƒ…å†µ:</p><ul><li>å¯¹äºä»»ä½•å…¶ä»–ä¿¡å·ç±»å‹ï¼Œå®ƒä¼šè®°å½•ä¸€æ¡åŒ…å«ä¿¡å·ç±»å‹å’Œé”™è¯¯çŠ¶æ€çš„é€šç”¨æ¶ˆæ¯ã€‚</li></ul></li></ol><p>æ€»ä½“æ¥è¯´ï¼Œè¿™æ®µä»£ç å¤„ç†äº†å„ç§Zigbeeç›¸å…³çš„äº‹ä»¶ï¼Œå¹¶æ‰§è¡Œäº†è¯¸å¦‚åˆå§‹åŒ–Zigbeeæ ˆã€ç»„å»ºç½‘ç»œã€å¼•å¯¼ç½‘ç»œã€å¤„ç†è®¾å¤‡å…¬å‘Šä»¥åŠæŸ¥æ‰¾å¯è°ƒå…‰çš„å½©è‰²ç¯è®¾å¤‡ç­‰æ“ä½œã€‚</p><p>å‰©ä¸‹çš„ç¤ºä¾‹ä»£ç å¤„ç†äº†æŒ‰é”®ç¨³å®šåŒ–å’ŒæŒ‰é”®ä¸­æ–­çš„é€»è¾‘ã€‚å¦‚æœæ‚¨æ„Ÿå…´è¶£ï¼Œå¯ä»¥è‡ªè¡Œé˜…è¯»å¹¶ç†è§£å®ƒã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ•…éšœæ’é™¤">æ•…éšœæ’é™¤<a href="#æ•…éšœæ’é™¤" class="hash-link" aria-label="Direct link to æ•…éšœæ’é™¤" title="Direct link to æ•…éšœæ’é™¤">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="q1-å¯ä»¥åœ¨arduinoä¸Šç¼–ç¨‹zigbeeå—">Q1: å¯ä»¥åœ¨Arduinoä¸Šç¼–ç¨‹Zigbeeå—ï¼Ÿ<a href="#q1-å¯ä»¥åœ¨arduinoä¸Šç¼–ç¨‹zigbeeå—" class="hash-link" aria-label="Direct link to Q1: å¯ä»¥åœ¨Arduinoä¸Šç¼–ç¨‹Zigbeeå—ï¼Ÿ" title="Direct link to Q1: å¯ä»¥åœ¨Arduinoä¸Šç¼–ç¨‹Zigbeeå—ï¼Ÿ">â€‹</a></h3><p>ç†è®ºä¸Šæ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºEspressifåœ¨Zigbeeæ–¹é¢æä¾›äº†å¾ˆå¥½çš„åº“æ”¯æŒï¼Œå¹¶æä¾›äº†ç±»ä¼¼çš„<a href="https://github.com/espressif/arduino-esp32/tree/master/libraries/ESP32/examples/Zigbee/Zigbee_Light_Bulb" target="_blank" rel="noopener noreferrer">Zigbeeç¤ºä¾‹ç¨‹åº</a>ã€‚</p><p>ç„¶è€Œï¼Œå½“æˆ‘ä»¬å®é™…ä½¿ç”¨è¿™äº›ç¤ºä¾‹æ—¶ï¼Œæˆ‘ä»¬å‘ç°XIAOæ— æ³•æ­£å¸¸å·¥ä½œï¼Œå¹¶ä¸”ä¼šé‡åˆ°ä¸æ–­é‡å¯çš„é—®é¢˜ã€‚æˆ‘ä»¬å·²ç»<a href="https://github.com/espressif/arduino-esp32/issues/9716#issuecomment-2138491439" target="_blank" rel="noopener noreferrer">å‘Espressifæäº¤äº†é—®é¢˜</a>ï¼Œç­‰å¾…å®˜æ–¹å¤„ç†å’Œè§£å†³æ–¹æ¡ˆã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="q2-åœ¨ä½¿ç”¨esp_zb_on_off_lightæ—¶ä»ç„¶é‡åˆ°é—®é¢˜ç½‘ç»œå¼•å¯¼æœªèƒ½æˆåŠŸåŒ¹é…å¦ä¸€ä¸ªxiao">Q2: åœ¨ä½¿ç”¨ESP_ZB_ON_OFF_LIGHTæ—¶ä»ç„¶é‡åˆ°é—®é¢˜ï¼šç½‘ç»œå¼•å¯¼æœªèƒ½æˆåŠŸåŒ¹é…å¦ä¸€ä¸ªXIAOã€‚<a href="#q2-åœ¨ä½¿ç”¨esp_zb_on_off_lightæ—¶ä»ç„¶é‡åˆ°é—®é¢˜ç½‘ç»œå¼•å¯¼æœªèƒ½æˆåŠŸåŒ¹é…å¦ä¸€ä¸ªxiao" class="hash-link" aria-label="Direct link to Q2: åœ¨ä½¿ç”¨ESP_ZB_ON_OFF_LIGHTæ—¶ä»ç„¶é‡åˆ°é—®é¢˜ï¼šç½‘ç»œå¼•å¯¼æœªèƒ½æˆåŠŸåŒ¹é…å¦ä¸€ä¸ªXIAOã€‚" title="Direct link to Q2: åœ¨ä½¿ç”¨ESP_ZB_ON_OFF_LIGHTæ—¶ä»ç„¶é‡åˆ°é—®é¢˜ï¼šç½‘ç»œå¼•å¯¼æœªèƒ½æˆåŠŸåŒ¹é…å¦ä¸€ä¸ªXIAOã€‚">â€‹</a></h3><p>é¦–å…ˆï¼Œè¯·æ’æŸ¥æ‚¨æ­£åœ¨ä½¿ç”¨çš„ESP-IDFç‰ˆæœ¬ï¼Œç¡®ä¿æ‚¨ä½¿ç”¨çš„æ˜¯<strong>ESP-IDF v5.1.3</strong>æ¥ç¼–è¯‘Zigbeeç¤ºä¾‹åº”ç”¨ç¨‹åºï¼Œå¦‚æœä¸æ˜¯ï¼Œè¯·æ›´æ”¹IDFç‰ˆæœ¬ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå°è¯•é‡æ–°æ’æ‹”è®¾å¤‡ã€‚æ‚¨å¯ä»¥å…ˆå¯åŠ¨ä¸Šä¼ äº†<strong>HA_on_off_switch</strong>ç¨‹åºçš„è®¾å¤‡ï¼Œç„¶åå†å¯åŠ¨ä¸Šä¼ äº†<strong>HA_on_off_light</strong>ç¨‹åºçš„è®¾å¤‡ã€‚</p><p>å¦‚æœä»ç„¶æ— æ³•è§£å†³ï¼Œè¯·æ“¦é™¤æ‰€æœ‰é—ªå­˜å¹¶é‡æ–°ä¸Šä¼ ç¨‹åºã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">idf.py erase_flash flash monitor</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœä¸Šè¿°æ–¹æ³•éƒ½æ— æ•ˆï¼Œè¯·å‘Espressifæäº¤é—®é¢˜ã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="q3-å¦‚æœæˆ‘æƒ³åœ¨æˆåŠŸé…å¯¹ååŒ¹é…æ–°è®¾å¤‡è¯¥æ€ä¹ˆåŠ">Q3: å¦‚æœæˆ‘æƒ³åœ¨æˆåŠŸé…å¯¹ååŒ¹é…æ–°è®¾å¤‡ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ<a href="#q3-å¦‚æœæˆ‘æƒ³åœ¨æˆåŠŸé…å¯¹ååŒ¹é…æ–°è®¾å¤‡è¯¥æ€ä¹ˆåŠ" class="hash-link" aria-label="Direct link to Q3: å¦‚æœæˆ‘æƒ³åœ¨æˆåŠŸé…å¯¹ååŒ¹é…æ–°è®¾å¤‡ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ" title="Direct link to Q3: å¦‚æœæˆ‘æƒ³åœ¨æˆåŠŸé…å¯¹ååŒ¹é…æ–°è®¾å¤‡ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ">â€‹</a></h3><p>ç›´æ¥ä½¿ç”¨é—ªå­˜å‘½ä»¤ä¸Šä¼ ç¨‹åºä¸ä¼šæ“¦é™¤é—ªå­˜ä¸­ä¿å­˜çš„å†å²é…å¯¹è®°å½•ã€‚è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é‡æ–°ä¸Šä¼ ç¨‹åºä»¥åŒ¹é…æ–°è®¾å¤‡ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">idf.py erase_flash flash monitor</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="èµ„æº">èµ„æº<a href="#èµ„æº" class="hash-link" aria-label="Direct link to èµ„æº" title="Direct link to èµ„æº">â€‹</a></h2><ul><li><strong>[Espressif å®˜æ–¹æ–‡æ¡£]</strong> <a href="https://docs.espressif.com/projects/esp-zigbee-sdk/en/latest/esp32/developing.html" target="_blank" rel="noopener noreferrer">ä½¿ç”¨ ESP Zigbee SDK å¼€å‘</a></li><li><strong>[GITHUB]</strong> <a href="https://github.com/espressif/esp-zigbee-sdk" target="_blank" rel="noopener noreferrer">Zigbee SDK ä»“åº“</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æŠ€æœ¯æ”¯æŒä¸äº§å“è®¨è®º">æŠ€æœ¯æ”¯æŒä¸äº§å“è®¨è®º<a href="#æŠ€æœ¯æ”¯æŒä¸äº§å“è®¨è®º" class="hash-link" aria-label="Direct link to æŠ€æœ¯æ”¯æŒä¸äº§å“è®¨è®º" title="Direct link to æŠ€æœ¯æ”¯æŒä¸äº§å“è®¨è®º">â€‹</a></h2><p>æ„Ÿè°¢æ‚¨é€‰æ‹©æˆ‘ä»¬çš„äº§å“ï¼æˆ‘ä»¬åœ¨è¿™é‡Œä¸ºæ‚¨æä¾›å„ç§æ”¯æŒï¼Œç¡®ä¿æ‚¨ä½¿ç”¨æˆ‘ä»¬çš„äº§å“æ—¶ä½“éªŒé¡ºç•…ã€‚æˆ‘ä»¬æä¾›äº†å¤šä¸ªæ²Ÿé€šæ¸ é“ï¼Œä»¥æ»¡è¶³ä¸åŒçš„åå¥½å’Œéœ€æ±‚ã€‚</p><div class="table-center"><div class="button_tech_support_container"><a href="https://forum.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="button_forum"></a><a href="https://www.seeedstudio.com/contacts" target="_blank" rel="noopener noreferrer" class="button_email"></a></div><div class="button_tech_support_container"><a href="https://discord.gg/eWkprNDMU7" target="_blank" rel="noopener noreferrer" class="button_discord"></a><a href="https://github.com/Seeed-Studio/wiki-documents/discussions/69" target="_blank" rel="noopener noreferrer" class="button_discussion"></a></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/zh-CN/Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_ESP32C6/Application/CN_xiao_esp32c6_zigbee.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-11-18T00:00:00.000Z">Nov 18, 2024</time></b> by <b>Agnes</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cn/xiao_esp32c6_zigbee_arduino/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">åœ¨ XIAO ESP32C6 ä¸Šä½¿ç”¨ Zigbee å¿«é€Ÿå…¥é—¨ï¼ˆé€šè¿‡ Arduinoï¼‰</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cn/xiao_esp32s3_getting_started/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Seeed Studio XIAO ESP32S3 (Sense) å¼€å‘æ¿</div></a></nav></div><div>Loading Comments...</div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç¡¬ä»¶å‡†å¤‡" class="table-of-contents__link toc-highlight">ç¡¬ä»¶å‡†å¤‡</a></li><li><a href="#ç¯å¢ƒå‡†å¤‡ä¸æ¼”ç¤º" class="table-of-contents__link toc-highlight">ç¯å¢ƒå‡†å¤‡ä¸æ¼”ç¤º</a><ul><li><a href="#ç¬¬1æ­¥å‡†å¤‡esp-idfç¯å¢ƒ" class="table-of-contents__link toc-highlight">ç¬¬1æ­¥ï¼šå‡†å¤‡ESP-IDFç¯å¢ƒ</a></li><li><a href="#ç¬¬2æ­¥ä¸‹è½½zigbee-sdk" class="table-of-contents__link toc-highlight">ç¬¬2æ­¥ï¼šä¸‹è½½Zigbee SDK</a></li><li><a href="#ç¬¬3æ­¥ç¼–å†™ha_on_off_lightç¨‹åº" class="table-of-contents__link toc-highlight">ç¬¬3æ­¥ï¼šç¼–å†™HA_on_off_lightç¨‹åº</a></li><li><a href="#ç¬¬4æ­¥çƒ§å½•-ha_on_off_light-ç¨‹åº" class="table-of-contents__link toc-highlight">ç¬¬4æ­¥ï¼šçƒ§å½• HA_on_off_light ç¨‹åº</a></li><li><a href="#ç¬¬5æ­¥çƒ§å½•-ha_on_off_switch-ç¨‹åº" class="table-of-contents__link toc-highlight">ç¬¬5æ­¥ï¼šçƒ§å½• HA_on_off_switch ç¨‹åº</a></li></ul></li><li><a href="#ha_on_off_light-å’Œ-ha_on_off_switch-ç¨‹åºç»“æ„" class="table-of-contents__link toc-highlight">HA_on_off_light å’Œ HA_on_off_switch ç¨‹åºç»“æ„</a></li><li><a href="#zigbee-ç»ˆç«¯è®¾å¤‡å’Œ-zigbee-æ•°æ®æ¨¡å‹" class="table-of-contents__link toc-highlight">Zigbee ç»ˆç«¯è®¾å¤‡å’Œ Zigbee æ•°æ®æ¨¡å‹</a></li><li><a href="#zigbeeåè°ƒå™¨" class="table-of-contents__link toc-highlight">Zigbeeåè°ƒå™¨</a></li><li><a href="#æ•…éšœæ’é™¤" class="table-of-contents__link toc-highlight">æ•…éšœæ’é™¤</a><ul><li><a href="#q1-å¯ä»¥åœ¨arduinoä¸Šç¼–ç¨‹zigbeeå—" class="table-of-contents__link toc-highlight">Q1: å¯ä»¥åœ¨Arduinoä¸Šç¼–ç¨‹Zigbeeå—ï¼Ÿ</a></li><li><a href="#q2-åœ¨ä½¿ç”¨esp_zb_on_off_lightæ—¶ä»ç„¶é‡åˆ°é—®é¢˜ç½‘ç»œå¼•å¯¼æœªèƒ½æˆåŠŸåŒ¹é…å¦ä¸€ä¸ªxiao" class="table-of-contents__link toc-highlight">Q2: åœ¨ä½¿ç”¨ESP_ZB_ON_OFF_LIGHTæ—¶ä»ç„¶é‡åˆ°é—®é¢˜ï¼šç½‘ç»œå¼•å¯¼æœªèƒ½æˆåŠŸåŒ¹é…å¦ä¸€ä¸ªXIAOã€‚</a></li><li><a href="#q3-å¦‚æœæˆ‘æƒ³åœ¨æˆåŠŸé…å¯¹ååŒ¹é…æ–°è®¾å¤‡è¯¥æ€ä¹ˆåŠ" class="table-of-contents__link toc-highlight">Q3: å¦‚æœæˆ‘æƒ³åœ¨æˆåŠŸé…å¯¹ååŒ¹é…æ–°è®¾å¤‡ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</a></li></ul></li><li><a href="#èµ„æº" class="table-of-contents__link toc-highlight">èµ„æº</a></li><li><a href="#æŠ€æœ¯æ”¯æŒä¸äº§å“è®¨è®º" class="table-of-contents__link toc-highlight">æŠ€æœ¯æ”¯æŒä¸äº§å“è®¨è®º</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Navigation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Getting_Started/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/Sensor_Network/">Sensor and Sensing</a></li><li class="footer__item"><a class="footer__link-item" href="/Network/">Network</a></li><li class="footer__item"><a class="footer__link-item" href="/Edge_Computing/">Edge Computing</a></li><li class="footer__item"><a class="footer__link-item" href="/Cloud/">Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/Solutions/">Solutions</a></li></ul></div><div class="col footer__col"><div class="footer__title">Ecosystem</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/QqMgVwHT3X" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://project.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Project Hub</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/ecosystem/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Partners</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/distributors.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Distributors</a></li></ul></div><div class="col footer__col"><div class="footer__title">Quick Guide</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bazzar</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/get_help/HowToGetHelp" target="_blank" rel="noopener noreferrer" class="footer__link-item">How to get help</a></li><li class="footer__item"><a href="https://support.seeedstudio.com/knowledgebase" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQs</a></li><li class="footer__item"><a href="https://forum.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/get_help/TechnicalSupport" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technical Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.seeedstudio.com/about-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Seeed</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/join-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Join us</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/contacts" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/blog/2020/04/22/seeed-in-the-news/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Press</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 Seeed Studio, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.aef2b940.js"></script>
<script src="/assets/js/main.983efa68.js"></script>
</body>
</html>