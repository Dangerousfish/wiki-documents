<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-zh-CN/Sensor/SeeedStudio_XIAO/Matter/CN_matter_development_framework_overview" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Matter 开发框架概述 | Seeed Studio Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wiki.seeedstudio.com/cn/matter_development_framework/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Matter 开发框架概述 | Seeed Studio Wiki"><meta data-rh="true" name="description" content="以光的代码为例，介绍 Matter 的发展框架。"><meta data-rh="true" property="og:description" content="以光的代码为例，介绍 Matter 的发展框架。"><meta data-rh="true" name="keywords" content="matter,XIAO,light"><meta data-rh="true" property="og:image" content="https://files.seeedstudio.com/wiki/seeed_logo/logo_2023.png"><meta data-rh="true" name="twitter:image" content="https://files.seeedstudio.com/wiki/seeed_logo/logo_2023.png"><link data-rh="true" rel="icon" href="/img/S.png"><link data-rh="true" rel="canonical" href="https://wiki.seeedstudio.com/cn/matter_development_framework/"><link data-rh="true" rel="alternate" href="https://wiki.seeedstudio.com/cn/matter_development_framework/" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://wiki.seeedstudio.com/cn/matter_development_framework/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Seeed Studio Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Seeed Studio Wiki Atom Feed">

<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-M4JG2HVB",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>


<link rel="icon" href="/img/S.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">


<link rel="search" type="application/opensearchdescription+xml" title="Seeed Studio Wiki" href="/opensearch.xml">
<script src="https://viewer.altium.com/client/static/js/embed.js" async></script>
<script src="/js/custom.js" async></script><link rel="stylesheet" href="/assets/css/styles.e121acb0.css">
<link rel="preload" href="/assets/js/runtime~main.aa2192b9.js" as="script">
<link rel="preload" href="/assets/js/main.ebdcbf37.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M4JG2HVB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#013949;color:#FFFFFF" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Collaborating with us! Join the Seeed Studio <a target="_blank" href="https://wiki.seeedstudio.com/ranger/">Ranger Program</a> or <a target="_blank" href="https://wiki.seeedstudio.com/contributors/">Contributor Program</a>!</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://files.seeedstudio.com/wiki/wiki-platform/SeeedStudio.png" alt="Seeed Studio" class="themedImage_ToTc themedImage--light_HNdA navbar_logo_items"><img src="https://files.seeedstudio.com/wiki/wiki-platform/seeed_white_logo.png" alt="Seeed Studio" class="themedImage_ToTc themedImage--dark_i4oU navbar_logo_items"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items js_getting_started" aria-haspopup="true" aria-expanded="false" role="button" href="/Getting_Started/">Quick Links</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Sensor_Network/">Sensor and Sensing</a></li><li><a class="dropdown__link" href="/Network/">Networking</a></li><li><a class="dropdown__link" href="/Edge_Computing/">Edge Computing</a></li><li><a class="dropdown__link" href="/Cloud/">Cloud</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items js_explore_learn" aria-haspopup="true" aria-expanded="false" role="button" href="/topicintroduction/">Explore with Topics</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tinyml_topic/">TinyML</a></li><li><a class="dropdown__link" href="/ModelAssistant_Introduce_Overview/">SenseCraft Model Assistant</a></li><li><a class="dropdown__link" href="/home_assistant_topic/">Home Assistant</a></li><li><a class="dropdown__link" href="/open_source_topic/">Open Source</a></li><li><a class="dropdown__link" href="/edge_ai_topic/">Edge AI</a></li><li><a class="dropdown__link" href="/cn/Getting_Started/">矽递科技 Wiki 文档平台</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items" aria-haspopup="true" aria-expanded="false" role="button" href="/knowledgebase/">FAQs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Jetson_FAQ/">NVIDIA Jetson Series</a></li><li><a class="dropdown__link" href="/XIAO_FAQ/">Seeed Studio XIAO Series</a></li><li><a class="dropdown__link" href="/reComputer_R1000_FAQ/">reComputer R1000 Series</a></li><li><a class="dropdown__link" href="/reTerminal-new_FAQ/">reTerminal</a></li><li><a class="dropdown__link" href="/FAQs_For_openWrt/">reRouter</a></li><li><a class="dropdown__link" href="/ODYSSEY_FAQ/">Odyssey</a></li><li><a class="dropdown__link" href="/wio_terminal_faq/">Wio Terminal</a></li><li><hr style="margin: 8px 0;"></li><li><a href="https://discord.com/invite/eWkprNDMU7" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.seeedstudio.com/contacts" target="_blank" rel="noopener noreferrer" class="dropdown__link">Email<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://forum.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/Seeed-Studio/wiki-documents/discussions/69" target="_blank" rel="noopener noreferrer" class="dropdown__link">Have Suggestions?<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items" aria-haspopup="true" aria-expanded="false" role="button" href="/ranger/">Rangers</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ranger/">Rangers</a></li><li><a class="dropdown__link" href="/contributors/">Contributors</a></li><li><a href="https://docs.google.com/forms/d/e/1FAIpQLSdiAWHmRJqgVNTJyJDkzhufc1dygFyhWFyEtUTm-mrgSKaEgg/viewform" target="_blank" rel="noopener noreferrer" class="dropdown__link">Apply for Rangers<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/orgs/Seeed-Studio/projects/6" target="_blank" rel="noopener noreferrer" class="dropdown__link">Direct to Assignments<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.seeedstudio.com/blog/2023/09/15/join-the-seeed-ranger-program-empowering-developers-and-building-communities/" target="_blank" rel="noopener noreferrer" class="dropdown__link">More about Rangers<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://wiki.seeedstudio.com/Contributor" target="_blank" rel="noopener noreferrer" class="dropdown__link">More about Contributors<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://www.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_doc_right_items">Bazaar 🛍️</a><a href="https://wiki-gpt.seeedstudio.com/chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_doc_right_items">AI Bot 🤖️</a><a href="https://sensecraft.seeed.cc/ai/#/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_doc_right_items">SenseCraft AI</a><a href="https://sensecraft.seeed.cc/ai/#/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-SSCMA"></a><a href="https://github.com/Seeed-Studio/wiki-documents" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Getting_Started/">矽递科技 Wiki 文档平台</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/Grove_System/">Grove 系列</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/grove_vision_ai_v2/">Grove 传感器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/Grove_Accessories_Intro/">Grove 配件</a><button aria-label="Toggle the collapsible sidebar category &#x27;Grove 配件&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/SeeedStudio_XIAO_Series_Introduction/">XIAO 拇指开发板</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/Seeeduino-XIAO/">XIAO SAMD21</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO SAMD21&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/getting_started_xiao_ra4m1/">XIAO RA4M1</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO RA4M1&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/xiao_mg24_getting_started/">XIAO MG24</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO MG24&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/XIAO-RP2040/">XIAO RP2040</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO RP2040&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/getting-started-xiao-rp2350/">XIAO RP2350</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO RP2350&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/XIAO_BLE/">XIAO nRF52840 (Sense)</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO nRF52840 (Sense)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/XIAO_ESP32C3_Getting_Started/">XIAO ESP32C3</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO ESP32C3&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/xiao_esp32c6_getting_started/">XIAO ESP32C6</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO ESP32C6&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/xiao_esp32s3_getting_started/">XIAO ESP32S3 (Sense)</a><button aria-label="Toggle the collapsible sidebar category &#x27;XIAO ESP32S3 (Sense)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/get_start_round_display/">XIAO 的兼容扩展板</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/cn/xiao_idf/">XIAO + ESP-IDF + ESP- Matter</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/xiao_idf/">在 XIAO 上使用 Espressif ESP-IDF 开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/getting_started_with_matter/">使用 XIAO ESP32 快速开始使用 Matter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cn/xiao_esp32_matter_env/">Matter 开发与 XIAO ESP32 系列</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cn/matter_development_framework/">Matter 开发框架概述</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/xiao_espnow/">ESP-NOW 登陆 XIAO ESP32 系列</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/PCB_Design_XIAO/">XIAO 的 PCB 设计</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/XIAO-Kit-Courses/">基于 XIAO 的初学者套件</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/xiao_topic_page/">XIAO 系列教程和项目合集</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/XIAO_FAQ/">XIAO 开发板常见问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/reComputer_Intro/">NVIDIA Jetson 套件</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/reComputer_Intro/">reComputer 英伟达系列</a><button aria-label="Toggle the collapsible sidebar category &#x27;reComputer 英伟达系列&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cn/Generative_AI_Intro/">生成式人工智能应用</a><button aria-label="Toggle the collapsible sidebar category &#x27;生成式人工智能应用&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/How_to_Train_and_Deploy_YOLOv8_on_reComputer/">计算机视觉应用</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/Wio_Terminal_Intro/">Wio Terminal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Wio-Terminal-Getting-Started-test/">Wio Terminal入门教程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Wio-Terminal-CircuitPython/">Wio Terminal上的CircuitPython</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Software-FreeRTOS/">Wio Terminal上的FreeRTOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/wio_terminal_faq/">Wio Terminal 常见问题解答</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Wio-Terminal-LCD-Overview/">硬件概述</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Connect-Wio-Terminal-to-Microsoft-Azure-IoT-Central/">应用</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Wio-Terminal-Battery-Chassis/">扩展板</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Wio-Terminal-TinyML-Kit-Course/">课程套件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/Wio-Terminal-Firmware/">教程</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/Quantum-Mini-Linux-Development-Kit/">夸克(Quark)迷你开发者套件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sideboard_calss"><a class="menu__link" href="/cn/mmwave_radar_Intro/">毫米波雷达传感器</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/mmwave_for_xiao/">用于XIAO的毫米波</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cn/mmwave_human_detection_kit/">毫米波套件</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR24BSD1/">24GHz 毫米波传感器 - 睡眠呼吸监测</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR24FDB1/">24GHz毫米波传感器 - 人体跌倒检测传感器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR24HPB1/">24GHz 毫米波传感器 - 人体静态存在模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR24HPC1/">24GHz毫米波传感器 - 人体静态存在模块精简版</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR60BHA1/">60GHz毫米波传感器 - 人体静态睡眠呼吸监测</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cn/Radar_MR60FDA1/">60GHz毫米波传感器 - 跌倒检测模块专业版</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">XIAO + ESP-IDF + ESP- Matter</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Matter 开发框架概述</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Matter 开发框架概述</h1><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>本文是 Seeed Studio XIAO ESP32 开发 Matter 系列的第四篇教程。如果您还没有阅读之前的教程，建议您先阅读它们，以确保您的设备已经按要求配置好。</p><ul><li><strong><a href="https://wiki.seeedstudio.com/xiao_idf" target="_blank" rel="noopener noreferrer">在 XIAO 上使用 Espressif ESP-IDF 开发</a></strong></li><li><strong><a href="https://wiki.seeedstudio.com/getting_started_with_matter" target="_blank" rel="noopener noreferrer">快速开始使用 XIAO ESP32 系列开发 Matter</a></strong></li><li><strong><a href="https://wiki.seeedstudio.com/xiao_esp32_matter_env/" target="_blank" rel="noopener noreferrer">XIAO ESP32 系列的 Matter 开发</a></strong></li></ul></div></div><p>通过我们的全面教程，开始一段揭示 Matter 开发世界的旅程。通过经典的灯光示例，我们将揭示构成 Matter 开发基础的基本概念和知识。从集群和属性到命令及更多内容，本教程将为您提供掌握 Matter 框架的工具，帮助您信心十足地探索 Matter 开发的各个方面。准备好提升您的 Matter 开发技能吧，让我们深入探索这个充满活力的物联网世界！</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="教程大纲">教程大纲<a href="#教程大纲" class="hash-link" aria-label="Direct link to 教程大纲" title="Direct link to 教程大纲">​</a></h2><ol><li><strong><a href="#understanding-the-light-example">理解灯光示例</a></strong></li><li><strong><a href="#device-initialisation">设备初始化</a></strong></li><li><strong><a href="#create-matter-node">创建 Matter 节点</a></strong></li><li><strong><a href="#sets-the-attribute-of-the-endpoint">设置端点的属性</a></strong></li><li><strong><a href="#create-endpoint--auto-match-cluster">创建端点并自动匹配集群</a></strong></li><li><strong><a href="#setting-up-the-matter-device-for-the-first-time-with-default-values">使用默认值首次设置 Matter 设备</a></strong></li><li><strong><a href="#data-updates-and-deferred-persistence">数据更新和延迟持久化</a></strong></li></ol><p>在本节中，我们将重点介绍 ESP-Matter 提供的 <a href="https://github.com/espressif/esp-matter/tree/main/examples/light" target="_blank" rel="noopener noreferrer">灯光</a> 示例，该示例详细描述了 Matter 开发框架中集群、属性和命令的基本概念。通过阅读本文，您将更好地理解 Matter 开发框架的结构和工作原理。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="理解灯光示例">理解灯光示例<a href="#理解灯光示例" class="hash-link" aria-label="Direct link to 理解灯光示例" title="Direct link to 理解灯光示例">​</a></h2><p>首先，让我们看一下 ESP-Matter 环境中的文件目录及其功能。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">- esp-matter/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   - components/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - esp_matter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - esp_matter_bridge</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - esp_matter_console</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - esp_matter_controller</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - esp_matter_rainmaker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - esp_matter_thread_br</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   - connectedhomeip/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   - device_hal/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - button_driver</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - device</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - led_driver</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   - docs/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   - examples/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   - tools/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - mfg_tool</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   CMakeLists.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   RELEASE_NOTES.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   export.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   install.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   requirements.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>esp-matter</strong>：这是整个 Matter 开发框架的根目录。</p><p><strong>components</strong>：该目录包含各种组件，是 Matter 框架的核心部分。</p><ul><li>esp_matter：这是在 ESP32 上实现 Matter 协议栈的部分，包括数据模型、应用层逻辑等。</li><li>esp_matter_bridge：该组件负责将 ESP 设备与其他非 ESP 设备桥接，实现互操作性。</li><li>esp_matter_console：这是基于 REPL 的交互式控制台，用于调试和控制 Matter 设备。</li><li>esp_matter_controller：该组件实现了 Matter 控制器的功能，能够控制其他 Matter 设备。</li><li>esp_matter_rainmaker：该组件与 Espressif 的 RainMaker 云平台集成，实现云端控制。</li><li>esp_matter_thread_br：该组件实现了 Thread Border Router 的功能，用于创建 Thread 网络。</li></ul><p><strong>connectedhomeip</strong>：这是 Matter 协议栈的上游开源项目，ESP Matter 从该项目同步代码。</p><p><strong>device_hal</strong>：该目录包含硬件抽象层驱动。</p><ul><li>button_driver：按钮驱动程序。</li><li>device：设备抽象，定义通用的设备接口。</li><li>led_driver：LED 驱动程序。</li></ul><p><strong>docs</strong>：该目录存储 ESP-Matter 开发文档和 API 参考手册。</p><p><strong>examples</strong>：各种示例代码，演示如何使用 Matter 框架进行开发。</p><p><strong>tools</strong>：包含各种开发工具脚本。</p><ul><li>mfg_tool：用于生成制造商证书的工具。</li></ul><p><strong>CMakeLists.txt</strong>：CMake 构建脚本，定义项目的编译规则。</p><p><strong>RELEASE_NOTES.md</strong>：版本发布说明，记录每个版本的更改内容。</p><p><strong>export.sh</strong>：导出脚本，用于导出与 Matter 相关的环境变量。</p><p><strong>install.sh</strong>：安装脚本，用于安装 Matter 开发所需的依赖项和工具链。</p><p><strong>requirements.txt</strong>：Python 依赖列表，指定了运行 Matter 开发框架所需的 Python 库。</p><p>这个目录结构体现了 Matter 开发框架的模块化设计理念。核心协议栈、硬件抽象、应用组件、辅助工具等各个部分各司其职，同时有机地结合在一起，为开发者提供了一个完整的 Matter 开发环境。</p><p>以 <strong>examples/light</strong> 为例，ESP-Matter 提供的示例结构如下：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">- light/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   - main/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - CMakeLists.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - app_driver.cpp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - app_main.cpp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - app_priv.h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - idf_components.yml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   CMakeLists.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   README.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   partitions.csv</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   sdkconfig.defaults</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><strong>main</strong>: 该子目录包含主要的应用程序代码和配置文件。</p><ul><li>CMakeLists.txt: 主要应用程序的 CMake 构建脚本。</li><li>app_driver.cpp: 灯光应用程序的驱动代码。</li><li>app_main.cpp: 灯光应用程序的主入口文件。</li><li>app_priv.h: 包含灯光应用程序私有声明的头文件。</li><li>idf_components.yml: 用于灯光应用程序中的 ESP-IDF 组件的配置文件。</li></ul></li><li><p><strong>CMakeLists.txt</strong>: 灯光示例的顶级 CMake 构建脚本。</p></li><li><p><strong>README.md</strong>: 提供灯光示例信息和说明的 README 文件。</p></li><li><p><strong>partitions.csv</strong>: 定义灯光示例的分区表文件。</p></li><li><p><strong>sdkconfig.defaults</strong>: 灯光示例的默认配置设置。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="设备初始化">设备初始化<a href="#设备初始化" class="hash-link" aria-label="Direct link to 设备初始化" title="Direct link to 设备初始化">​</a></h2><p>接下来，我们将深入分析灯光的代码，通过代码分析和理论结合来加深对 Matter 开发流程的理解。以下代码位于 <a href="https://github.com/espressif/esp-matter/blob/main/examples/light/main/app_main.cpp" target="_blank" rel="noopener noreferrer">main/app_main.cpp</a>。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">app_driver_handle_t light_handle </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_light_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">app_driver_handle_t button_handle </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_button_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">app_reset_button_register</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">button_handle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>app_driver_handle_t light_handle = app_driver_light_init();</code>：这一行初始化了灯光驱动并返回一个指向灯光驱动实例的句柄。</p><p><code>app_driver_handle_t button_handle = app_driver_button_init();</code>：与灯光初始化类似，这一行初始化了按钮驱动。</p><p><code>app_reset_button_register(button_handle);</code>：这一行为按钮注册了特定的功能，用于处理重置操作。</p><p>以 <code>app_driver_light_init()</code> 函数为例，以下程序初始化了所有的灯泡，但只使用了第一个（设置为默认的颜色和亮度值）。这也是示例程序只能使用一个灯泡的原因。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// app_driver.cpp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">app_driver_handle_t </span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_light_init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token macro property"> </span><span class="token macro property expression">CONFIG_BSP_LEDS_NUM </span><span class="token macro property expression operator">&gt;</span><span class="token macro property expression"> </span><span class="token macro property expression number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/* 初始化 LED */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    led_indicator_handle_t leds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">CONFIG_BSP_LEDS_NUM</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">bsp_led_indicator_create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">leds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> CONFIG_BSP_LEDS_NUM</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">led_indicator_set_hsv</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">leds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">SET_HSV</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">DEFAULT_HUE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> DEFAULT_SATURATION</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> DEFAULT_BRIGHTNESS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">app_driver_handle_t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">leds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">endif</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建-matter-节点">创建 Matter 节点<a href="#创建-matter-节点" class="hash-link" aria-label="Direct link to 创建 Matter 节点" title="Direct link to 创建 Matter 节点">​</a></h2><p>Matter 设备配置的下一步是创建一个 Matter 节点，代码如下：</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">node</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t node_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// node 句柄可以用来添加/修改其他端点。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node_t </span><span class="token operator">*</span><span class="token plain">node </span><span class="token operator">=</span><span class="token plain"> node</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">&amp;</span><span class="token plain">node_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> app_attribute_update_cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> app_identification_cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">ABORT_APP_ON_FAILURE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">nullptr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;创建 Matter 节点失败&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Matter 数据模型是一个标准化的方式，用于表示和组织 Matter 生态系统中的数据。它定义了设备、属性和交互的通用语言和结构，从而实现 Matter 兼容设备之间的互操作性和无缝通信。</p><p>以下图示展示了 Matter 数据模型的简化视图：</p><div style="text-align:center"><img loading="lazy" src="https://files.seeedstudio.com/wiki/xiaoc6-matter/34.png" style="width:600px;height:auto" class="img_ev3q"></div><p><strong>Matter 节点</strong>：
Matter 节点代表 Matter 生态系统中的一个物理设备或逻辑实体。它是 Matter 数据模型的顶层组件。每个 Matter 节点都有一个唯一的标识符，并且可以包含一个或多个端点。</p><ul><li>Matter 节点代表 Matter 生态系统中的 <strong>物理设备</strong>。</li><li>它就像一个房子，可以包含多个端点（房间）。</li><li>每个 Matter 节点都有自己唯一的标识符，用于在网络中识别和寻址。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="设置端点的属性">设置端点的属性<a href="#设置端点的属性" class="hash-link" aria-label="Direct link to 设置端点的属性" title="Direct link to 设置端点的属性">​</a></h2><p>一旦 Matter 节点创建完成，就需要为端点的属性设置默认值。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">extended_color_light</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">on_off</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">on_off </span><span class="token operator">=</span><span class="token plain"> DEFAULT_POWER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">on_off</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">lighting</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">start_up_on_off </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">nullptr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">level_control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">current_level </span><span class="token operator">=</span><span class="token plain"> DEFAULT_BRIGHTNESS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">level_control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">lighting</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">start_up_current_level </span><span class="token operator">=</span><span class="token plain"> DEFAULT_BRIGHTNESS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">color_control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">color_mode </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">ColorControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">ColorMode</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">kColorTemperature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">color_control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">enhanced_color_mode </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">ColorControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">ColorMode</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">kColorTemperature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">color_control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">color_temperature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">startup_color_temperature_mireds </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">nullptr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><p><code>light_config.on_off.on_off = DEFAULT_POWER;</code></p><ul><li>设置端点的初始开/关状态为 <code>DEFAULT_POWER</code>。</li><li><code>DEFAULT_POWER</code> 是一个预定义常量，表示默认的电源状态（例如，<code>true</code> 表示开启，<code>false</code> 表示关闭）。</li></ul></li><li><p><code>light_config.on_off.lighting.start_up_on_off = nullptr;</code></p><ul><li>设置端点的启动时开/关状态为 <code>nullptr</code>。</li><li>当设备重启或断电重启时，如果该值为 <code>nullptr</code>，则表示使用上次的开/关状态。</li><li>如果设置为非 <code>nullptr</code> 的值，则表示使用指定的开/关状态。</li></ul></li><li><p><code>light_config.level_control.current_level = DEFAULT_BRIGHTNESS;</code></p><ul><li>设置端点的初始亮度级别为 <code>DEFAULT_BRIGHTNESS</code>（64）。</li><li><code>DEFAULT_BRIGHTNESS</code> 是一个预定义常量，表示默认亮度级别（例如，0 到 254 之间的值）。</li></ul></li><li><p><code>light_config.level_control.lighting.start_up_current_level = DEFAULT_BRIGHTNESS;</code></p><ul><li>设置端点的启动亮度级别为 <code>DEFAULT_BRIGHTNESS</code>（64）。</li><li>当设备重启或断电重启时，如果该值非 <code>nullptr</code>，则表示使用指定的亮度级别。</li><li>如果设置为 <code>nullptr</code>，则表示使用上次的亮度级别。</li></ul></li><li><p><code>light_config.color_control.color_mode = (uint8_t)ColorControl::ColorMode::kColorTemperature;</code></p><ul><li>设置端点的颜色模式为 <code>ColorControl::ColorMode::kColorTemperature</code>。</li><li>这意味着端点使用色温模式，通过调整色温来控制灯光的颜色。</li><li><code>(uint8_t)</code> 是类型转换，将枚举值转换为无符号 8 位整数。</li></ul></li><li><p><code>light_config.color_control.enhanced_color_mode = (uint8_t)ColorControl::ColorMode::kColorTemperature;</code></p><ul><li>设置端点的增强色彩模式为 <code>ColorControl::ColorMode::kColorTemperature</code>。</li><li>增强色彩模式提供了更多的颜色控制选项，但这里也设置为色温模式。</li></ul></li><li><p><code>light_config.color_control.color_temperature.startup_color_temperature_mireds = nullptr;</code></p><ul><li>设置端点的启动色温为 <code>nullptr</code>。</li><li>当设备重启或断电重启时，如果该值为 <code>nullptr</code>，则表示使用上次的色温设置。</li><li>如果设置为非 <code>nullptr</code> 的值，则表示使用指定的色温值。</li></ul></li></ol><p>Matter 中的属性类似于设备的特性或特征。它们存储有关设备状态的信息，例如设备是否打开、亮度级别或色温。这些属性按功能分组，称为簇（Clusters），每个簇与设备的特定功能相关。</p><p>属性使不同的设备和应用程序能够更容易地进行通信并无缝协作。通过采用标准化的方式表示和访问设备属性，Matter 简化了智能家居系统的开发，并确保来自不同品牌的设备可以高效地互操作。</p><p><code>esp_matter_endpoint.h</code> 是 ESP Matter SDK 中一个重要的头文件，定义了与端点相关的常量、数据类型和函数。在 Matter 中，端点表示设备的逻辑接口，每个端点包含一组属性和命令，用于描述和控制设备的特定功能。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">namespace</span><span class="token plain"> extended_color_light </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">config</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">descriptor</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t descriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">identify</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t identify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">groups</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t groups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">scenes_management</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t scenes_management</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">on_off</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t on_off</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">level_control</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t level_control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">color_control</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t color_control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> config_t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">get_device_type_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">get_device_type_version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">endpoint_t </span><span class="token operator">*</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node_t </span><span class="token operator">*</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config_t </span><span class="token operator">*</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token plain"> flags</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">priv_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">esp_err_t </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config_t </span><span class="token operator">*</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">/* extended_color_light */</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创建端点--自动匹配簇">创建端点 &amp; 自动匹配簇<a href="#创建端点--自动匹配簇" class="hash-link" aria-label="Direct link to 创建端点 &amp; 自动匹配簇" title="Direct link to 创建端点 &amp; 自动匹配簇">​</a></h2><p>在上面的代码中，我们首先提到了 Matter 中的两个重要术语：端点（Endpoints）和簇（Clusters）。</p><div style="text-align:center"><img loading="lazy" src="https://files.seeedstudio.com/wiki/xiaoc6-matter/35.png" style="width:500px;height:auto" class="img_ev3q"></div><p><strong>端点（Endpoint(s)）<!-- -->[设备类型（Device-Type(s)）]</strong>：
端点是 Matter 节点中一个特定功能或服务的逻辑表示。它封装了与特定设备类型相关的一组功能和行为。一个 Matter 节点可以有多个端点，每个端点代表一个不同的设备类型。设备类型定义了端点的具体特性和功能。Matter 定义了一组标准的设备类型，例如灯泡、恒温器、门锁等。每种设备类型都有一个唯一的标识符和一组与之相关的预定义簇、属性和命令。</p><ul><li>端点是 Matter 节点中的一个逻辑组件，表示设备的一个特定功能或服务。</li><li>就像房子中的不同房间一样，每个端点都有自己专门的用途，例如卧室、厨房或客厅。</li><li>每个端点与特定的设备类型相关联，例如灯泡、恒温器或门锁。</li><li>一个 Matter 节点可以有多个端点，每个端点代表不同的设备类型和功能。</li></ul><p><strong>簇（Cluster(s)）</strong>：
簇是端点中相关属性和命令的逻辑分组。它们表示设备的特定功能或特性。簇提供了一种组织和分类端点功能的方式。例如，“开/关簇”包含与开启或关闭设备相关的属性和命令，而“亮度控制簇”则涉及控制设备的亮度或级别。</p><ul><li>簇是端点中的一个逻辑分组，包含相关的属性和命令。</li><li>它就像房间中的家具或设备，例如灯、电视或空调，每个设备都有自己的属性和操作。</li><li>每个簇表示设备的一个特定功能或特性。</li><li>例如，“开/关簇”包含与设备开/关状态相关的属性和命令，而“亮度控制簇”包含用于调整设备亮度或级别的属性和命令。</li><li>一个端点可以有多个簇，每个簇负责不同的功能。</li></ul><p>总而言之，Matter 节点就像一栋房子，包含多个端点（房间）。每个端点就像一个房间，表示设备的特定功能或服务。簇就像房间中的家具或设备，包含相关的属性和命令，用于控制和交互。</p><p>这种层次化的组织结构使得设备能够清晰地描述其功能和特性，从而使应用程序和其他设备更容易与它们进行交互和控制。通过标准化设备类型、簇、属性和命令，Matter 实现了不同厂商设备之间的互操作性和兼容性。</p><p>在代码中，设置完属性后，最终通过以下代码段创建一个端点，并自动匹配设置属性的簇。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint </span><span class="token operator">=</span><span class="token plain"> extended_color_light</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ENDPOINT_FLAG_NONE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> light_handle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">ABORT_APP_ON_FAILURE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">nullptr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;创建扩展色光端点失败&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何实现自动匹配簇">如何实现自动匹配簇？<a href="#如何实现自动匹配簇" class="hash-link" aria-label="Direct link to 如何实现自动匹配簇？" title="Direct link to 如何实现自动匹配簇？">​</a></h2><p>让我们通过一个设置属性的示例来说明如何实现自动匹配簇。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">level_control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">lighting</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">start_up_current_level </span><span class="token operator">=</span><span class="token plain"> DEFAULT_BRIGHTNESS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>light_config.level_control</code> 是在端点（<code>esp_matter_endpoint.h</code>）中定义的一个属性，而 <code>light_config.level_control.lighting</code> 是在簇（<code>esp_matter_cluster</code>）中定义的属性。通过这种设置，系统能够自动匹配与该属性相对应的簇，而无需开发者手动设置。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="初次设置-matter-设备的默认值">初次设置 Matter 设备的默认值<a href="#初次设置-matter-设备的默认值" class="hash-link" aria-label="Direct link to 初次设置 Matter 设备的默认值" title="Direct link to 初次设置 Matter 设备的默认值">​</a></h2><p>在配置了上述属性、簇和端点后，我们可以开始启动 Matter 设备。启动的步骤和方法如下所示。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">light_endpoint_id </span><span class="token operator">=</span><span class="token plain"> endpoint</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;创建的灯光端点 ID 为 %d&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> light_endpoint_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/* 启动 Matter */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">err </span><span class="token operator">=</span><span class="token plain"> esp_matter</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">app_event_cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">ABORT_APP_ON_FAILURE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err </span><span class="token operator">==</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;启动 Matter 失败，错误代码: %d&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/* 使用默认值启动驱动程序 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_light_set_defaults</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">light_endpoint_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如您所见，设置默认值的函数是 <code>app_driver_light_set_defaults()</code>，我们需要传入一个端点 ID 作为参数。我们还需要关注如何获取某个簇的值，某个属性的值，以及如何设置默认的簇和属性值。这些细节可以在 <code>app_driver.cpp</code> 中找到。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">esp_err_t err </span><span class="token operator">=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">priv_data </span><span class="token operator">=</span><span class="token plain"> endpoint</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get_priv_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">led_indicator_handle_t handle </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">led_indicator_handle_t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">priv_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node_t </span><span class="token operator">*</span><span class="token plain">node </span><span class="token operator">=</span><span class="token plain"> node</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint </span><span class="token operator">=</span><span class="token plain"> endpoint</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> endpoint_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cluster_t </span><span class="token operator">*</span><span class="token plain">cluster </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute_t </span><span class="token operator">*</span><span class="token plain">attribute </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">esp_matter_attr_val_t val </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_matter_invalid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/* 设置亮度 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cluster </span><span class="token operator">=</span><span class="token plain"> cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> LevelControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute </span><span class="token operator">=</span><span class="token plain"> attribute</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> LevelControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Attributes</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">CurrentLevel</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get_val</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">val</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">err </span><span class="token operator">|=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_light_set_brightness</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">handle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">val</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><p><strong>获取簇（Cluster）</strong>：</p><ul><li>要获取簇，首先需要使用 <code>endpoint::get(node, endpoint_id)</code> 函数获取端点的指针，其中 <code>node</code> 是指向节点的指针，<code>endpoint_id</code> 是端点的 ID。</li><li>一旦获取了端点的指针，就可以使用 <code>cluster::get(endpoint, LevelControl::Id)</code> 函数获取所需的簇的指针，指定端点和簇的 ID（此处为 <code>LevelControl::Id</code>）。</li></ul></li><li><p><strong>获取特定属性（Attribute）</strong>：</p><ul><li>获取簇的指针后，可以使用 <code>attribute::get(cluster, LevelControl::Attributes::CurrentLevel::Id)</code> 函数获取簇中的特定属性。</li><li>在此示例中，我们从 <code>LevelControl</code> 簇中检索 <code>CurrentLevel</code> 属性。</li></ul></li><li><p><strong>获取属性值</strong>：</p><ul><li>要获取属性的当前值，首先需要声明一个类型为 <code>esp_matter_attr_val_t</code> 的变量来存储属性值。</li><li>在代码片段中，变量 <code>val</code> 被初始化为 <code>esp_matter_invalid(NULL)</code>。</li><li>然后，使用 <code>attribute::get_val(attribute, &amp;val)</code> 函数获取属性的当前值，并将其存储在 <code>val</code> 变量中。</li></ul></li><li><p><strong>设置灯光亮度</strong>：</p><ul><li>要设置灯光的亮度，首先需要获取与端点关联的 LED 指示灯的句柄。</li><li>在代码片段中，通过将私有数据指针（<code>priv_data</code>）强制转换为适当的类型（<code>led_indicator_handle_t</code>）来获取 LED 指示灯句柄。</li><li>最后，使用 <code>app_driver_light_set_brightness(handle, &amp;val)</code> 函数设置 LED 指示灯的亮度。</li><li>参数 <code>handle</code> 是 LED 指示灯的句柄，<code>&amp;val</code> 是指向包含所需亮度值的 <code>esp_matter_attr_val_t</code> 变量的指针。</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="总结步骤">总结步骤：<a href="#总结步骤" class="hash-link" aria-label="Direct link to 总结步骤：" title="Direct link to 总结步骤：">​</a></h3><ol><li>使用 <code>endpoint::get(node, endpoint_id)</code> 获取端点指针。</li><li>使用 <code>cluster::get(endpoint, LevelControl::Id)</code> 获取簇指针。</li><li>使用 <code>attribute::get(cluster, LevelControl::Attributes::CurrentLevel::Id)</code> 获取属性指针。</li><li>使用 <code>attribute::get_val(attribute, &amp;val)</code> 获取属性的当前值。</li><li>使用 <code>app_driver_light_set_brightness(handle, &amp;val)</code> 设置灯光的亮度，其中 <code>handle</code> 是与端点关联的 LED 指示灯的句柄。</li></ol><p>通过遵循这些步骤，您可以获取簇和属性的必要指针，检索属性的当前值，并相应地设置灯光的亮度。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据更新与延迟持久化">数据更新与延迟持久化<a href="#数据更新与延迟持久化" class="hash-link" aria-label="Direct link to 数据更新与延迟持久化" title="Direct link to 数据更新与延迟持久化">​</a></h2><p>在 <code>app_driver.cpp</code> 代码中，使用 <code>app_driver_attribute_update()</code> 函数更新属性的值。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint_id </span><span class="token operator">==</span><span class="token plain"> light_endpoint_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   led_indicator_handle_t handle </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">led_indicator_handle_t</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">driver_handle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster_id </span><span class="token operator">==</span><span class="token plain"> OnOff</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">attribute_id </span><span class="token operator">==</span><span class="token plain"> OnOff</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Attributes</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">OnOff</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            err </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_light_set_power</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">handle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster_id </span><span class="token operator">==</span><span class="token plain"> LevelControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">attribute_id </span><span class="token operator">==</span><span class="token plain"> LevelControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Attributes</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">CurrentLevel</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            err </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_light_set_brightness</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">handle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster_id </span><span class="token operator">==</span><span class="token plain"> ColorControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">attribute_id </span><span class="token operator">==</span><span class="token plain"> ColorControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Attributes</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">CurrentHue</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            err </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_light_set_hue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">handle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">attribute_id </span><span class="token operator">==</span><span class="token plain"> ColorControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Attributes</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">CurrentSaturation</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            err </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_light_set_saturation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">handle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">attribute_id </span><span class="token operator">==</span><span class="token plain"> ColorControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Attributes</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">ColorTemperatureMireds</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            err </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">app_driver_light_set_temperature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">handle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这段代码定义了一个名为 <code>app_driver_attribute_update</code> 的函数，该函数接受多个参数，包括驱动句柄（<code>driver_handle</code>）、端点 ID（<code>endpoint_id</code>）、簇 ID（<code>cluster_id</code>）、属性 ID（<code>attribute_id</code>）以及指向属性值的指针（<code>val</code>）。</p><p>该函数的目的是根据接收到的数据更新灯光端点的属性值。它遵循特定的逻辑来确定需要更新的灯光端点的属性。</p><p>以下是数据更新逻辑的逐步分解：</p><ol><li><p>函数首先检查 <code>endpoint_id</code> 是否与 <code>light_endpoint_id</code> 匹配。这确保了更新是针对灯光端点进行的。</p></li><li><p>如果 <code>endpoint_id</code> 匹配，函数将 <code>driver_handle</code> 转换为适当的类型（<code>led_indicator_handle_t</code>），以获取与灯光端点关联的 LED 指示灯句柄。</p></li><li><p>接着，函数检查 <code>cluster_id</code>，以确定属性属于哪个簇。支持的簇包括 <code>OnOff</code>、<code>LevelControl</code> 和 <code>ColorControl</code>。</p></li><li><p>根据 <code>cluster_id</code>，函数进一步检查 <code>attribute_id</code>，以识别该簇中的特定属性。</p></li><li><p>根据 <code>cluster_id</code> 和 <code>attribute_id</code>，函数调用相应的设置函数来更新属性值：</p><ul><li>如果 <code>cluster_id</code> 是 <code>OnOff::Id</code> 且 <code>attribute_id</code> 是 <code>OnOff::Attributes::OnOff::Id</code>，则调用 <code>app_driver_light_set_power(handle, val)</code> 来设置灯光的电源状态。</li><li>如果 <code>cluster_id</code> 是 <code>LevelControl::Id</code> 且 <code>attribute_id</code> 是 <code>LevelControl::Attributes::CurrentLevel::Id</code>，则调用 <code>app_driver_light_set_brightness(handle, val)</code> 来设置灯光的亮度。</li><li>如果 <code>cluster_id</code> 是 <code>ColorControl::Id</code>，则进一步检查 <code>attribute_id</code>：<ul><li>如果 <code>attribute_id</code> 是 <code>ColorControl::Attributes::CurrentHue::Id</code>，则调用 <code>app_driver_light_set_hue(handle, val)</code> 来设置灯光的色调。</li><li>如果 <code>attribute_id</code> 是 <code>ColorControl::Attributes::CurrentSaturation::Id</code>，则调用 <code>app_driver_light_set_saturation(handle, val)</code> 来设置灯光的饱和度。</li><li>如果 <code>attribute_id</code> 是 <code>ColorControl::Attributes::ColorTemperatureMireds::Id</code>，则调用 <code>app_driver_light_set_temperature(handle, val)</code> 来设置灯光的色温。</li></ul></li></ul></li></ol><p>总的来说，这个函数作为更新灯光端点属性值的中心点。它接收必要的信息（端点 ID、簇 ID、属性 ID 和属性值），并根据簇和属性 ID 将更新分发到相应的设置函数。</p><p>通过以这种方式组织逻辑，代码变得更加模块化且易于维护。它允许通过一个函数更新灯光端点的不同属性（电源状态、亮度、色调、饱和度、色温），简化了根据接收到的数据更新灯光特征的过程。</p><p>但并不是所有属性都会实时更新。标记为延迟持久化的属性可以提高性能，减少对非易失性存储的写入次数，并延长设备的使用寿命。</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">/* 标记可能会频繁变化的某些属性为延迟持久化 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cluster_t </span><span class="token operator">*</span><span class="token plain">level_control_cluster </span><span class="token operator">=</span><span class="token plain"> cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> LevelControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute_t </span><span class="token operator">*</span><span class="token plain">current_level_attribute </span><span class="token operator">=</span><span class="token plain"> attribute</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">level_control_cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> LevelControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Attributes</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">CurrentLevel</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">set_deferred_persistence</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">current_level_attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cluster_t </span><span class="token operator">*</span><span class="token plain">color_control_cluster </span><span class="token operator">=</span><span class="token plain"> cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ColorControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute_t </span><span class="token operator">*</span><span class="token plain">current_x_attribute </span><span class="token operator">=</span><span class="token plain"> attribute</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">color_control_cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ColorControl</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Attributes</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">CurrentX</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">set_deferred_persistence</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">current_x_attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="定义自定义数据模型">定义自定义数据模型<a href="#定义自定义数据模型" class="hash-link" aria-label="Direct link to 定义自定义数据模型" title="Direct link to 定义自定义数据模型">​</a></h2><p>本节演示了如何创建在 Matter 规范中定义的标准端点、簇、属性和命令。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="端点">端点<a href="#端点" class="hash-link" aria-label="Direct link to 端点" title="Direct link to 端点">​</a></h4><p>可以通过编辑示例中的 <em>app_main.cpp</em> 文件中的端点/设备类型来定制设备。以下是一些示例：</p><ul><li><strong>开关灯（on_off_light）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   on_off_light</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint </span><span class="token operator">=</span><span class="token plain"> on_off_light</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">light_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ENDPOINT_FLAG_NONE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>温度传感器（temperature_sensor）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esp_matter</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">endpoint</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">temperature_sensor</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t temperature_sensor_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint </span><span class="token operator">=</span><span class="token plain"> temperature_sensor</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">temperature_sensor_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ENDPOINT_FLAG_NONE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>风扇（fan）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   fan</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t fan_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint </span><span class="token operator">=</span><span class="token plain"> fan</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">fan_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ENDPOINT_FLAG_NONE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>门锁（door_lock）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   door_lock</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t door_lock_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint </span><span class="token operator">=</span><span class="token plain"> door_lock</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">door_lock_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ENDPOINT_FLAG_NONE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>窗帘设备（window_covering_device）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   window_covering_device</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t </span><span class="token function" style="color:rgb(80, 250, 123)">window_covering_device_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token generic-function function" style="color:rgb(80, 250, 123)">static_cast</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chip</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">app</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Clusters</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">WindowCovering</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">EndProductType</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">kTiltOnlyInteriorBlind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint </span><span class="token operator">=</span><span class="token plain"> window_covering_device</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">window_covering_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ENDPOINT_FLAG_NONE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>window_covering_device</code> 的 <code>config_t</code> 结构包括一个构造函数，允许指定不同于默认值的终端产品类型，默认值为“卷帘”。
一旦实例化了 <code>config_t</code>，其终端产品类型将不能再修改。</p><ul><li><strong>泵（pump）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   pump</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t </span><span class="token function" style="color:rgb(80, 250, 123)">pump_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint </span><span class="token operator">=</span><span class="token plain"> pump</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">pump_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ENDPOINT_FLAG_NONE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>pump</code> 的 <code>config_t</code> 结构包括一个构造函数，允许指定最大压力、最大速度和最大流量值。如果未设置，这些值将默认为 null。
一旦实例化了 <code>config_t</code>，这三个值将无法修改。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="簇clusters">簇（Clusters）<a href="#簇clusters" class="hash-link" aria-label="Direct link to 簇（Clusters）" title="Direct link to 簇（Clusters）">​</a></h3><p>也可以向端点添加其他簇。示例：</p><ul><li><strong>开关（on_off）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   on_off</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t on_off_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   cluster_t </span><span class="token operator">*</span><span class="token plain">cluster </span><span class="token operator">=</span><span class="token plain"> on_off</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">on_off_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> CLUSTER_FLAG_SERVER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> on_off</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">feature</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">lighting</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>温度测量（temperature_measurement）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   temperature_measurement</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t temperature_measurement_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   cluster_t </span><span class="token operator">*</span><span class="token plain">cluster </span><span class="token operator">=</span><span class="token plain"> temperature_measurement</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">temperature_measurement_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> CLUSTER_FLAG_SERVER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>窗帘控制（window_covering）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   window_covering</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t </span><span class="token function" style="color:rgb(80, 250, 123)">window_covering_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token generic-function function" style="color:rgb(80, 250, 123)">static_cast</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name keyword" style="color:rgb(189, 147, 249);font-style:italic">uint8_t</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chip</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">app</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Clusters</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">WindowCovering</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">EndProductType</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">kTiltOnlyInteriorBlind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   cluster_t </span><span class="token operator">*</span><span class="token plain">cluster </span><span class="token operator">=</span><span class="token plain"> window_covering</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">window_covering_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> CLUSTER_FLAG_SERVER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>window_covering</code> 的 <code>config_t</code> 结构包括一个构造函数，允许指定与默认值不同的终端产品类型，默认类型为“卷帘”。
一旦实例化了 <code>config_t</code>，其终端产品类型将无法修改。</p><ul><li><strong>泵配置与控制（pump_configuration_and_control）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   pump_configuration_and_control</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">config_t </span><span class="token function" style="color:rgb(80, 250, 123)">pump_configuration_and_control_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   cluster_t </span><span class="token operator">*</span><span class="token plain">cluster </span><span class="token operator">=</span><span class="token plain"> pump_configuration_and_control</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain">pump_configuration_and_control_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> CLUSTER_FLAG_SERVER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>pump_configuration_and_control</code> 的 <code>config_t</code> 结构包括一个构造函数，允许指定最大压力、最大速度和最大流量值。如果未设置，这些值将默认为 null。
一旦实例化了 <code>config_t</code>，这三个值将无法修改。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="属性和命令attributes-and-commands">属性和命令（Attributes and Commands）<a href="#属性和命令attributes-and-commands" class="hash-link" aria-label="Direct link to 属性和命令（Attributes and Commands）" title="Direct link to 属性和命令（Attributes and Commands）">​</a></h3><p>也可以向簇添加其他属性和命令。示例：</p><ul><li><strong>属性：开关（on_off）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">bool</span><span class="token plain"> default_on_off </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   attribute_t </span><span class="token operator">*</span><span class="token plain">attribute </span><span class="token operator">=</span><span class="token plain"> on_off</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">attribute</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create_on_off</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> default_on_off</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>属性：簇修订版（cluster_revision）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint16_t</span><span class="token plain"> default_cluster_revision </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   attribute_t </span><span class="token operator">*</span><span class="token plain">attribute </span><span class="token operator">=</span><span class="token plain"> global</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">attribute</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create_cluster_revision</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> default_cluster_revision</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>命令：切换（toggle）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   command_t </span><span class="token operator">*</span><span class="token plain">command </span><span class="token operator">=</span><span class="token plain"> on_off</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">command</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create_toggle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>命令：移动到指定亮度（move_to_level）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   command_t </span><span class="token operator">*</span><span class="token plain">command </span><span class="token operator">=</span><span class="token plain"> level_control</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">command</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create_move_to_level</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="特性features">特性（Features）<a href="#特性features" class="hash-link" aria-label="Direct link to 特性（Features）" title="Direct link to 特性（Features）">​</a></h3><p>可以向簇添加适用的可选特性。</p><ul><li><strong>特性：标签列表（taglist）：描述符簇（Descriptor cluster）</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   cluster_t</span><span class="token operator">*</span><span class="token plain"> cluster </span><span class="token operator">=</span><span class="token plain"> cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Descriptor</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">Id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   descriptor</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">feature</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token plain">taglist</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="添加自定义数据模型字段">添加自定义数据模型字段<a href="#添加自定义数据模型字段" class="hash-link" aria-label="Direct link to 添加自定义数据模型字段" title="Direct link to 添加自定义数据模型字段">​</a></h3><p>本节演示了如何创建不在 Matter 规范中定义的自定义端点、簇、属性和命令，这些可以特定于厂商。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="端点endpoints">端点（Endpoints）<a href="#端点endpoints" class="hash-link" aria-label="Direct link to 端点（Endpoints）" title="Direct link to 端点（Endpoints）">​</a></h4><p>可以创建非标准端点，不包含任何簇。</p><ul><li><strong>创建端点</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   endpoint_t </span><span class="token operator">*</span><span class="token plain">endpoint </span><span class="token operator">=</span><span class="token plain"> endpoint</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ENDPOINT_FLAG_NONE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="簇clusters-1">簇（Clusters）<a href="#簇clusters-1" class="hash-link" aria-label="Direct link to 簇（Clusters）" title="Direct link to 簇（Clusters）">​</a></h4><p>也可以创建非标准/自定义簇：</p><ul><li><strong>创建簇</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain"> custom_cluster_id </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0x131bfc00</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   cluster_t </span><span class="token operator">*</span><span class="token plain">cluster </span><span class="token operator">=</span><span class="token plain"> cluster</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> custom_cluster_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> CLUSTER_FLAG_SERVER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="属性和命令attributes-and-commands-1">属性和命令（Attributes and Commands）<a href="#属性和命令attributes-and-commands-1" class="hash-link" aria-label="Direct link to 属性和命令（Attributes and Commands）" title="Direct link to 属性和命令（Attributes and Commands）">​</a></h4><p>可以在任何簇上创建非标准/自定义属性：</p><ul><li><strong>创建属性</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain"> custom_attribute_id </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0x0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint16_t</span><span class="token plain"> default_value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   attribute_t </span><span class="token operator">*</span><span class="token plain">attribute </span><span class="token operator">=</span><span class="token plain"> attribute</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> custom_attribute_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ATTRIBUTE_FLAG_NONE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">esp_matter_uint16</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default_value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>创建命令</strong>：</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> esp_err_t </span><span class="token function" style="color:rgb(80, 250, 123)">command_callback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> ConcreteCommandPath </span><span class="token operator">&amp;</span><span class="token plain">command_path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> TLVReader </span><span class="token operator">&amp;</span><span class="token plain">tlv_data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">opaque_ptr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">ESP_LOGI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TAG</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;自定义命令回调&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">uint32_t</span><span class="token plain"> custom_command_id </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0x0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   command_t </span><span class="token operator">*</span><span class="token plain">command </span><span class="token operator">=</span><span class="token plain"> command</span><span class="token double-colon punctuation" style="color:rgb(248, 248, 242)">::</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> custom_command_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> COMMAND_FLAG_ACCEPTED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> command_callback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Matter 数据模型以层次化的方式组织这些组件。一个 Matter 节点包含一个或多个端点（Endpoints），每个端点代表一种特定的设备类型。每个端点由多个簇（Clusters）组成，簇将相关的属性和命令分组在一起。属性存储簇的状态和配置，而命令用于与设备进行交互和控制。</p><p>通过这种方式构建数据模型，Matter 实现了不同厂商设备之间的互操作性和标准化。开发人员可以使用定义好的设备类型、簇、属性和命令来创建应用程序，从而无缝地控制和与 Matter 兼容的设备进行通信。</p><p>Matter 数据模型为设备提供了一种共同的语言和框架，用于描述其功能并与其他设备进行交互，从而为智能家居提供更加统一和一致的体验。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="技术支持与产品讨论">技术支持与产品讨论<a href="#技术支持与产品讨论" class="hash-link" aria-label="Direct link to 技术支持与产品讨论" title="Direct link to 技术支持与产品讨论">​</a></h2><p>感谢您选择我们的产品！我们将为您提供不同的支持方式，确保您在使用我们产品的过程中体验顺畅。我们提供了多种沟通渠道，以满足不同的偏好和需求。</p><div class="table-center"><div class="button_tech_support_container"><a href="https://forum.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="button_forum"></a><a href="https://www.seeedstudio.com/contacts" target="_blank" rel="noopener noreferrer" class="button_email"></a></div><div class="button_tech_support_container"><a href="https://discord.gg/eWkprNDMU7" target="_blank" rel="noopener noreferrer" class="button_discord"></a><a href="https://github.com/Seeed-Studio/wiki-documents/discussions/69" target="_blank" rel="noopener noreferrer" class="button_discussion"></a></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/zh-CN/Sensor/SeeedStudio_XIAO/Matter/CN_matter_development_framework_overview.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-11-27T00:00:00.000Z">Nov 27, 2024</time></b> by <b>Agnes</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cn/xiao_esp32_matter_env/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Matter 开发与 XIAO ESP32 系列</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cn/xiao_espnow/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ESP-NOW 登陆 XIAO ESP32 系列</div></a></nav></div><div>Loading Comments...</div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#教程大纲" class="table-of-contents__link toc-highlight">教程大纲</a></li><li><a href="#理解灯光示例" class="table-of-contents__link toc-highlight">理解灯光示例</a></li><li><a href="#设备初始化" class="table-of-contents__link toc-highlight">设备初始化</a></li><li><a href="#创建-matter-节点" class="table-of-contents__link toc-highlight">创建 Matter 节点</a></li><li><a href="#设置端点的属性" class="table-of-contents__link toc-highlight">设置端点的属性</a></li><li><a href="#创建端点--自动匹配簇" class="table-of-contents__link toc-highlight">创建端点 &amp; 自动匹配簇</a></li><li><a href="#如何实现自动匹配簇" class="table-of-contents__link toc-highlight">如何实现自动匹配簇？</a></li><li><a href="#初次设置-matter-设备的默认值" class="table-of-contents__link toc-highlight">初次设置 Matter 设备的默认值</a><ul><li><a href="#总结步骤" class="table-of-contents__link toc-highlight">总结步骤：</a></li></ul></li><li><a href="#数据更新与延迟持久化" class="table-of-contents__link toc-highlight">数据更新与延迟持久化</a></li><li><a href="#定义自定义数据模型" class="table-of-contents__link toc-highlight">定义自定义数据模型</a><ul><li><a href="#端点" class="table-of-contents__link toc-highlight">端点</a></li><li><a href="#簇clusters" class="table-of-contents__link toc-highlight">簇（Clusters）</a></li><li><a href="#属性和命令attributes-and-commands" class="table-of-contents__link toc-highlight">属性和命令（Attributes and Commands）</a></li><li><a href="#特性features" class="table-of-contents__link toc-highlight">特性（Features）</a></li><li><a href="#添加自定义数据模型字段" class="table-of-contents__link toc-highlight">添加自定义数据模型字段</a><ul><li><a href="#端点endpoints" class="table-of-contents__link toc-highlight">端点（Endpoints）</a></li><li><a href="#簇clusters-1" class="table-of-contents__link toc-highlight">簇（Clusters）</a></li><li><a href="#属性和命令attributes-and-commands-1" class="table-of-contents__link toc-highlight">属性和命令（Attributes and Commands）</a></li></ul></li></ul></li><li><a href="#技术支持与产品讨论" class="table-of-contents__link toc-highlight">技术支持与产品讨论</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Navigation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Getting_Started/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/Sensor_Network/">Sensor and Sensing</a></li><li class="footer__item"><a class="footer__link-item" href="/Network/">Network</a></li><li class="footer__item"><a class="footer__link-item" href="/Edge_Computing/">Edge Computing</a></li><li class="footer__item"><a class="footer__link-item" href="/Cloud/">Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/Solutions/">Solutions</a></li></ul></div><div class="col footer__col"><div class="footer__title">Ecosystem</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/QqMgVwHT3X" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://project.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Project Hub</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/ecosystem/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Partners</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/distributors.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Distributors</a></li></ul></div><div class="col footer__col"><div class="footer__title">Quick Guide</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bazzar</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/get_help/HowToGetHelp" target="_blank" rel="noopener noreferrer" class="footer__link-item">How to get help</a></li><li class="footer__item"><a href="https://support.seeedstudio.com/knowledgebase" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQs</a></li><li class="footer__item"><a href="https://forum.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/get_help/TechnicalSupport" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technical Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.seeedstudio.com/about-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Seeed</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/join-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Join us</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/contacts" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/blog/2020/04/22/seeed-in-the-news/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Press</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Seeed Studio, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.aa2192b9.js"></script>
<script src="/assets/js/main.ebdcbf37.js"></script>
</body>
</html>