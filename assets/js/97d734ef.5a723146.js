"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[66016],{15680:(e,t,r)=>{r.d(t,{xA:()=>u,yg:()=>f});var i=r(96540);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,i,a=function(e,t){if(null==e)return{};var r,i,a={},n=Object.keys(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=i.createContext({}),p=function(e){var t=i.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},y=i.forwardRef((function(e,t){var r=e.components,a=e.mdxType,n=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(r),y=a,f=c["".concat(s,".").concat(y)]||c[y]||d[y]||n;return r?i.createElement(f,o(o({ref:t},u),{},{components:r})):i.createElement(f,o({ref:t},u))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=r.length,o=new Array(n);o[0]=y;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:a,o[1]=l;for(var p=2;p<n;p++)o[p]=r[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,r)}y.displayName="MDXCreateElement"},87898:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>n,metadata:()=>l,toc:()=>p});var i=r(9668),a=(r(96540),r(15680));const n={description:"MP3 Player with XIAO ESP32S3",title:"MP3 Player",keywords:["ESP32S3","XIAO","ReSpeaker"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/respeaker_player_spiffs",last_update:{date:"7/1/2024",author:"Jessie"}},o=void 0,l={unversionedId:"Sensor/ReSpeaker_Lite/XIAO_ESP32_S3/respeaker_player_spiffs",id:"Sensor/ReSpeaker_Lite/XIAO_ESP32_S3/respeaker_player_spiffs",title:"MP3 Player",description:"MP3 Player with XIAO ESP32S3",source:"@site/docs/Sensor/ReSpeaker_Lite/XIAO_ESP32_S3/respeaker_player_spiffs.md",sourceDirName:"Sensor/ReSpeaker_Lite/XIAO_ESP32_S3",slug:"/respeaker_player_spiffs",permalink:"/respeaker_player_spiffs",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/ReSpeaker_Lite/XIAO_ESP32_S3/respeaker_player_spiffs.md",tags:[],version:"current",lastUpdatedBy:"Jessie",lastUpdatedAt:1719792e3,formattedLastUpdatedAt:"Jul 1, 2024",frontMatter:{description:"MP3 Player with XIAO ESP32S3",title:"MP3 Player",keywords:["ESP32S3","XIAO","ReSpeaker"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/respeaker_player_spiffs",last_update:{date:"7/1/2024",author:"Jessie"}},sidebar:"ProductSidebar",previous:{title:"Star Wars Theme Player",permalink:"/respeaker_streams_memory"},next:{title:"MQTT Audio Streaming",permalink:"/respeaker_steams_mqtt"}},s={},p=[{value:"Library Required",id:"library-required",level:3},{value:"Functionality",id:"functionality",level:3},{value:"Uploading Files to SPIFFS",id:"uploading-files-to-spiffs",level:3},{value:"Code",id:"code",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Customization",id:"customization",level:3}],u={toc:p},c="wrapper";function d(e){let{components:t,...r}=e;return(0,a.yg)(c,(0,i.A)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"This project demonstrates how to use the reSpeaker Lite board to play MP3 files stored in the SPIFFS file system."),(0,a.yg)("h3",{id:"library-required"},"Library Required"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://github.com/limengdu/reSpeaker_Lite-Arduino-Library.git"},"ReSpeaker Lite library")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://github.com/limengdu/reSpeaker_Lite-arduino-libhelix"},"ReSpeaker Lite arduino libhelix"))),(0,a.yg)("h3",{id:"functionality"},"Functionality"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Plays MP3 files from the SPIFFS file system"),(0,a.yg)("li",{parentName:"ul"},"Utilizes the I2S interface for audio output"),(0,a.yg)("li",{parentName:"ul"},"Supports metadata extraction and callback"),(0,a.yg)("li",{parentName:"ul"},"Easy-to-use AudioPlayer class for seamless audio playback")),(0,a.yg)("h3",{id:"uploading-files-to-spiffs"},"Uploading Files to SPIFFS"),(0,a.yg)("p",null,"You can refer to the ",(0,a.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/xiao_esp32s3_sense_filesystem/#serial-peripheral-interface-flash-file-system-spiffs"},"Wiki")," here."),(0,a.yg)("p",null,'Make sure you have the necessary tools to upload files to SPIFFS. You can use the "ESP32 Sketch Data Upload" tool in the Arduino IDE or an external tool like "ESP32 File Uploader".'),(0,a.yg)("p",null,'Create a folder named "data" in your sketch directory and place the MP3 files you want to play inside it.'),(0,a.yg)("p",null,"Upload the files to SPIFFS using the chosen tool."),(0,a.yg)("h3",{id:"code"},"Code"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-cpp"},'#include "AudioTools.h"\n#include "AudioLibs/AudioSourceSPIFFS.h"\n#include "AudioCodecs/CodecMP3Helix.h"\n\nconst char *startFilePath="/";\nconst char* ext="mp3";\nAudioSourceSPIFFS source(startFilePath, ext);\nI2SStream i2s;\nMP3DecoderHelix decoder;\nAudioPlayer player(source, i2s, decoder);\n\nvoid printMetaData(MetaDataType type, const char* str, int len){\n  Serial.print("==> ");\n  Serial.print(toStr(type));\n  Serial.print(": ");\n  Serial.println(str);\n}\n\nvoid setup() {\n  Serial.begin(115200);\n  AudioLogger::instance().begin(Serial, AudioLogger::Info);\n\n  // setup output\n  auto cfg = i2s.defaultConfig(TX_MODE);\n  i2s.begin(cfg);\n\n  // setup player\n  //source.setFileFilter("*Bob Dylan*");\n  player.setMetadataCallback(printMetaData);\n  player.begin();\n}\n\nvoid loop() {\n  player.copy();\n}\n')),(0,a.yg)("h3",{id:"configuration"},"Configuration"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"startFilePath"),': The directory path where the MP3 files are located in SPIFFS (default: "/").'),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"ext"),': The file extension of the audio files (default: "mp3").'),(0,a.yg)("p",null,"You can modify these constants in the sketch to match your specific file structure and requirements."),(0,a.yg)("h3",{id:"customization"},"Customization"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"printMetaData"),": This function is called when metadata is extracted from the audio file. You can customize the function to handle the metadata according to your needs."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"AudioSourceSPIFFS"),': You can change the file filter by uncommenting the line //source.setFileFilter("',(0,a.yg)("em",{parentName:"p"},"Bob Dylan"),'"); and replacing the filter with your desired criteria.'))}d.isMDXComponent=!0}}]);