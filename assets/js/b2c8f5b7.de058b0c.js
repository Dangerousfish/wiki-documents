"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[79816],{15680:(e,n,i)=>{i.d(n,{xA:()=>c,yg:()=>g});var t=i(96540);function r(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function o(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function a(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?o(Object(i),!0).forEach((function(n){r(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function s(e,n){if(null==e)return{};var i,t,r=function(e,n){if(null==e)return{};var i,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)i=o[t],n.indexOf(i)>=0||(r[i]=e[i]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)i=o[t],n.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var l=t.createContext({}),p=function(e){var n=t.useContext(l),i=n;return e&&(i="function"==typeof e?e(n):a(a({},n),e)),i},c=function(e){var n=p(e.components);return t.createElement(l.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},S=t.forwardRef((function(e,n){var i=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(i),S=r,g=u["".concat(l,".").concat(S)]||u[S]||d[S]||o;return i?t.createElement(g,a(a({ref:n},c),{},{components:i})):t.createElement(g,a({ref:n},c))}));function g(e,n){var i=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=i.length,a=new Array(o);a[0]=S;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[u]="string"==typeof e?e:r,a[1]=s;for(var p=2;p<o;p++)a[p]=i[p];return t.createElement.apply(null,a)}return t.createElement.apply(null,i)}S.displayName="MDXCreateElement"},54678:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var t=i(9668),r=(i(96540),i(15680));const o={description:"This article describes how to use SenseCraft AI's libraries on XIAO.",title:"As a Sensor",image:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/uart_connection.png",slug:"/sensecraft_ai_output_libraries_xiao",sidebar_position:3,last_update:{date:"12/04/2024",author:"Citric"}},a="Using XIAO ESP32S3 Sense as an AI Sensor with SenseCraft AI",s={unversionedId:"Cloud_Chain/SenseCraft/SenseCraft_AI/Output/xiao_esp32s3_sense/sensecraft_xiao_esp32s3_libraries",id:"Cloud_Chain/SenseCraft/SenseCraft_AI/Output/xiao_esp32s3_sense/sensecraft_xiao_esp32s3_libraries",title:"As a Sensor",description:"This article describes how to use SenseCraft AI's libraries on XIAO.",source:"@site/docs/Cloud_Chain/SenseCraft/SenseCraft_AI/Output/xiao_esp32s3_sense/sensecraft_xiao_esp32s3_libraries.md",sourceDirName:"Cloud_Chain/SenseCraft/SenseCraft_AI/Output/xiao_esp32s3_sense",slug:"/sensecraft_ai_output_libraries_xiao",permalink:"/sensecraft_ai_output_libraries_xiao",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Cloud_Chain/SenseCraft/SenseCraft_AI/Output/xiao_esp32s3_sense/sensecraft_xiao_esp32s3_libraries.md",tags:[],version:"current",lastUpdatedBy:"Citric",lastUpdatedAt:1733270400,formattedLastUpdatedAt:"Dec 4, 2024",sidebarPosition:3,frontMatter:{description:"This article describes how to use SenseCraft AI's libraries on XIAO.",title:"As a Sensor",image:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/uart_connection.png",slug:"/sensecraft_ai_output_libraries_xiao",sidebar_position:3,last_update:{date:"12/04/2024",author:"Citric"}},sidebar:"ProductSidebar",previous:{title:"Via MQTT output",permalink:"/sensecraft_ai_output_mqtt_xiao"},next:{title:"Use SSCMACore library output model info",permalink:"/sensecraft_ai_sscmacore_library"}},l={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1. Access the SenseCraft AI Vision Workspace and connect the XIAO ESP32S3 Sense",id:"step-1-access-the-sensecraft-ai-vision-workspace-and-connect-the-xiao-esp32s3-sense",level:2},{value:"Step 2. Ensure a Model is Loaded on the XIAO ESP32S3 Sense",id:"step-2-ensure-a-model-is-loaded-on-the-xiao-esp32s3-sense",level:2},{value:"Step 3. Prepare the way and program you want to use",id:"step-3-prepare-the-way-and-program-you-want-to-use",level:2},{value:"Option 1. UART Communication",id:"option-1-uart-communication",level:3},{value:"Option 2. I2C Communication",id:"option-2-i2c-communication",level:3},{value:"Option 3. SPI Communication",id:"option-3-spi-communication",level:3},{value:"Step 4: Upload the Code and Run",id:"step-4-upload-the-code-and-run",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],c={toc:p},u="wrapper";function d(e){let{components:n,...i}=e;return(0,r.yg)(u,(0,t.A)({},c,i,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"using-xiao-esp32s3-sense-as-an-ai-sensor-with-sensecraft-ai"},"Using XIAO ESP32S3 Sense as an AI Sensor with SenseCraft AI"),(0,r.yg)("p",null,"This wiki provides a step-by-step guide on how to configure the output of a model on SenseCraft AI and use the XIAO ESP32S3 Sense as an AI sensor. By following these instructions, you will learn how to connect the XIAO ESP32S3 Sense to your computer, select the appropriate output method, and retrieve the model data using different communication protocols such as UART, I2C, and SPI."),(0,r.yg)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.yg)("p",null,"Before proceeding, ensure that you have the following:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"XIAO ESP32S3 Sense"),(0,r.yg)("li",{parentName:"ul"},"An additional XIAO board (e.g., XIAO ESP32C3) for receiving the model data"),(0,r.yg)("li",{parentName:"ul"},"USB-C data cable for connecting the XIAO ESP32S3 Sense to your computer"),(0,r.yg)("li",{parentName:"ul"},"Arduino IDE with the ",(0,r.yg)("a",{parentName:"li",href:"https://github.com/Seeed-Studio/Seeed_Arduino_SSCMA/tree/main"},"Seeed_Arduino_SSCMA")," library installed")),(0,r.yg)("div",{class:"table-center"},(0,r.yg)("table",{align:"center"},(0,r.yg)("tr",null,(0,r.yg)("th",null,"XIAO ESP32S3 Sense")),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SeeedStudio-XIAO-ESP32S3/img/xiaoesp32s3sense.jpg",style:{width:250,height:"auto"}})))),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,r.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/XIAO-ESP32S3-Sense-p-5639.html"},(0,r.yg)("strong",null,(0,r.yg)("span",null,(0,r.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,r.yg)("h2",{id:"step-1-access-the-sensecraft-ai-vision-workspace-and-connect-the-xiao-esp32s3-sense"},"Step 1. Access the SenseCraft AI Vision Workspace and connect the XIAO ESP32S3 Sense"),(0,r.yg)("p",null,"Open your web browser and navigate to the SenseCraft AI Vision Workspace page."),(0,r.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,r.yg)("a",{class:"get_one_now_item",href:"https://sensecraft.seeed.cc/ai/#/device/local?time=1733300644024"},(0,r.yg)("strong",null,(0,r.yg)("span",null,(0,r.yg)("font",{color:"FFFFFF",size:"4"},"One-Click Direct \ud83d\uddb1\ufe0f"))))),(0,r.yg)("br",null),(0,r.yg)("p",null,"Select the XIAO ESP32S3 Sense board from the available devices."),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/43.png",style:{width:1e3,height:"auto"}})),(0,r.yg)("p",null,"Using the USB-C cable, connect your XIAO ESP32S3 Sense board to your computer. Once connected, click the ",(0,r.yg)("strong",{parentName:"p"},"Connect")," button located in the top-left corner of the SenseCraft AI Vision Workspace page."),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/44.png",style:{width:800,height:"auto"}})),(0,r.yg)("h2",{id:"step-2-ensure-a-model-is-loaded-on-the-xiao-esp32s3-sense"},"Step 2. Ensure a Model is Loaded on the XIAO ESP32S3 Sense"),(0,r.yg)("p",null,"Before proceeding, make sure that your XIAO ESP32S3 Sense board has a trained model loaded. If you haven't loaded a model yet, refer to the SenseCraft AI documentation on how to train and deploy models to your device."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://wiki.seeedstudio.com/sensecraft_ai_pretrained_models_for_xiao/"},"Using a model for XIAO ESP32S3 Sense"))),(0,r.yg)("p",null,"If you want to use your own trained model, you can refer to the following two Wikis."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://wiki.seeedstudio.com/sensecraft_ai_training_classification/"},"Type of training - Classification")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://wiki.seeedstudio.com/sensecraft_ai_training_object_detection/"},"Type of training - Object Detection"))),(0,r.yg)("h2",{id:"step-3-prepare-the-way-and-program-you-want-to-use"},"Step 3. Prepare the way and program you want to use"),(0,r.yg)("p",null,"XIAO supports outputting model results via UART, IIC or SPI, you can choose how you want to output the results according to the actual situation."),(0,r.yg)("h3",{id:"option-1-uart-communication"},"Option 1. UART Communication"),(0,r.yg)("p",null,"Connect the TX and RX pins of the two XIAO boards together. For the AI Sensor (already modeled) XIAO ESP32S3 Sense, the output pins are defined as:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"TX: GPIO43")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"RX: GPIO44"))),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/uart_connection.png",style:{width:1e3,height:"auto"}})),(0,r.yg)("p",null,"Download the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/Seeed-Studio/Seeed_Arduino_SSCMA/tree/main"},"Seeed_Arduino_SSCMA")," library from GitHub and add it to your Arduino environment."),(0,r.yg)("div",{class:"github_container",style:{textAlign:"center"}},(0,r.yg)("a",{class:"github_item",href:"https://github.com/Seeed-Studio/Seeed_Arduino_SSCMA/tree/main"},(0,r.yg)("strong",null,(0,r.yg)("span",null,(0,r.yg)("font",{color:"FFFFFF",size:"4"}," Download the Library")))," ",(0,r.yg)("svg",{"aria-hidden":"true",focusable:"false",role:"img",className:"mr-2",viewBox:"-3 10 9 1",width:16,height:16,fill:"currentColor",style:{textAlign:"center",display:"inline-block",userSelect:"none",verticalAlign:"text-bottom",overflow:"visible"}},(0,r.yg)("path",{d:"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"})))),(0,r.yg)("br",null),(0,r.yg)("p",null,"Use the code from the following example:"),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"Set the baud rate to 921600 with 8 data bits, no parity, and 1 stop bit (8N1).")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cpp"},'#include <Seeed_Arduino_SSCMA.h>\n\n#ifdef ESP32\n#include <HardwareSerial.h>\n\n// Define two Serial devices mapped to the two internal UARTs\nHardwareSerial atSerial(0);\n\n#else\n#define atSerial Serial1\n#endif\n\nSSCMA AI;\n\nvoid setup()\n{\n    Serial.begin(9600);\n    AI.begin(&atSerial);\n}\n\nvoid loop()\n{\n    if (!AI.invoke(1,false,true))\n    {\n        Serial.println("invoke success");\n        Serial.print("perf: prepocess=");\n        Serial.print(AI.perf().prepocess);\n        Serial.print(", inference=");\n        Serial.print(AI.perf().inference);\n        Serial.print(", postpocess=");\n        Serial.println(AI.perf().postprocess);\n\n        for (int i = 0; i < AI.boxes().size(); i++)\n        {\n            Serial.print("Box[");\n            Serial.print(i);\n            Serial.print("] target=");\n            Serial.print(AI.boxes()[i].target);\n            Serial.print(", score=");\n            Serial.print(AI.boxes()[i].score);\n            Serial.print(", x=");\n            Serial.print(AI.boxes()[i].x);\n            Serial.print(", y=");\n            Serial.print(AI.boxes()[i].y);\n            Serial.print(", w=");\n            Serial.print(AI.boxes()[i].w);\n            Serial.print(", h=");\n            Serial.println(AI.boxes()[i].h);\n        }\n        for (int i = 0; i < AI.classes().size(); i++)\n        {\n            Serial.print("Class[");\n            Serial.print(i);\n            Serial.print("] target=");\n            Serial.print(AI.classes()[i].target);\n            Serial.print(", score=");\n            Serial.println(AI.classes()[i].score);\n        }\n        for (int i = 0; i < AI.points().size(); i++)\n        {\n            Serial.print("Point[");\n            Serial.print(i);\n            Serial.print("]: target=");\n            Serial.print(AI.points()[i].target);\n            Serial.print(", score=");\n            Serial.print(AI.points()[i].score);\n            Serial.print(", x=");\n            Serial.print(AI.points()[i].x);\n            Serial.print(", y=");\n            Serial.println(AI.points()[i].y);\n        }\n        for (int i = 0; i < AI.keypoints().size(); i++)\n        {\n            Serial.print("keypoint[");\n            Serial.print(i);\n            Serial.print("] target=");\n            Serial.print(AI.keypoints()[i].box.target);\n            Serial.print(", score=");\n            Serial.print(AI.keypoints()[i].box.score);\n            Serial.print(", box:[x=");\n            Serial.print(AI.keypoints()[i].box.x);\n            Serial.print(", y=");\n            Serial.print(AI.keypoints()[i].box.y);\n            Serial.print(", w=");\n            Serial.print(AI.keypoints()[i].box.w);\n            Serial.print(", h=");\n            Serial.print(AI.keypoints()[i].box.h);\n            Serial.print("], points:[");\n            for (int j = 0; j < AI.keypoints()[i].points.size(); j++)\n            {\n                Serial.print("[");\n                Serial.print(AI.keypoints()[i].points[j].x);\n                Serial.print(",");\n                Serial.print(AI.keypoints()[i].points[j].y);\n                Serial.print("],");\n            }\n            Serial.println("]");\n        }\n        if(!AI.last_image().isEmpty())\n        {\n            Serial.print("Last image:");\n            Serial.println(AI.last_image().c_str());\n        }\n    }\n}\n')),(0,r.yg)("p",null,"If all goes well, you will see the output message of the model result as shown below."),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/70.png",style:{width:1e3,height:"auto"}})),(0,r.yg)("h3",{id:"option-2-i2c-communication"},"Option 2. I2C Communication"),(0,r.yg)("p",null,"Connect the SDA and SCL pins of the two XIAO boards together. For the AI Sensor (already modeled) XIAO ESP32S3 Sense, the output pins are defined as:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"SDA: GPIO5")," (with pull-up resistor)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"SCL: GPIO6")," (with pull-up resistor)"),(0,r.yg)("li",{parentName:"ul"},"I2C slave address to ",(0,r.yg)("inlineCode",{parentName:"li"},"0x62"))),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/iic_connection.png",style:{width:1e3,height:"auto"}})),(0,r.yg)("p",null,"Download the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/Seeed-Studio/Seeed_Arduino_SSCMA/tree/main"},"Seeed_Arduino_SSCMA")," library from GitHub and add it to your Arduino environment."),(0,r.yg)("div",{class:"github_container",style:{textAlign:"center"}},(0,r.yg)("a",{class:"github_item",href:"https://github.com/Seeed-Studio/Seeed_Arduino_SSCMA/tree/main"},(0,r.yg)("strong",null,(0,r.yg)("span",null,(0,r.yg)("font",{color:"FFFFFF",size:"4"}," Download the Library")))," ",(0,r.yg)("svg",{"aria-hidden":"true",focusable:"false",role:"img",className:"mr-2",viewBox:"-3 10 9 1",width:16,height:16,fill:"currentColor",style:{textAlign:"center",display:"inline-block",userSelect:"none",verticalAlign:"text-bottom",overflow:"visible"}},(0,r.yg)("path",{d:"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"})))),(0,r.yg)("br",null),(0,r.yg)("p",null,"Use the code from the following example:"),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"Use the following protocol for I2C communication:"),(0,r.yg)("ul",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ul"},"READ: Send bytes 0x10, 0x01, LEN << 8, LEN & 0xff"),(0,r.yg)("li",{parentName:"ul"},"WRITE: Send bytes 0x10, 0x02, LEN << 8, LEN & 0xff"),(0,r.yg)("li",{parentName:"ul"},"AVAIL (to check data availability): Send bytes 0x10, 0x03"),(0,r.yg)("li",{parentName:"ul"},"RESET (to clear buffer): Send bytes 0x10, 0x06"))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cpp"},'#include <Seeed_Arduino_SSCMA.h>\n#include <Wire.h>\n\nSSCMA AI;\n\nvoid setup()\n{\n    Wire.begin();\n    AI.begin(&Wire);\n    Serial.begin(9600);\n}\n\nvoid loop()\n{\n    if (!AI.invoke())\n    {\n        Serial.println("invoke success");\n        Serial.print("perf: prepocess=");\n        Serial.print(AI.perf().prepocess);\n        Serial.print(", inference=");\n        Serial.print(AI.perf().inference);\n        Serial.print(", postpocess=");\n        Serial.println(AI.perf().postprocess);\n\n        for (int i = 0; i < AI.boxes().size(); i++)\n        {\n            Serial.print("Box[");\n            Serial.print(i);\n            Serial.print("] target=");\n            Serial.print(AI.boxes()[i].target);\n            Serial.print(", score=");\n            Serial.print(AI.boxes()[i].score);\n            Serial.print(", x=");\n            Serial.print(AI.boxes()[i].x);\n            Serial.print(", y=");\n            Serial.print(AI.boxes()[i].y);\n            Serial.print(", w=");\n            Serial.print(AI.boxes()[i].w);\n            Serial.print(", h=");\n            Serial.println(AI.boxes()[i].h);\n        }\n        for (int i = 0; i < AI.classes().size(); i++)\n        {\n            Serial.print("Class[");\n            Serial.print(i);\n            Serial.print("] target=");\n            Serial.print(AI.classes()[i].target);\n            Serial.print(", score=");\n            Serial.println(AI.classes()[i].score);\n        }\n        for (int i = 0; i < AI.points().size(); i++)\n        {\n            Serial.print("Point[");\n            Serial.print(i);\n            Serial.print("]: target=");\n            Serial.print(AI.points()[i].target);\n            Serial.print(", score=");\n            Serial.print(AI.points()[i].score);\n            Serial.print(", x=");\n            Serial.print(AI.points()[i].x);\n            Serial.print(", y=");\n            Serial.println(AI.points()[i].y);\n        }\n        for (int i = 0; i < AI.keypoints().size(); i++)\n        {\n            Serial.print("keypoint[");\n            Serial.print(i);\n            Serial.print("] target=");\n            Serial.print(AI.keypoints()[i].box.target);\n            Serial.print(", score=");\n            Serial.print(AI.keypoints()[i].box.score);\n            Serial.print(", box:[x=");\n            Serial.print(AI.keypoints()[i].box.x);\n            Serial.print(", y=");\n            Serial.print(AI.keypoints()[i].box.y);\n            Serial.print(", w=");\n            Serial.print(AI.keypoints()[i].box.w);\n            Serial.print(", h=");\n            Serial.print(AI.keypoints()[i].box.h);\n            Serial.print("], points:[");\n            for (int j = 0; j < AI.keypoints()[i].points.size(); j++)\n            {\n                Serial.print("[");\n                Serial.print(AI.keypoints()[i].points[j].x);\n                Serial.print(",");\n                Serial.print(AI.keypoints()[i].points[j].y);\n                Serial.print("],");\n            }\n            Serial.println("]");\n        }\n    }\n}\n')),(0,r.yg)("p",null,"If all goes well, you will see the output message of the model result as shown below."),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/71.png",style:{width:1e3,height:"auto"}})),(0,r.yg)("h3",{id:"option-3-spi-communication"},"Option 3. SPI Communication"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Connect the following pins of the two XIAO boards together.  For the AI Sensor (already modeled) XIAO ESP32S3 Sense, the output pins are defined as:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"MOSI: GPIO9")," (with pull-up resistor)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"MISO: GPIO8")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"SCLK: GPIO7")," (with pull-up resistor)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"CS: GPIO4")," (with pull-up resistor)")),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/spi_connection.png",style:{width:1e3,height:"auto"}})),(0,r.yg)("ol",{start:2},(0,r.yg)("li",{parentName:"ol"},"Download the ",(0,r.yg)("a",{parentName:"li",href:"https://github.com/Seeed-Studio/Seeed_Arduino_SSCMA/tree/main"},"Seeed_Arduino_SSCMA")," library from GitHub and add it to your Arduino environment.")),(0,r.yg)("div",{class:"github_container",style:{textAlign:"center"}},(0,r.yg)("a",{class:"github_item",href:"https://github.com/Seeed-Studio/Seeed_Arduino_SSCMA/tree/main"},(0,r.yg)("strong",null,(0,r.yg)("span",null,(0,r.yg)("font",{color:"FFFFFF",size:"4"}," Download the Library")))," ",(0,r.yg)("svg",{"aria-hidden":"true",focusable:"false",role:"img",className:"mr-2",viewBox:"-3 10 9 1",width:16,height:16,fill:"currentColor",style:{textAlign:"center",display:"inline-block",userSelect:"none",verticalAlign:"text-bottom",overflow:"visible"}},(0,r.yg)("path",{d:"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"})))),(0,r.yg)("br",null),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},"Modify the code from the provided examples to use SPI communication.")),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"Use the following protocol for SPI communication:"),(0,r.yg)("ul",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ul"},"READ: Send bytes 0x10, 0x01, LEN << 8, LEN & 0xff"),(0,r.yg)("li",{parentName:"ul"},"WRITE: Send bytes 0x10, 0x02, LEN << 8, LEN & 0xff"),(0,r.yg)("li",{parentName:"ul"},"AVAIL (to check data availability): Send bytes 0x10, 0x03"),(0,r.yg)("li",{parentName:"ul"},"RESET (to clear buffer): Send bytes 0x10, 0x06"))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-cpp"},'#include <Seeed_Arduino_SSCMA.h>\n#include <SPI.h>\n\nSSCMA AI;\n\nvoid setup()\n{\n    SPI.begin(SCK, MISO, MOSI, -1);\n    AI.begin(&SPI, D3, -1, -1);\n    Serial.begin(9600);\n}\n\nvoid loop()\n{\n    if (!AI.invoke())\n    {\n        Serial.println("invoke success");\n        Serial.print("perf: prepocess=");\n        Serial.print(AI.perf().prepocess);\n        Serial.print(", inference=");\n        Serial.print(AI.perf().inference);\n        Serial.print(", postpocess=");\n        Serial.println(AI.perf().postprocess);\n\n        for (int i = 0; i < AI.boxes().size(); i++)\n        {\n            Serial.print("Box[");\n            Serial.print(i);\n            Serial.print("] target=");\n            Serial.print(AI.boxes()[i].target);\n            Serial.print(", score=");\n            Serial.print(AI.boxes()[i].score);\n            Serial.print(", x=");\n            Serial.print(AI.boxes()[i].x);\n            Serial.print(", y=");\n            Serial.print(AI.boxes()[i].y);\n            Serial.print(", w=");\n            Serial.print(AI.boxes()[i].w);\n            Serial.print(", h=");\n            Serial.println(AI.boxes()[i].h);\n        }\n        for (int i = 0; i < AI.classes().size(); i++)\n        {\n            Serial.print("Class[");\n            Serial.print(i);\n            Serial.print("] target=");\n            Serial.print(AI.classes()[i].target);\n            Serial.print(", score=");\n            Serial.println(AI.classes()[i].score);\n        }\n        for (int i = 0; i < AI.points().size(); i++)\n        {\n            Serial.print("Point[");\n            Serial.print(i);\n            Serial.print("]: target=");\n            Serial.print(AI.points()[i].target);\n            Serial.print(", score=");\n            Serial.print(AI.points()[i].score);\n            Serial.print(", x=");\n            Serial.print(AI.points()[i].x);\n            Serial.print(", y=");\n            Serial.println(AI.points()[i].y);\n        }\n        for (int i = 0; i < AI.keypoints().size(); i++)\n        {\n            Serial.print("keypoint[");\n            Serial.print(i);\n            Serial.print("] target=");\n            Serial.print(AI.keypoints()[i].box.target);\n            Serial.print(", score=");\n            Serial.print(AI.keypoints()[i].box.score);\n            Serial.print(", box:[x=");\n            Serial.print(AI.keypoints()[i].box.x);\n            Serial.print(", y=");\n            Serial.print(AI.keypoints()[i].box.y);\n            Serial.print(", w=");\n            Serial.print(AI.keypoints()[i].box.w);\n            Serial.print(", h=");\n            Serial.print(AI.keypoints()[i].box.h);\n            Serial.print("], points:[");\n            for (int j = 0; j < AI.keypoints()[i].points.size(); j++)\n            {\n                Serial.print("[");\n                Serial.print(AI.keypoints()[i].points[j].x);\n                Serial.print(",");\n                Serial.print(AI.keypoints()[i].points[j].y);\n                Serial.print("],");\n            }\n            Serial.println("]");\n        }\n    }\n}\n')),(0,r.yg)("p",null,"If all goes well, you will see the output message of the model result as shown below."),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/72.png",style:{width:1e3,height:"auto"}})),(0,r.yg)("h2",{id:"step-4-upload-the-code-and-run"},"Step 4: Upload the Code and Run"),(0,r.yg)("p",null,"Open the appropriate example code in the Arduino IDE based on your chosen communication protocol. Verify and upload the code to the receiving XIAO board. Open the serial monitor in the Arduino IDE to view the received model data."),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCraft_AI/img2/73.png",style:{width:1e3,height:"auto"}})),(0,r.yg)("h2",{id:"conclusion"},"Conclusion"),(0,r.yg)("p",null,"By following this step-by-step guide, you have successfully configured the output of a model on SenseCraft AI and used the XIAO ESP32S3 Sense as an AI sensor. You can now retrieve the model data using different communication protocols such as UART, I2C, or SPI, depending on your project requirements."),(0,r.yg)("p",null,"Remember to refer to the provided example code and make necessary modifications based on your specific setup and communication protocol choice."),(0,r.yg)("p",null,"If you encounter any issues or have further questions, please consult the Seeed Studio documentation or seek assistance from the community forums."),(0,r.yg)("p",null,"Happy sensing with your XIAO ESP32S3 Sense and SenseCraft AI!"),(0,r.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,r.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://discord.com/invite/QqMgVwHT3X",class:"button_tech_support_sensecap"}),(0,r.yg)("a",{href:"https://support.sensecapmx.com/portal/en/home",class:"button_tech_support_sensecap3"})),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"mailto:support@sensecapmx.com",class:"button_tech_support_sensecap2"}),(0,r.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}d.isMDXComponent=!0}}]);