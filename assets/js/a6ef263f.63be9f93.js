"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[31576],{15680:(e,t,i)=>{i.d(t,{xA:()=>d,yg:()=>u});var n=i(96540);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var s=n.createContext({}),c=function(e){var t=n.useContext(s),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},d=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(i),y=a,u=p["".concat(s,".").concat(y)]||p[y]||g[y]||r;return i?n.createElement(u,o(o({ref:t},d),{},{components:i})):n.createElement(u,o({ref:t},d))}));function u(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=i.length,o=new Array(r);o[0]=y;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var c=2;c<r;c++)o[c]=i[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,i)}y.displayName="MDXCreateElement"},92470:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>g,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var n=i(9668),a=(i(96540),i(15680));const r={description:"Connect SenseCAP T1000 Tracker to AWS",title:"AWS Cloud Services",keywords:["Tracker","AWS"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/SenseCAP_T1000_Tracker_AWS",last_update:{date:"12/4/2024",author:"Leo"}},o=void 0,l={unversionedId:"Sensor/SenseCAP/SenseCAP_T1000_Tracker/Integrated_with_LoRaWAN_Network_Server/AWS_Service",id:"Sensor/SenseCAP/SenseCAP_T1000_Tracker/Integrated_with_LoRaWAN_Network_Server/AWS_Service",title:"AWS Cloud Services",description:"Connect SenseCAP T1000 Tracker to AWS",source:"@site/docs/Sensor/SenseCAP/SenseCAP_T1000_Tracker/Integrated_with_LoRaWAN_Network_Server/AWS_Service.md",sourceDirName:"Sensor/SenseCAP/SenseCAP_T1000_Tracker/Integrated_with_LoRaWAN_Network_Server",slug:"/SenseCAP_T1000_Tracker_AWS",permalink:"/SenseCAP_T1000_Tracker_AWS",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/SenseCAP/SenseCAP_T1000_Tracker/Integrated_with_LoRaWAN_Network_Server/AWS_Service.md",tags:[],version:"current",lastUpdatedBy:"Leo",lastUpdatedAt:1733270400,formattedLastUpdatedAt:"Dec 4, 2024",frontMatter:{description:"Connect SenseCAP T1000 Tracker to AWS",title:"AWS Cloud Services",keywords:["Tracker","AWS"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/SenseCAP_T1000_Tracker_AWS",last_update:{date:"12/4/2024",author:"Leo"}},sidebar:"ProductSidebar",previous:{title:"Connect to Loriot",permalink:"/SenseCAP_T1000_Tracker_Loriot"},next:{title:"TTN Mapper Configuration",permalink:"/ttn_mapper_for_SenseCAP_T1000"}},s={},c=[{value:"Add Gateway",id:"add-gateway",level:2},{value:"Configure your gateway",id:"configure-your-gateway",level:2},{value:"Gateway Certificate",id:"gateway-certificate",level:3},{value:"Gateway Permission",id:"gateway-permission",level:3},{value:"Gateway Configuration",id:"gateway-configuration",level:3},{value:"Add Profiles",id:"add-profiles",level:2},{value:"Add devices profiles",id:"add-devices-profiles",level:3},{value:"Add service profiles",id:"add-service-profiles",level:3},{value:"Add Destination",id:"add-destination",level:3},{value:"Add LoRaWAN Devices",id:"add-lorawan-devices",level:2},{value:"Add wireless device",id:"add-wireless-device",level:3},{value:"Configure the decoder",id:"configure-the-decoder",level:2},{value:"Create Message Rules",id:"create-message-rules",level:3},{value:"Configure the Lambda Function",id:"configure-the-lambda-function",level:3},{value:"Check the data",id:"check-the-data",level:3},{value:"Resource",id:"resource",level:2}],d={toc:c},p="wrapper";function g(e){let{components:t,...i}=e;return(0,a.yg)(p,(0,n.A)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/iot/latest/developerguide/iot-gs.html"},"AWS IoT")," provides the cloud services that connect your IoT devices to other devices and AWS cloud services. AWS IoT provides device software that can help you integrate your IoT devices into AWS IoT-based solutions. If your devices can connect to AWS IoT, AWS IoT can connect them to the cloud services that AWS provides."),(0,a.yg)("p",null,"Login to ",(0,a.yg)("a",{parentName:"p",href:"https://console.aws.amazon.com/iot/home"},"AWS IoT console")),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"If you do not have an AWS account, click ",(0,a.yg)("a",{parentName:"p",href:"https://portal.aws.amazon.com/billing/signup"},"here")," to create one.")),(0,a.yg)("h2",{id:"add-gateway"},"Add Gateway"),(0,a.yg)("p",null,"Navigate to ",(0,a.yg)("inlineCode",{parentName:"p"},"Internet of Things"),", then click ",(0,a.yg)("inlineCode",{parentName:"p"},"IoT Core"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/iot=core.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"On the left menu,select ",(0,a.yg)("inlineCode",{parentName:"p"},"LPWAN devices")," \u2192 ",(0,a.yg)("inlineCode",{parentName:"p"},"Gateways"),", click ",(0,a.yg)("inlineCode",{parentName:"p"},"Add gateway")),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/add-gateway.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"Gateway's EUI"),": The EUI of your gateway, you can find it on the device label.",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"Frequency"),": The gateway's frequency band.",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"Name"),": Name your gateway(optional)",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"SubBand"),": Optionally, you can also specify LoRaWAN configuration data such as the subbands that you want to use and filters that can control the flow of traffic. For more information, see ",(0,a.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/iot/latest/developerguide/connect-iot-lorawan-configure-location.html"},"Configure position of wireless resources with AWS IoT Core for LoRaWAN"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/gateway-eui.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h2",{id:"configure-your-gateway"},"Configure your gateway"),(0,a.yg)("h3",{id:"gateway-certificate"},"Gateway Certificate"),(0,a.yg)("p",null,"To authenticate your gateway so that it can securely communicate with AWS IoT, your LoRaWAN gateway must present a private key and certificate to AWS IoT Core for LoRaWAN."),(0,a.yg)("p",null,"Click ",(0,a.yg)("inlineCode",{parentName:"p"},"Create certificate"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/create-cer.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Download and save the certificate files and the server trust certificates."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS6.PNG",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"There shoule be four files inside, you'll use them later to configure the gateway."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/files.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h3",{id:"gateway-permission"},"Gateway Permission"),(0,a.yg)("p",null,"If you haven't created the IoTWirelessGatewayCertManagerRole IAM role for your account, create the role before you continue adding the gateway.\nYour gateways won't be able to communicate with AWS IoT without this role."),(0,a.yg)("p",null,"Choose the Role: ",(0,a.yg)("inlineCode",{parentName:"p"},"IoT Wireless Gateway Cert Manager Role"),", then submit the configuration."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/permissions.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Copy the CUPS URL, we will use it in the next step."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/cups.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h3",{id:"gateway-configuration"},"Gateway Configuration"),(0,a.yg)("p",null,"Login to the Luci configure page of the gateway, check ",(0,a.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/products/SenseCAP%20M2/Quick%20Start%20for%20SenseCAP%20M2%20Multi-Platfrom%20Gateway%20&%20Sensors.pdf"},"Get_Started")," for more details."),(0,a.yg)("p",null,"Navigate to ",(0,a.yg)("inlineCode",{parentName:"p"},"LoRa")," > ",(0,a.yg)("inlineCode",{parentName:"p"},"LoRa Network"),"."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"Mode"),": Basic Station",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"Gateway EUI"),": Your gateway eui",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"Server"),": CUPS Server",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"URL"),": The CUPS URL we copied before",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"Authentication Mode"),": TLS Server and Client Authentication"),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS21.PNG",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Copy the content of the certificate file we downloaded before(the certificate can be opened in text form)."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS23.PNG",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Navigate to the Gateways page and choose the gateway you've added."),(0,a.yg)("p",null,"In the LoRaWAN specific details section of the Gateway details page, you'll see the connection status and the date and time the last uplink was received."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/gate-connected.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h2",{id:"add-profiles"},"Add Profiles"),(0,a.yg)("p",null,"Device and service profiles can be defined to describe common device configurations. These profiles describe configuration parameters that are shared by devices to make it easier to add those devices. AWS IoT Core for LoRaWAN supports device profiles and service profiles."),(0,a.yg)("h3",{id:"add-devices-profiles"},"Add devices profiles"),(0,a.yg)("p",null,"Navigate to ",(0,a.yg)("inlineCode",{parentName:"p"},"Devices")," > ",(0,a.yg)("inlineCode",{parentName:"p"},"Profiles"),", click ",(0,a.yg)("inlineCode",{parentName:"p"},"Add device profile"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS11.PNG",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Provide a Device profile name, select the Frequency band (RfRegion)that you're using for the device and gateway, and keep the other settings to the default values."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/proflie2.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h3",{id:"add-service-profiles"},"Add service profiles"),(0,a.yg)("p",null,"Navigate to ",(0,a.yg)("inlineCode",{parentName:"p"},"Devices")," > ",(0,a.yg)("inlineCode",{parentName:"p"},"Profiles"),", click ",(0,a.yg)("inlineCode",{parentName:"p"},"Add service profile")),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS13.PNG",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"It's recommend that you leave the setting ",(0,a.yg)("inlineCode",{parentName:"p"},"AddGWMetaData")," enabled so that you'll receive additional gateway metadata for each payload, such as RSSIand SNR for the data transmission."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/profile4.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h3",{id:"add-destination"},"Add Destination"),(0,a.yg)("p",null,"Navigate to ",(0,a.yg)("inlineCode",{parentName:"p"},"Devices")," > ",(0,a.yg)("inlineCode",{parentName:"p"},"Destination"),", click ",(0,a.yg)("inlineCode",{parentName:"p"},"Add destination"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS15.PNG",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Here select ",(0,a.yg)("inlineCode",{parentName:"p"},"Publish to AWS IoT Core Message Broker")," and name the destination's ",(0,a.yg)("inlineCode",{parentName:"p"},"MQTT topic")),(0,a.yg)("p",null,"Permissions: Select an existing service role > ",(0,a.yg)("inlineCode",{parentName:"p"},"IoT Wireless Gateway Cert Manager Role")),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"A destination name can only have alphanumeric, - (hyphen) and _ (underscore) characters and it can't have any spaces.")),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS14.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h2",{id:"add-lorawan-devices"},"Add LoRaWAN Devices"),(0,a.yg)("h3",{id:"add-wireless-device"},"Add wireless device"),(0,a.yg)("p",null,"Navigate to ",(0,a.yg)("inlineCode",{parentName:"p"},"LPWAN devices")," > ",(0,a.yg)("inlineCode",{parentName:"p"},"Devices"),", click ",(0,a.yg)("inlineCode",{parentName:"p"},"Add wireless device"),"."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"Wireless device specification"),": OTAAv1.0x"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"DevEUI/APP EUI/APP key"),": can be found in the SenseCAP Mate APP, check ",(0,a.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Get_Started_with_SenseCAP_T1000_tracker/#get-started"},"Get_Started")," for more details."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS17.PNG",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS20.PNG",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Select the device profile and destination you created in the previous step. "),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/device-eui2.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Navigate to the Devices page and choose the device you added before."),(0,a.yg)("p",null,"In the Details section of the Wireless devices details page, you'll see the date received."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/AWS19.PNG",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h2",{id:"configure-the-decoder"},"Configure the decoder"),(0,a.yg)("h3",{id:"create-message-rules"},"Create Message Rules"),(0,a.yg)("p",null,"Navigate to ",(0,a.yg)("inlineCode",{parentName:"p"},"Message routing")," tab \u2192 ",(0,a.yg)("inlineCode",{parentName:"p"},"Rules"),", and click ",(0,a.yg)("inlineCode",{parentName:"p"},"Create Rule")," button."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/rules.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Name your rule and submit it."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/rules2.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"SQL version"),": 2016-03-23",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"SQL statement"),": SELECT * FROM ",(0,a.yg)("strong",{parentName:"p"},'"YourDestinationTopic"')),(0,a.yg)("p",null,"Here we fill in ",(0,a.yg)("inlineCode",{parentName:"p"},"t1000-raw")," according to ",(0,a.yg)("a",{parentName:"p",href:"#add-destination"},"Add Destination")),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/sql.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Scroll down to ",(0,a.yg)("inlineCode",{parentName:"p"},"Rule actions")," section, and select ",(0,a.yg)("inlineCode",{parentName:"p"},"Lambda")," from ",(0,a.yg)("inlineCode",{parentName:"p"},"Action 1"),", then click ",(0,a.yg)("inlineCode",{parentName:"p"},"Create a Lambda function"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/rule-action.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"Function name"),": Name your function.",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"Runtime"),": Node.js 20.x",(0,a.yg)("br",null),"\n",(0,a.yg)("inlineCode",{parentName:"p"},"Architexture"),": x86_64"),(0,a.yg)("p",null,"Click ",(0,a.yg)("inlineCode",{parentName:"p"},"Create function")," button to create a new function."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/cre-function.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"After creating the function, it goes to the function's config page. We will configure it later so just go back to the rules page."),(0,a.yg)("p",null,"Click the Refresh button and select the Lambda function you create before. Then click ",(0,a.yg)("inlineCode",{parentName:"p"},"Next")," to Step 4."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/sel-function.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Check that all details of the rule are correct, then click ",(0,a.yg)("inlineCode",{parentName:"p"},"Create")," to create the rule."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/rules3.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h3",{id:"configure-the-lambda-function"},"Configure the Lambda Function"),(0,a.yg)("p",null,"Back to ",(0,a.yg)("inlineCode",{parentName:"p"},"Message routing")," tab \u2192 ",(0,a.yg)("inlineCode",{parentName:"p"},"Rules"),", select the rule you created before."),(0,a.yg)("p",null,"Click ",(0,a.yg)("inlineCode",{parentName:"p"},"Lambda")," from ",(0,a.yg)("inlineCode",{parentName:"p"},"Actions")," and then click the link to go to the Lambda function configuration page."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/rules4.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/rules5.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"On the following funcition config page, rename the ",(0,a.yg)("inlineCode",{parentName:"p"},"index.mjs")," file to ",(0,a.yg)("inlineCode",{parentName:"p"},"index.js"),", remove all the code and replace it with the script from ",(0,a.yg)("a",{parentName:"p",href:"#resource"},"Resource"),", then click ",(0,a.yg)("inlineCode",{parentName:"p"},"Deploy")," button."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/decod.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("admonition",{title:"Note",type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"Replace the ",(0,a.yg)("inlineCode",{parentName:"p"},"region")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"device id")," according to your device.")),(0,a.yg)("p",null,"After configuring the decoder, Click ",(0,a.yg)("inlineCode",{parentName:"p"},"Configuration")," \u2192 ",(0,a.yg)("inlineCode",{parentName:"p"},"Permissions")," \u2192 ",(0,a.yg)("inlineCode",{parentName:"p"},"Edit"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/decod-per.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Click ",(0,a.yg)("inlineCode",{parentName:"p"},"View the xxxxxxxxxxx")," role at the bottom."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/existing-role.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Click ",(0,a.yg)("inlineCode",{parentName:"p"},"Add permissions")," \u2192 ",(0,a.yg)("inlineCode",{parentName:"p"},"Attach policies"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/policies.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",null,"Search ",(0,a.yg)("inlineCode",{parentName:"p"},"AdministratorAccess"),", check the box left it, and then click ",(0,a.yg)("inlineCode",{parentName:"p"},"Add Permissions"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/policies2.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h3",{id:"check-the-data"},"Check the data"),(0,a.yg)("p",null,"Check the data on page ",(0,a.yg)("inlineCode",{parentName:"p"},"MQTT test client"),", input ",(0,a.yg)("inlineCode",{parentName:"p"},"#")," and click ",(0,a.yg)("inlineCode",{parentName:"p"},"Subscribe")," button, you will see the data."),(0,a.yg)("p",null,"The raw payload of T1000 Tracker publish from ",(0,a.yg)("inlineCode",{parentName:"p"},"t1000-raw")," and the decoded data publish from ",(0,a.yg)("inlineCode",{parentName:"p"},"tracker/measurement"),"."),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/dataview1.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("p",{style:{textAlign:"center"}},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/dataview2.png",alt:"pir",width:800,height:"auto"})),(0,a.yg)("h2",{id:"resource"},"Resource"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/Seeed-Solution/SenseCAP-Decoder/blob/main/T1000/AWS/SenseCAP_T1000_AWS_Decoder.js"},"SenseCAP T1000 Tracker Decoder for AWS")))}g.isMDXComponent=!0}}]);