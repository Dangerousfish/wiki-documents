"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[80881],{15680:(e,t,o)=>{o.d(t,{xA:()=>c,yg:()=>h});var n=o(96540);function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var l=n.createContext({}),p=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var o=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(o),m=i,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return o?n.createElement(h,a(a({ref:t},c),{},{components:o})):n.createElement(h,a({ref:t},c))}));function h(e,t){var o=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=o.length,a=new Array(r);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,a[1]=s;for(var p=2;p<r;p++)a[p]=o[p];return n.createElement.apply(null,a)}return n.createElement.apply(null,o)}m.displayName="MDXCreateElement"},24062:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var n=o(9668),i=(o(96540),o(15680));const r={description:"Build a simplp Clock with Seeed Studio XIAO RA4M1.",title:"Hollow Clock Powered by Seeed Studio XIAO RA4M1",keywords:["ra4m1","xiao","clokc"],image:"https://files.seeedstudio.com/wiki/RA4M1_Application/top.webp",side_position:2,slug:"/xiao_ra4m1_clock",last_update:{date:"11/12/2024",author:"Jason"}},a=void 0,s={unversionedId:"Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_RA4M1/Application/XIAO_RA4M1_Clock",id:"Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_RA4M1/Application/XIAO_RA4M1_Clock",title:"Hollow Clock Powered by Seeed Studio XIAO RA4M1",description:"Build a simplp Clock with Seeed Studio XIAO RA4M1.",source:"@site/docs/Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_RA4M1/Application/XIAO_RA4M1_Clock.md",sourceDirName:"Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_RA4M1/Application",slug:"/xiao_ra4m1_clock",permalink:"/xiao_ra4m1_clock",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_RA4M1/Application/XIAO_RA4M1_Clock.md",tags:[],version:"current",lastUpdatedBy:"Jason",lastUpdatedAt:1731369600,formattedLastUpdatedAt:"Nov 12, 2024",frontMatter:{description:"Build a simplp Clock with Seeed Studio XIAO RA4M1.",title:"Hollow Clock Powered by Seeed Studio XIAO RA4M1",keywords:["ra4m1","xiao","clokc"],image:"https://files.seeedstudio.com/wiki/RA4M1_Application/top.webp",side_position:2,slug:"/xiao_ra4m1_clock",last_update:{date:"11/12/2024",author:"Jason"}},sidebar:"ProductSidebar",previous:{title:"Pin Multiplexing with Seeed Studio XIAO RA4M1",permalink:"/xiao_ra4m1_pin_multiplexing"},next:{title:"XIAO RA4M1 Mouse",permalink:"/xiao_ra4m1_mouse"}},l={},p=[{value:"Inspiration arises",id:"inspiration-arises",level:2},{value:"Hadware Overview",id:"hadware-overview",level:2},{value:"MCU",id:"mcu",level:3},{value:"Circuit Board",id:"circuit-board",level:3},{value:"Software Overview",id:"software-overview",level:3},{value:"Resouce",id:"resouce",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],c={toc:p},u="wrapper";function d(e){let{components:t,...o}=e;return(0,i.yg)(u,(0,n.A)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("div",{class:"table-center"},(0,i.yg)("iframe",{width:"800",height:"500",src:"https://files.seeedstudio.com/wiki/RA4M1_Application/1.mp4",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"}," ")),(0,i.yg)("h2",{id:"inspiration-arises"},"Inspiration arises"),(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=jvoOgxK4EvI&ab_channel=TheWrench"},"Hollow Clock")," gained significant popularity on YouTube some time ago.\nBut we have smaller development boards and smaller motor driver boards, so let's get our hands dirty and build a XIAO RA4M1 Hollow Clock!"),(0,i.yg)("h2",{id:"hadware-overview"},"Hadware Overview"),(0,i.yg)("h3",{id:"mcu"},"MCU"),(0,i.yg)("div",{class:"table-center"},(0,i.yg)("table",{align:"center"},(0,i.yg)("tr",null,(0,i.yg)("th",null,"Seeed Studio XIAO RA4M1")),(0,i.yg)("tr",null,(0,i.yg)("td",null,(0,i.yg)("div",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/XIAO-R4AM1/img/2-102010551-Seeed-Studio-XIAO-RA4M1-45font.jpg",style:{width:300,height:"auto"}})))),(0,i.yg)("tr",null,(0,i.yg)("td",null,(0,i.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,i.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/Seeed-XIAO-RA4M1-p-5943.html"},(0,i.yg)("strong",null,(0,i.yg)("span",null,(0,i.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,i.yg)("h3",{id:"circuit-board"},"Circuit Board"),(0,i.yg)("p",null,"With the same volume as XIAO, simply weld the mother seat and insert XIAO and the motor into it to operate."),(0,i.yg)("div",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/RA4M1_Application/2.png",style:{width:500,height:"auto"}})),(0,i.yg)("p",null,"Specific information is in the resource at the end."),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},"Both motors and components need to be purchased by oneself.")),(0,i.yg)("h3",{id:"software-overview"},"Software Overview"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-c"},"\n// This code controls a stepper motor for a clock project,\n// allowing the minute hand to rotate accurately based on time.\n\n// Please tune the following value if the clock gains or loses time.\n// Theoretically, the standard value is 60000 milliseconds per minute.\n#define MILLIS_PER_MIN 60000 // milliseconds per a minute\n\n// Motor and clock parameters\n// Total steps for a full turn of the minute rotor\n// Calculated as 4096 steps per revolution * 90 degrees / 12 hours\n#define STEPS_PER_ROTATION 30720 // steps for a full turn of minute rotor\n\n// Wait time for a single step of the stepper motor\nint delaytime = 2;\n\n// Ports used to control the stepper motor\n// If your motor rotates in the opposite direction,\n// change the order of the port numbers as needed.\nint port[4] = {0, 1, 2, 3};\n\n// Sequence of stepper motor control\n// This array defines the control sequence for the motor phases.\nint seq[8][4] = {\n  {  LOW, HIGH, HIGH,  LOW},\n  {  LOW,  LOW, HIGH,  LOW},\n  {  LOW,  LOW, HIGH, HIGH},\n  {  LOW,  LOW,  LOW, HIGH},\n  { HIGH,  LOW,  LOW, HIGH},\n  { HIGH,  LOW,  LOW,  LOW},\n  { HIGH, HIGH,  LOW,  LOW},\n  {  LOW, HIGH,  LOW,  LOW}\n};\n\n// Function to rotate the stepper motor based on the specified number of steps\nvoid rotate(int step) {\n  static int phase = 0;\n  int i, j;\n  int delta = (step > 0) ? 1 : 7; // Determine direction of rotation\n  int dt = 20; // Initial delay time\n\n  step = (step > 0) ? step : -step; // Convert to positive step count\n  for(j = 0; j < step; j++) {\n    phase = (phase + delta) % 8; // Update phase\n    for(i = 0; i < 4; i++) {\n      digitalWrite(port[i], seq[phase][i]); // Control the motor\n    }\n    delay(dt); // Wait for the specified delay\n    if(dt > delaytime) dt--; // Gradually decrease delay\n  }\n  // Power cut: stop the motor\n  for(i = 0; i < 4; i++) {\n    digitalWrite(port[i], LOW);\n  }\n}\n\n// Setup function, runs once at startup\nvoid setup() {\n  // Initialize motor control ports as outputs\n  pinMode(port[0], OUTPUT);\n  pinMode(port[1], OUTPUT);\n  pinMode(port[2], OUTPUT);\n  pinMode(port[3], OUTPUT);\n  \n  // Perform initial approach runs to position the minute hand\n  rotate(-20); // Approach run in one direction\n  rotate(20);  // Approach run in the opposite direction\n  rotate(STEPS_PER_ROTATION / 60); // Position the minute hand\n}\n\n// Main loop, runs continuously\nvoid loop() {\n  static long prev_min = 0, prev_pos = 0; // Track previous minute and position\n  long min;\n  static long pos;\n  \n  min = millis() / MILLIS_PER_MIN; // Get the current minute\n  if(prev_min == min) {\n    return; // Exit if the minute hasn't changed\n  }\n  prev_min = min; // Update previous minute\n  pos = (STEPS_PER_ROTATION * min) / 60; // Calculate target position\n  rotate(-20); // Approach run in one direction\n  rotate(20);  // Approach run in the opposite direction\n  if(pos - prev_pos > 0) {\n    rotate(pos - prev_pos); // Rotate to the new position if needed\n  }\n  prev_pos = pos; // Update previous position\n}\n\n")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Ensure Stepper Motor Connections"),":\nConnect the four control wires of the stepper motor to the ports specified in the port array (0, 1, 2, 3).")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Adjust Time Settings"),":\nAdjust the MILLIS_PER_MIN value according to actual conditions to ensure the clock is accurate. If the clock is running fast or slow, adjust this value accordingly.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Confirm Step Calculation"),":\nEnsure the STEPS_PER_ROTATION value is correctly calculated based on the actual step count of your motor and the system design.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Adjust Delay Time"),":\nThe delaytime controls the delay between each step. Fine-tune this parameter based on motor performance and requirements to optimize motor operation.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Control Sequence Settings"),":\nThe seq array defines the control sequence for the stepper motor. If the motor rotates in the wrong direction, you can adjust the values in this array.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Function Descriptions"),":\nrotate(int step): Controls the motor to rotate a specified number of steps. You can pass positive or negative values to control the direction. The motor will gradually decrease the delay after each rotation to increase speed.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"setup():")," Runs once at startup to initialize the control ports and perform initial positioning. This is a necessary step for setting up the motor.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"loop():")," The main loop that runs continuously to calculate the current minute and update the position of the minute hand. This function will call the rotate() function to rotate the hand at each minute update."))),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("ul",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"Ensure the power supply is suitable for your stepper motor and check that all connections are correct.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"During testing, monitor the operation of the motor to ensure it functions as expected and make adjustments as needed.")))),(0,i.yg)("p",null,"If you have more ideas and modifications, feel free to showcase them using the XIAO series!"),(0,i.yg)("h2",{id:"resouce"},"Resouce"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"\ud83d\udcc4 ",(0,i.yg)("strong",{parentName:"li"},"[SCH]")," ",(0,i.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/RA4M1_Application/4.zip"},"Motor Driver Board")),(0,i.yg)("li",{parentName:"ul"},"\ud83d\udcc4 ",(0,i.yg)("strong",{parentName:"li"},"[PCB]")," ",(0,i.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/RA4M1_Application/xiao.pcb"},"Motor Driver Board")),(0,i.yg)("li",{parentName:"ul"},"\ud83d\udcc4 ",(0,i.yg)("strong",{parentName:"li"},"[3D]")," ",(0,i.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/wiki/RA4M1_Application/clock.zip"},"Clock 3D Modeling"))),(0,i.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,i.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,i.yg)("div",{class:"button_tech_support_container"},(0,i.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,i.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,i.yg)("div",{class:"button_tech_support_container"},(0,i.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,i.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}d.isMDXComponent=!0}}]);